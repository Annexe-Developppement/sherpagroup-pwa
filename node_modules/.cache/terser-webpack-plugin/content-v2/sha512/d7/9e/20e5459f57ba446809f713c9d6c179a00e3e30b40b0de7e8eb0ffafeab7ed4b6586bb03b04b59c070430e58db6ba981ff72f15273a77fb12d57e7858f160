{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[154],{681:function(e,n,t){\"use strict\";t.d(n,\"a\",(function(){return d}));var r=t(4),a=t.n(r),o=t(9),u=t.n(o),c=t(10),p=t.n(c),i=t(0),s=t(17),l=t(170),d=function(e){var n=e.setIsCartUpdating,t=e.mutations,r=t.applyCouponMutation,o=t.removeCouponMutation,c=e.queries.getAppliedCouponsQuery,d=Object(l.b)(),b=p()(d,1)[0].cartId,f=Object(s.useQuery)(c,{fetchPolicy:\"cache-and-network\",nextFetchPolicy:\"cache-first\",skip:!b,variables:{cartId:b}}),v=f.data,C=f.error,h=Object(s.useMutation)(r),w=p()(h,2),k=w[0],y=w[1],j=y.called,m=y.error,x=y.loading,M=Object(s.useMutation)(o),O=p()(M,2),g=O[0],I=O[1],A=I.called,Q=I.error,J=I.loading,P=Object(i.useCallback)(function(){var e=u()(a.a.mark((function e(n){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.couponCode){e.next=3;break}return e.abrupt(\"return\");case 3:return e.prev=3,e.next=6,k({variables:{cartId:b,couponCode:t}});case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:case\"end\":return e.stop()}}),e,null,[[3,8]])})));return function(n){return e.apply(this,arguments)}}(),[k,b]),q=Object(i.useCallback)(function(){var e=u()(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g({variables:{cartId:b,couponCode:n}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case\"end\":return e.stop()}}),e,null,[[0,5]])})));return function(n){return e.apply(this,arguments)}}(),[b,g]);Object(i.useEffect)((function(){(j||A)&&n(x||J)}),[j,x,A,J,n]);var E=Object(i.useMemo)((function(){return new Map([[\"getAppliedCouponsQuery\",C],[\"applyCouponMutation\",m],[\"removeCouponMutation\",Q]])}),[m,C,Q]);return{applyingCoupon:x,data:v,errors:E,handleApplyCoupon:P,handleRemoveCoupon:q,removingCoupon:J}}}}]);","extractedComments":[]}