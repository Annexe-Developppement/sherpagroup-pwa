{"map":"{\"version\":3,\"sources\":[\"29.fc40d47c39dd36e2e457.js\"],\"names\":[\"window\",\"push\",\"./node_modules/@magento/peregrine/lib/util/appendOptionsToPayload.js\",\"module\",\"__webpack_exports__\",\"__webpack_require__\",\"eval\",\"./node_modules/@magento/peregrine/lib/util/findMatchingProductVariant.js\",\"./node_modules/@magento/peregrine/lib/util/isProductConfigurable.js\"],\"mappings\":\"CAACA,OAAqB,aAAIA,OAAqB,cAAK,IAAIC,KAAK,CAAC,CAAC,IAAI,CAE7DC;;;;+CAKA,SAAUC,OAAQC,oBAAqBC,qBAE7C,aACAC,KAAK,omKAICC;;;;4CAKA,SAAUJ,OAAQC,oBAAqBC,qBAE7C,aACAC,KAAK,+5IAICE;;;;8CAKA,SAAUL,OAAQC,oBAAqBC,qBAE7C,aACAC,KAAK\"}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{\"./node_modules/@magento/peregrine/lib/util/appendOptionsToPayload.js\":\n/*!****************************************************************************!*\\\n  !*** ./node_modules/@magento/peregrine/lib/util/appendOptionsToPayload.js ***!\n  \\****************************************************************************/\n/*! exports provided: appendOptionsToPayload */function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval('__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"appendOptionsToPayload\", function() { return appendOptionsToPayload; });\\n/* harmony import */ var _findMatchingProductVariant__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./findMatchingProductVariant */ \"./node_modules/@magento/peregrine/lib/util/findMatchingProductVariant.js\");\\n\\n/**\\n * TODO Document\\n */\\n\\nconst appendOptionsToPayload = (payload, optionSelections, optionCodes = null) => {\\n  const {\\n    item\\n  } = payload;\\n  const {\\n    variants\\n  } = item;\\n\\n  if (!optionCodes) {\\n    optionCodes = new Map();\\n\\n    for (const option of item.configurable_options) {\\n      // There\\'s a type difference in configurable option queries between\\n      // cart and product, casting to number is required. Can remove\\n      // cast once MC-29839 is resolved.\\n      optionCodes.set(Number(option.attribute_id), option.attribute_code);\\n    }\\n  }\\n\\n  const options = Array.from(optionSelections, ([id, value]) => ({\\n    option_id: id,\\n    option_value: value\\n  }));\\n  const selectedVariant = Object(_findMatchingProductVariant__WEBPACK_IMPORTED_MODULE_0__[\"findMatchingVariant\"])({\\n    variants,\\n    optionCodes,\\n    optionSelections\\n  });\\n  if (!selectedVariant) return payload;\\n  Object.assign(payload, {\\n    options,\\n    parentSku: item.sku,\\n    item: Object.assign({}, selectedVariant.product)\\n  });\\n  return payload;\\n};//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQG1hZ2VudG8vcGVyZWdyaW5lL2xpYi91dGlsL2FwcGVuZE9wdGlvbnNUb1BheWxvYWQuanM/YjdkNSJdLCJuYW1lcyI6WyJhcHBlbmRPcHRpb25zVG9QYXlsb2FkIiwicGF5bG9hZCIsIm9wdGlvblNlbGVjdGlvbnMiLCJvcHRpb25Db2RlcyIsIml0ZW0iLCJ2YXJpYW50cyIsIk1hcCIsIm9wdGlvbiIsImNvbmZpZ3VyYWJsZV9vcHRpb25zIiwic2V0IiwiTnVtYmVyIiwiYXR0cmlidXRlX2lkIiwiYXR0cmlidXRlX2NvZGUiLCJvcHRpb25zIiwiQXJyYXkiLCJmcm9tIiwiaWQiLCJ2YWx1ZSIsIm9wdGlvbl9pZCIsIm9wdGlvbl92YWx1ZSIsInNlbGVjdGVkVmFyaWFudCIsImZpbmRNYXRjaGluZ1ZhcmlhbnQiLCJPYmplY3QiLCJhc3NpZ24iLCJwYXJlbnRTa3UiLCJza3UiLCJwcm9kdWN0Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTs7QUFDTyxNQUFNQSxzQkFBc0IsR0FBRyxDQUNsQ0MsT0FEa0MsRUFFbENDLGdCQUZrQyxFQUdsQ0MsV0FBVyxHQUFHLElBSG9CLEtBSWpDO0FBQ0QsUUFBTTtBQUFFQztBQUFGLE1BQVdILE9BQWpCO0FBQ0EsUUFBTTtBQUFFSTtBQUFGLE1BQWVELElBQXJCOztBQUVBLE1BQUksQ0FBQ0QsV0FBTCxFQUFrQjtBQUNkQSxlQUFXLEdBQUcsSUFBSUcsR0FBSixFQUFkOztBQUNBLFNBQUssTUFBTUMsTUFBWCxJQUFxQkgsSUFBSSxDQUFDSSxvQkFBMUIsRUFBZ0Q7QUFDNUM7QUFDQTtBQUNBO0FBQ0FMLGlCQUFXLENBQUNNLEdBQVosQ0FBZ0JDLE1BQU0sQ0FBQ0gsTUFBTSxDQUFDSSxZQUFSLENBQXRCLEVBQTZDSixNQUFNLENBQUNLLGNBQXBEO0FBQ0g7QUFDSjs7QUFFRCxRQUFNQyxPQUFPLEdBQUdDLEtBQUssQ0FBQ0MsSUFBTixDQUFXYixnQkFBWCxFQUE2QixDQUFDLENBQUNjLEVBQUQsRUFBS0MsS0FBTCxDQUFELE1BQWtCO0FBQzNEQyxhQUFTLEVBQUVGLEVBRGdEO0FBRTNERyxnQkFBWSxFQUFFRjtBQUY2QyxHQUFsQixDQUE3QixDQUFoQjtBQUtBLFFBQU1HLGVBQWUsR0FBR0MsdUZBQW1CLENBQUM7QUFDeENoQixZQUR3QztBQUV4Q0YsZUFGd0M7QUFHeENEO0FBSHdDLEdBQUQsQ0FBM0M7QUFNQSxNQUFJLENBQUNrQixlQUFMLEVBQXNCLE9BQU9uQixPQUFQO0FBRXRCcUIsUUFBTSxDQUFDQyxNQUFQLENBQWN0QixPQUFkLEVBQXVCO0FBQ25CWSxXQURtQjtBQUVuQlcsYUFBUyxFQUFFcEIsSUFBSSxDQUFDcUIsR0FGRztBQUduQnJCLFFBQUksRUFBRWtCLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjLEVBQWQsRUFBa0JILGVBQWUsQ0FBQ00sT0FBbEM7QUFIYSxHQUF2QjtBQU1BLFNBQU96QixPQUFQO0FBQ0gsQ0F0Q00iLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQG1hZ2VudG8vcGVyZWdyaW5lL2xpYi91dGlsL2FwcGVuZE9wdGlvbnNUb1BheWxvYWQuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmaW5kTWF0Y2hpbmdWYXJpYW50IH0gZnJvbSAnLi9maW5kTWF0Y2hpbmdQcm9kdWN0VmFyaWFudCc7XG5cbi8qKlxuICogVE9ETyBEb2N1bWVudFxuICovXG5leHBvcnQgY29uc3QgYXBwZW5kT3B0aW9uc1RvUGF5bG9hZCA9IChcbiAgICBwYXlsb2FkLFxuICAgIG9wdGlvblNlbGVjdGlvbnMsXG4gICAgb3B0aW9uQ29kZXMgPSBudWxsXG4pID0+IHtcbiAgICBjb25zdCB7IGl0ZW0gfSA9IHBheWxvYWQ7XG4gICAgY29uc3QgeyB2YXJpYW50cyB9ID0gaXRlbTtcblxuICAgIGlmICghb3B0aW9uQ29kZXMpIHtcbiAgICAgICAgb3B0aW9uQ29kZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIGl0ZW0uY29uZmlndXJhYmxlX29wdGlvbnMpIHtcbiAgICAgICAgICAgIC8vIFRoZXJlJ3MgYSB0eXBlIGRpZmZlcmVuY2UgaW4gY29uZmlndXJhYmxlIG9wdGlvbiBxdWVyaWVzIGJldHdlZW5cbiAgICAgICAgICAgIC8vIGNhcnQgYW5kIHByb2R1Y3QsIGNhc3RpbmcgdG8gbnVtYmVyIGlzIHJlcXVpcmVkLiBDYW4gcmVtb3ZlXG4gICAgICAgICAgICAvLyBjYXN0IG9uY2UgTUMtMjk4MzkgaXMgcmVzb2x2ZWQuXG4gICAgICAgICAgICBvcHRpb25Db2Rlcy5zZXQoTnVtYmVyKG9wdGlvbi5hdHRyaWJ1dGVfaWQpLCBvcHRpb24uYXR0cmlidXRlX2NvZGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgb3B0aW9ucyA9IEFycmF5LmZyb20ob3B0aW9uU2VsZWN0aW9ucywgKFtpZCwgdmFsdWVdKSA9PiAoe1xuICAgICAgICBvcHRpb25faWQ6IGlkLFxuICAgICAgICBvcHRpb25fdmFsdWU6IHZhbHVlXG4gICAgfSkpO1xuXG4gICAgY29uc3Qgc2VsZWN0ZWRWYXJpYW50ID0gZmluZE1hdGNoaW5nVmFyaWFudCh7XG4gICAgICAgIHZhcmlhbnRzLFxuICAgICAgICBvcHRpb25Db2RlcyxcbiAgICAgICAgb3B0aW9uU2VsZWN0aW9uc1xuICAgIH0pO1xuXG4gICAgaWYgKCFzZWxlY3RlZFZhcmlhbnQpIHJldHVybiBwYXlsb2FkO1xuXG4gICAgT2JqZWN0LmFzc2lnbihwYXlsb2FkLCB7XG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHBhcmVudFNrdTogaXRlbS5za3UsXG4gICAgICAgIGl0ZW06IE9iamVjdC5hc3NpZ24oe30sIHNlbGVjdGVkVmFyaWFudC5wcm9kdWN0KVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHBheWxvYWQ7XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\\n//# sourceURL=webpack-internal:///./node_modules/@magento/peregrine/lib/util/appendOptionsToPayload.js\\n')},\"./node_modules/@magento/peregrine/lib/util/findMatchingProductVariant.js\":\n/*!********************************************************************************!*\\\n  !*** ./node_modules/@magento/peregrine/lib/util/findMatchingProductVariant.js ***!\n  \\********************************************************************************/\n/*! exports provided: findMatchingVariant */function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval('__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"findMatchingVariant\", function() { return findMatchingVariant; });\\n/**\\n * TODO Document\\n */\\nconst findMatchingVariant = ({\\n  variants,\\n  optionCodes,\\n  optionSelections\\n}) => {\\n  return variants.find(({\\n    attributes,\\n    product\\n  }) => {\\n    const customAttributes = (attributes || []).reduce((map, {\\n      code,\\n      value_index\\n    }) => new Map(map).set(code, value_index), new Map());\\n\\n    for (const [id, value] of optionSelections) {\\n      const code = optionCodes.get(id);\\n      const matchesStandardAttribute = product[code] === value;\\n      const matchesCustomAttribute = customAttributes.get(code) === value; // if any option selection fails to match any standard attribute\\n      // and also fails to match any custom attribute\\n      // then this isn\\'t the correct variant\\n\\n      if (!matchesStandardAttribute && !matchesCustomAttribute) {\\n        return false;\\n      }\\n    } // otherwise, every option selection matched\\n    // and this is the correct variant\\n\\n\\n    return true;\\n  });\\n};//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQG1hZ2VudG8vcGVyZWdyaW5lL2xpYi91dGlsL2ZpbmRNYXRjaGluZ1Byb2R1Y3RWYXJpYW50LmpzP2M1OGEiXSwibmFtZXMiOlsiZmluZE1hdGNoaW5nVmFyaWFudCIsInZhcmlhbnRzIiwib3B0aW9uQ29kZXMiLCJvcHRpb25TZWxlY3Rpb25zIiwiZmluZCIsImF0dHJpYnV0ZXMiLCJwcm9kdWN0IiwiY3VzdG9tQXR0cmlidXRlcyIsInJlZHVjZSIsIm1hcCIsImNvZGUiLCJ2YWx1ZV9pbmRleCIsIk1hcCIsInNldCIsImlkIiwidmFsdWUiLCJnZXQiLCJtYXRjaGVzU3RhbmRhcmRBdHRyaWJ1dGUiLCJtYXRjaGVzQ3VzdG9tQXR0cmlidXRlIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ08sTUFBTUEsbUJBQW1CLEdBQUcsQ0FBQztBQUNoQ0MsVUFEZ0M7QUFFaENDLGFBRmdDO0FBR2hDQztBQUhnQyxDQUFELEtBSTdCO0FBQ0YsU0FBT0YsUUFBUSxDQUFDRyxJQUFULENBQWMsQ0FBQztBQUFFQyxjQUFGO0FBQWNDO0FBQWQsR0FBRCxLQUE2QjtBQUM5QyxVQUFNQyxnQkFBZ0IsR0FBRyxDQUFDRixVQUFVLElBQUksRUFBZixFQUFtQkcsTUFBbkIsQ0FDckIsQ0FBQ0MsR0FBRCxFQUFNO0FBQUVDLFVBQUY7QUFBUUM7QUFBUixLQUFOLEtBQWdDLElBQUlDLEdBQUosQ0FBUUgsR0FBUixFQUFhSSxHQUFiLENBQWlCSCxJQUFqQixFQUF1QkMsV0FBdkIsQ0FEWCxFQUVyQixJQUFJQyxHQUFKLEVBRnFCLENBQXpCOztBQUtBLFNBQUssTUFBTSxDQUFDRSxFQUFELEVBQUtDLEtBQUwsQ0FBWCxJQUEwQlosZ0JBQTFCLEVBQTRDO0FBQ3hDLFlBQU1PLElBQUksR0FBR1IsV0FBVyxDQUFDYyxHQUFaLENBQWdCRixFQUFoQixDQUFiO0FBQ0EsWUFBTUcsd0JBQXdCLEdBQUdYLE9BQU8sQ0FBQ0ksSUFBRCxDQUFQLEtBQWtCSyxLQUFuRDtBQUNBLFlBQU1HLHNCQUFzQixHQUFHWCxnQkFBZ0IsQ0FBQ1MsR0FBakIsQ0FBcUJOLElBQXJCLE1BQStCSyxLQUE5RCxDQUh3QyxDQUt4QztBQUNBO0FBQ0E7O0FBQ0EsVUFBSSxDQUFDRSx3QkFBRCxJQUE2QixDQUFDQyxzQkFBbEMsRUFBMEQ7QUFDdEQsZUFBTyxLQUFQO0FBQ0g7QUFDSixLQWpCNkMsQ0FtQjlDO0FBQ0E7OztBQUNBLFdBQU8sSUFBUDtBQUNILEdBdEJNLENBQVA7QUF1QkgsQ0E1Qk0iLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQG1hZ2VudG8vcGVyZWdyaW5lL2xpYi91dGlsL2ZpbmRNYXRjaGluZ1Byb2R1Y3RWYXJpYW50LmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUT0RPIERvY3VtZW50XG4gKi9cbmV4cG9ydCBjb25zdCBmaW5kTWF0Y2hpbmdWYXJpYW50ID0gKHtcbiAgICB2YXJpYW50cyxcbiAgICBvcHRpb25Db2RlcyxcbiAgICBvcHRpb25TZWxlY3Rpb25zXG59KSA9PiB7XG4gICAgcmV0dXJuIHZhcmlhbnRzLmZpbmQoKHsgYXR0cmlidXRlcywgcHJvZHVjdCB9KSA9PiB7XG4gICAgICAgIGNvbnN0IGN1c3RvbUF0dHJpYnV0ZXMgPSAoYXR0cmlidXRlcyB8fCBbXSkucmVkdWNlKFxuICAgICAgICAgICAgKG1hcCwgeyBjb2RlLCB2YWx1ZV9pbmRleCB9KSA9PiBuZXcgTWFwKG1hcCkuc2V0KGNvZGUsIHZhbHVlX2luZGV4KSxcbiAgICAgICAgICAgIG5ldyBNYXAoKVxuICAgICAgICApO1xuXG4gICAgICAgIGZvciAoY29uc3QgW2lkLCB2YWx1ZV0gb2Ygb3B0aW9uU2VsZWN0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgY29kZSA9IG9wdGlvbkNvZGVzLmdldChpZCk7XG4gICAgICAgICAgICBjb25zdCBtYXRjaGVzU3RhbmRhcmRBdHRyaWJ1dGUgPSBwcm9kdWN0W2NvZGVdID09PSB2YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXNDdXN0b21BdHRyaWJ1dGUgPSBjdXN0b21BdHRyaWJ1dGVzLmdldChjb2RlKSA9PT0gdmFsdWU7XG5cbiAgICAgICAgICAgIC8vIGlmIGFueSBvcHRpb24gc2VsZWN0aW9uIGZhaWxzIHRvIG1hdGNoIGFueSBzdGFuZGFyZCBhdHRyaWJ1dGVcbiAgICAgICAgICAgIC8vIGFuZCBhbHNvIGZhaWxzIHRvIG1hdGNoIGFueSBjdXN0b20gYXR0cmlidXRlXG4gICAgICAgICAgICAvLyB0aGVuIHRoaXMgaXNuJ3QgdGhlIGNvcnJlY3QgdmFyaWFudFxuICAgICAgICAgICAgaWYgKCFtYXRjaGVzU3RhbmRhcmRBdHRyaWJ1dGUgJiYgIW1hdGNoZXNDdXN0b21BdHRyaWJ1dGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBvdGhlcndpc2UsIGV2ZXJ5IG9wdGlvbiBzZWxlY3Rpb24gbWF0Y2hlZFxuICAgICAgICAvLyBhbmQgdGhpcyBpcyB0aGUgY29ycmVjdCB2YXJpYW50XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\\n//# sourceURL=webpack-internal:///./node_modules/@magento/peregrine/lib/util/findMatchingProductVariant.js\\n')},\"./node_modules/@magento/peregrine/lib/util/isProductConfigurable.js\":\n/*!***************************************************************************!*\\\n  !*** ./node_modules/@magento/peregrine/lib/util/isProductConfigurable.js ***!\n  \\***************************************************************************/\n/*! exports provided: isProductConfigurable */function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\"isProductConfigurable\\\", function() { return isProductConfigurable; });\\n// TODO: Move/merge with product util in peregrine?\\nconst isProductConfigurable = product => product.__typename === 'ConfigurableProduct';//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQG1hZ2VudG8vcGVyZWdyaW5lL2xpYi91dGlsL2lzUHJvZHVjdENvbmZpZ3VyYWJsZS5qcz82MTc5Il0sIm5hbWVzIjpbImlzUHJvZHVjdENvbmZpZ3VyYWJsZSIsInByb2R1Y3QiLCJfX3R5cGVuYW1lIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDTyxNQUFNQSxxQkFBcUIsR0FBR0MsT0FBTyxJQUN4Q0EsT0FBTyxDQUFDQyxVQUFSLEtBQXVCLHFCQURwQiIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy9AbWFnZW50by9wZXJlZ3JpbmUvbGliL3V0aWwvaXNQcm9kdWN0Q29uZmlndXJhYmxlLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVE9ETzogTW92ZS9tZXJnZSB3aXRoIHByb2R1Y3QgdXRpbCBpbiBwZXJlZ3JpbmU/XG5leHBvcnQgY29uc3QgaXNQcm9kdWN0Q29uZmlndXJhYmxlID0gcHJvZHVjdCA9PlxuICAgIHByb2R1Y3QuX190eXBlbmFtZSA9PT0gJ0NvbmZpZ3VyYWJsZVByb2R1Y3QnO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\\n//# sourceURL=webpack-internal:///./node_modules/@magento/peregrine/lib/util/isProductConfigurable.js\\n\")}}]);","extractedComments":[]}