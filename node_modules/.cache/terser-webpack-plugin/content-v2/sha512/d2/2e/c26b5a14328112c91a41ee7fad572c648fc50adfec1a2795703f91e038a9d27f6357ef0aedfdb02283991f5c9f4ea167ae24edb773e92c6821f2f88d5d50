{"map":"{\"version\":3,\"sources\":[\"63.6a9ce1e2dfb7e1b71541.js\"],\"names\":[\"window\",\"push\",\"./node_modules/global/window.js\",\"module\",\"exports\",\"__webpack_require__\",\"eval\",\"./node_modules/jarallax/index.js\",\"./node_modules/jarallax/src/jarallax-element.esm.js\",\"__webpack_exports__\",\"./node_modules/jarallax/src/jarallax-video.esm.js\",\"./node_modules/jarallax/src/jarallax.esm.js\",\"./node_modules/lite-ready/liteready.js\",\"./node_modules/rafl/index.js\",\"./node_modules/rafl/node_modules/global/window.js\",\"./node_modules/video-worker/src/video-worker.esm.js\"],\"mappings\":\"CAACA,OAAqB,aAAIA,OAAqB,cAAK,IAAIC,KAAK,CAAC,CAAC,IAAI,CAE7DC;;;;8BAKA,SAAUC,OAAQC,QAASC,qBAEjCC,KAAK,svCAICC;;;;8BAKA,SAAUJ,OAAQC,QAASC,qBAEjCC,KAAK,grDAICE;;;;gCAKA,SAAUL,OAAQM,oBAAqBJ,qBAE7C,aACAC,KAAK,mkUAICI;;;;gCAKA,SAAUP,OAAQM,oBAAqBJ,qBAE7C,aACAC,KAAK,owrBAICK;;;;gCAKA,SAAUR,OAAQM,oBAAqBJ,qBAE7C,aACAC,KAAK,oknEAICM;;;;8BAKA,SAAUT,OAAQC,SAExBE,KAAK,u4DAICO;;;;8BAKA,SAAUV,OAAQC,QAASC,qBAEjCC,KAAK,i3EAICQ;;;;8BAKA,SAAUX,OAAQC,QAASC,qBAEjCC,KAAK,8zCAICS;;;;gCAKA,SAAUZ,OAAQM,oBAAqBJ,qBAE7C,aACAC,KAAK\"}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{\"./node_modules/global/window.js\":\n/*!***************************************!*\\\n  !*** ./node_modules/global/window.js ***!\n  \\***************************************/\n/*! no static exports found */function(module,exports,__webpack_require__){eval('/* WEBPACK VAR INJECTION */(function(global) {var win;\\n\\nif (typeof window !== \"undefined\") {\\n    win = window;\\n} else if (typeof global !== \"undefined\") {\\n    win = global;\\n} else if (typeof self !== \"undefined\"){\\n    win = self;\\n} else {\\n    win = {};\\n}\\n\\nmodule.exports = win;\\n\\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZ2xvYmFsL3dpbmRvdy5qcz9iZTA5Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQTs7QUFFQSIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy9nbG9iYWwvd2luZG93LmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHdpbjtcblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB3aW4gPSB3aW5kb3c7XG59IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB3aW4gPSBnbG9iYWw7XG59IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiKXtcbiAgICB3aW4gPSBzZWxmO1xufSBlbHNlIHtcbiAgICB3aW4gPSB7fTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB3aW47XG4iXSwic291cmNlUm9vdCI6IiJ9\\n//# sourceURL=webpack-internal:///./node_modules/global/window.js\\n')},\"./node_modules/jarallax/index.js\":\n/*!****************************************!*\\\n  !*** ./node_modules/jarallax/index.js ***!\n  \\****************************************/\n/*! no static exports found */function(module,exports,__webpack_require__){eval('const jarallax = __webpack_require__(/*! ./src/jarallax.esm */ \"./node_modules/jarallax/src/jarallax.esm.js\").default;\\nconst jarallaxVideo = __webpack_require__(/*! ./src/jarallax-video.esm */ \"./node_modules/jarallax/src/jarallax-video.esm.js\").default;\\nconst jarallaxElement = __webpack_require__(/*! ./src/jarallax-element.esm */ \"./node_modules/jarallax/src/jarallax-element.esm.js\").default;\\n\\nmodule.exports = {\\n    jarallax,\\n    jarallaxElement() {\\n        return jarallaxElement(jarallax);\\n    },\\n    jarallaxVideo() {\\n        return jarallaxVideo(jarallax);\\n    },\\n};\\n//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvamFyYWxsYXgvaW5kZXguanM/MjRlOCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxpQkFBaUIsbUJBQU8sQ0FBQyx1RUFBb0I7QUFDN0Msc0JBQXNCLG1CQUFPLENBQUMsbUZBQTBCO0FBQ3hELHdCQUF3QixtQkFBTyxDQUFDLHVGQUE0Qjs7QUFFNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy9qYXJhbGxheC9pbmRleC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGphcmFsbGF4ID0gcmVxdWlyZSgnLi9zcmMvamFyYWxsYXguZXNtJykuZGVmYXVsdDtcbmNvbnN0IGphcmFsbGF4VmlkZW8gPSByZXF1aXJlKCcuL3NyYy9qYXJhbGxheC12aWRlby5lc20nKS5kZWZhdWx0O1xuY29uc3QgamFyYWxsYXhFbGVtZW50ID0gcmVxdWlyZSgnLi9zcmMvamFyYWxsYXgtZWxlbWVudC5lc20nKS5kZWZhdWx0O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBqYXJhbGxheCxcbiAgICBqYXJhbGxheEVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiBqYXJhbGxheEVsZW1lbnQoamFyYWxsYXgpO1xuICAgIH0sXG4gICAgamFyYWxsYXhWaWRlbygpIHtcbiAgICAgICAgcmV0dXJuIGphcmFsbGF4VmlkZW8oamFyYWxsYXgpO1xuICAgIH0sXG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\\n//# sourceURL=webpack-internal:///./node_modules/jarallax/index.js\\n')},\"./node_modules/jarallax/src/jarallax-element.esm.js\":\n/*!***********************************************************!*\\\n  !*** ./node_modules/jarallax/src/jarallax-element.esm.js ***!\n  \\***********************************************************/\n/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\"default\\\", function() { return jarallaxElement; });\\n/* harmony import */ var global__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! global */ \\\"./node_modules/global/window.js\\\");\\n/* harmony import */ var global__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(global__WEBPACK_IMPORTED_MODULE_0__);\\n/* eslint no-case-declarations: \\\"off\\\" */\\n\\n\\nfunction jarallaxElement(jarallax = global__WEBPACK_IMPORTED_MODULE_0___default.a.jarallax) {\\n    if (typeof jarallax === 'undefined') {\\n        return;\\n    }\\n\\n    const Jarallax = jarallax.constructor;\\n\\n    // redefine default methods\\n    [\\n        'initImg',\\n        'canInitParallax',\\n        'init',\\n        'destroy',\\n        'clipContainer',\\n        'coverImage',\\n        'isVisible',\\n        'onScroll',\\n        'onResize',\\n    ].forEach((key) => {\\n        const def = Jarallax.prototype[key];\\n        Jarallax.prototype[key] = function () {\\n            const self = this;\\n            const args = arguments || [];\\n\\n            if (key === 'initImg' && self.$item.getAttribute('data-jarallax-element') !== null) {\\n                self.options.type = 'element';\\n                self.pureOptions.speed = self.$item.getAttribute('data-jarallax-element') || self.pureOptions.speed;\\n            }\\n            if (self.options.type !== 'element') {\\n                return def.apply(self, args);\\n            }\\n\\n            self.pureOptions.threshold = self.$item.getAttribute('data-threshold') || '';\\n\\n            switch (key) {\\n            case 'init':\\n                const speedArr = self.pureOptions.speed.split(' ');\\n                self.options.speed = self.pureOptions.speed || 0;\\n                self.options.speedY = speedArr[0] ? parseFloat(speedArr[0]) : 0;\\n                self.options.speedX = speedArr[1] ? parseFloat(speedArr[1]) : 0;\\n\\n                const thresholdArr = self.pureOptions.threshold.split(' ');\\n                self.options.thresholdY = thresholdArr[0] ? parseFloat(thresholdArr[0]) : null;\\n                self.options.thresholdX = thresholdArr[1] ? parseFloat(thresholdArr[1]) : null;\\n\\n                def.apply(self, args);\\n\\n                // restore background image if available.\\n                const originalStylesTag = self.$item.getAttribute('data-jarallax-original-styles');\\n                if (originalStylesTag) {\\n                    self.$item.setAttribute('style', originalStylesTag);\\n                }\\n\\n                return true;\\n            case 'onResize':\\n                const defTransform = self.css(self.$item, 'transform');\\n                self.css(self.$item, { transform: '' });\\n                const rect = self.$item.getBoundingClientRect();\\n                self.itemData = {\\n                    width: rect.width,\\n                    height: rect.height,\\n                    y: rect.top + self.getWindowData().y,\\n                    x: rect.left,\\n                };\\n                self.css(self.$item, { transform: defTransform });\\n                break;\\n            case 'onScroll':\\n                const wnd = self.getWindowData();\\n                const centerPercent = (wnd.y + wnd.height / 2 - self.itemData.y - self.itemData.height / 2) / (wnd.height / 2);\\n                const moveY = centerPercent * self.options.speedY;\\n                const moveX = centerPercent * self.options.speedX;\\n                let my = moveY;\\n                let mx = moveX;\\n                if (self.options.thresholdY !== null && moveY > self.options.thresholdY) my = 0;\\n                if (self.options.thresholdX !== null && moveX > self.options.thresholdX) mx = 0;\\n                self.css(self.$item, { transform: `translate3d(${mx}px,${my}px,0)` });\\n                break;\\n            case 'initImg':\\n            case 'isVisible':\\n            case 'clipContainer':\\n            case 'coverImage':\\n                return true;\\n            // no default\\n            }\\n            return def.apply(self, args);\\n        };\\n    });\\n}\\n//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvamFyYWxsYXgvc3JjL2phcmFsbGF4LWVsZW1lbnQuZXNtLmpzPzYwY2EiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUM0Qjs7QUFFYixvQ0FBb0MsNkNBQU07QUFDekQ7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsZ0JBQWdCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLDBCQUEwQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQywyQkFBMkIsR0FBRyxLQUFLLEdBQUcsUUFBUTtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy9qYXJhbGxheC9zcmMvamFyYWxsYXgtZWxlbWVudC5lc20uanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQgbm8tY2FzZS1kZWNsYXJhdGlvbnM6IFwib2ZmXCIgKi9cbmltcG9ydCBnbG9iYWwgZnJvbSAnZ2xvYmFsJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gamFyYWxsYXhFbGVtZW50KGphcmFsbGF4ID0gZ2xvYmFsLmphcmFsbGF4KSB7XG4gICAgaWYgKHR5cGVvZiBqYXJhbGxheCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IEphcmFsbGF4ID0gamFyYWxsYXguY29uc3RydWN0b3I7XG5cbiAgICAvLyByZWRlZmluZSBkZWZhdWx0IG1ldGhvZHNcbiAgICBbXG4gICAgICAgICdpbml0SW1nJyxcbiAgICAgICAgJ2NhbkluaXRQYXJhbGxheCcsXG4gICAgICAgICdpbml0JyxcbiAgICAgICAgJ2Rlc3Ryb3knLFxuICAgICAgICAnY2xpcENvbnRhaW5lcicsXG4gICAgICAgICdjb3ZlckltYWdlJyxcbiAgICAgICAgJ2lzVmlzaWJsZScsXG4gICAgICAgICdvblNjcm9sbCcsXG4gICAgICAgICdvblJlc2l6ZScsXG4gICAgXS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgY29uc3QgZGVmID0gSmFyYWxsYXgucHJvdG90eXBlW2tleV07XG4gICAgICAgIEphcmFsbGF4LnByb3RvdHlwZVtrZXldID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICBjb25zdCBhcmdzID0gYXJndW1lbnRzIHx8IFtdO1xuXG4gICAgICAgICAgICBpZiAoa2V5ID09PSAnaW5pdEltZycgJiYgc2VsZi4kaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtamFyYWxsYXgtZWxlbWVudCcpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5vcHRpb25zLnR5cGUgPSAnZWxlbWVudCc7XG4gICAgICAgICAgICAgICAgc2VsZi5wdXJlT3B0aW9ucy5zcGVlZCA9IHNlbGYuJGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLWphcmFsbGF4LWVsZW1lbnQnKSB8fCBzZWxmLnB1cmVPcHRpb25zLnNwZWVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGYub3B0aW9ucy50eXBlICE9PSAnZWxlbWVudCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLnB1cmVPcHRpb25zLnRocmVzaG9sZCA9IHNlbGYuJGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXRocmVzaG9sZCcpIHx8ICcnO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgICAgY2FzZSAnaW5pdCc6XG4gICAgICAgICAgICAgICAgY29uc3Qgc3BlZWRBcnIgPSBzZWxmLnB1cmVPcHRpb25zLnNwZWVkLnNwbGl0KCcgJyk7XG4gICAgICAgICAgICAgICAgc2VsZi5vcHRpb25zLnNwZWVkID0gc2VsZi5wdXJlT3B0aW9ucy5zcGVlZCB8fCAwO1xuICAgICAgICAgICAgICAgIHNlbGYub3B0aW9ucy5zcGVlZFkgPSBzcGVlZEFyclswXSA/IHBhcnNlRmxvYXQoc3BlZWRBcnJbMF0pIDogMDtcbiAgICAgICAgICAgICAgICBzZWxmLm9wdGlvbnMuc3BlZWRYID0gc3BlZWRBcnJbMV0gPyBwYXJzZUZsb2F0KHNwZWVkQXJyWzFdKSA6IDA7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB0aHJlc2hvbGRBcnIgPSBzZWxmLnB1cmVPcHRpb25zLnRocmVzaG9sZC5zcGxpdCgnICcpO1xuICAgICAgICAgICAgICAgIHNlbGYub3B0aW9ucy50aHJlc2hvbGRZID0gdGhyZXNob2xkQXJyWzBdID8gcGFyc2VGbG9hdCh0aHJlc2hvbGRBcnJbMF0pIDogbnVsbDtcbiAgICAgICAgICAgICAgICBzZWxmLm9wdGlvbnMudGhyZXNob2xkWCA9IHRocmVzaG9sZEFyclsxXSA/IHBhcnNlRmxvYXQodGhyZXNob2xkQXJyWzFdKSA6IG51bGw7XG5cbiAgICAgICAgICAgICAgICBkZWYuYXBwbHkoc2VsZiwgYXJncyk7XG5cbiAgICAgICAgICAgICAgICAvLyByZXN0b3JlIGJhY2tncm91bmQgaW1hZ2UgaWYgYXZhaWxhYmxlLlxuICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsU3R5bGVzVGFnID0gc2VsZi4kaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtamFyYWxsYXgtb3JpZ2luYWwtc3R5bGVzJyk7XG4gICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsU3R5bGVzVGFnKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuJGl0ZW0uc2V0QXR0cmlidXRlKCdzdHlsZScsIG9yaWdpbmFsU3R5bGVzVGFnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGNhc2UgJ29uUmVzaXplJzpcbiAgICAgICAgICAgICAgICBjb25zdCBkZWZUcmFuc2Zvcm0gPSBzZWxmLmNzcyhzZWxmLiRpdGVtLCAndHJhbnNmb3JtJyk7XG4gICAgICAgICAgICAgICAgc2VsZi5jc3Moc2VsZi4kaXRlbSwgeyB0cmFuc2Zvcm06ICcnIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBzZWxmLiRpdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIHNlbGYuaXRlbURhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiByZWN0LndpZHRoLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHJlY3QuaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICB5OiByZWN0LnRvcCArIHNlbGYuZ2V0V2luZG93RGF0YSgpLnksXG4gICAgICAgICAgICAgICAgICAgIHg6IHJlY3QubGVmdCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHNlbGYuY3NzKHNlbGYuJGl0ZW0sIHsgdHJhbnNmb3JtOiBkZWZUcmFuc2Zvcm0gfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdvblNjcm9sbCc6XG4gICAgICAgICAgICAgICAgY29uc3Qgd25kID0gc2VsZi5nZXRXaW5kb3dEYXRhKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2VudGVyUGVyY2VudCA9ICh3bmQueSArIHduZC5oZWlnaHQgLyAyIC0gc2VsZi5pdGVtRGF0YS55IC0gc2VsZi5pdGVtRGF0YS5oZWlnaHQgLyAyKSAvICh3bmQuaGVpZ2h0IC8gMik7XG4gICAgICAgICAgICAgICAgY29uc3QgbW92ZVkgPSBjZW50ZXJQZXJjZW50ICogc2VsZi5vcHRpb25zLnNwZWVkWTtcbiAgICAgICAgICAgICAgICBjb25zdCBtb3ZlWCA9IGNlbnRlclBlcmNlbnQgKiBzZWxmLm9wdGlvbnMuc3BlZWRYO1xuICAgICAgICAgICAgICAgIGxldCBteSA9IG1vdmVZO1xuICAgICAgICAgICAgICAgIGxldCBteCA9IG1vdmVYO1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLm9wdGlvbnMudGhyZXNob2xkWSAhPT0gbnVsbCAmJiBtb3ZlWSA+IHNlbGYub3B0aW9ucy50aHJlc2hvbGRZKSBteSA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYub3B0aW9ucy50aHJlc2hvbGRYICE9PSBudWxsICYmIG1vdmVYID4gc2VsZi5vcHRpb25zLnRocmVzaG9sZFgpIG14ID0gMDtcbiAgICAgICAgICAgICAgICBzZWxmLmNzcyhzZWxmLiRpdGVtLCB7IHRyYW5zZm9ybTogYHRyYW5zbGF0ZTNkKCR7bXh9cHgsJHtteX1weCwwKWAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdpbml0SW1nJzpcbiAgICAgICAgICAgIGNhc2UgJ2lzVmlzaWJsZSc6XG4gICAgICAgICAgICBjYXNlICdjbGlwQ29udGFpbmVyJzpcbiAgICAgICAgICAgIGNhc2UgJ2NvdmVySW1hZ2UnOlxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgLy8gbm8gZGVmYXVsdFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRlZi5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICB9KTtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\\n//# sourceURL=webpack-internal:///./node_modules/jarallax/src/jarallax-element.esm.js\\n\")},\"./node_modules/jarallax/src/jarallax-video.esm.js\":\n/*!*********************************************************!*\\\n  !*** ./node_modules/jarallax/src/jarallax-video.esm.js ***!\n  \\*********************************************************/\n/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\"default\\\", function() { return jarallaxVideo; });\\n/* harmony import */ var video_worker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! video-worker */ \\\"./node_modules/video-worker/src/video-worker.esm.js\\\");\\n/* harmony import */ var global__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! global */ \\\"./node_modules/global/window.js\\\");\\n/* harmony import */ var global__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(global__WEBPACK_IMPORTED_MODULE_1__);\\n\\n\\n\\nfunction jarallaxVideo(jarallax = global__WEBPACK_IMPORTED_MODULE_1___default.a.jarallax) {\\n    if (typeof jarallax === 'undefined') {\\n        return;\\n    }\\n\\n    const Jarallax = jarallax.constructor;\\n\\n    // append video after when block will be visible.\\n    const defOnScroll = Jarallax.prototype.onScroll;\\n    Jarallax.prototype.onScroll = function () {\\n        const self = this;\\n\\n        defOnScroll.apply(self);\\n\\n        const isReady = !self.isVideoInserted\\n                        && self.video\\n                        && (!self.options.videoLazyLoading || self.isElementInViewport)\\n                        && !self.options.disableVideo();\\n\\n        if (isReady) {\\n            self.isVideoInserted = true;\\n\\n            self.video.getVideo((video) => {\\n                const $parent = video.parentNode;\\n                self.css(video, {\\n                    position: self.image.position,\\n                    top: '0px',\\n                    left: '0px',\\n                    right: '0px',\\n                    bottom: '0px',\\n                    width: '100%',\\n                    height: '100%',\\n                    maxWidth: 'none',\\n                    maxHeight: 'none',\\n                    margin: 0,\\n                    zIndex: -1,\\n                });\\n                self.$video = video;\\n                self.image.$container.appendChild(video);\\n\\n                // remove parent video element (created by VideoWorker)\\n                $parent.parentNode.removeChild($parent);\\n            });\\n        }\\n    };\\n\\n    // cover video\\n    const defCoverImage = Jarallax.prototype.coverImage;\\n    Jarallax.prototype.coverImage = function () {\\n        const self = this;\\n        const imageData = defCoverImage.apply(self);\\n        const node = self.image.$item ? self.image.$item.nodeName : false;\\n\\n        if (imageData && self.video && node && (node === 'IFRAME' || node === 'VIDEO')) {\\n            let h = imageData.image.height;\\n            let w = h * self.image.width / self.image.height;\\n            let ml = (imageData.container.width - w) / 2;\\n            let mt = imageData.image.marginTop;\\n\\n            if (imageData.container.width > w) {\\n                w = imageData.container.width;\\n                h = w * self.image.height / self.image.width;\\n                ml = 0;\\n                mt += (imageData.image.height - h) / 2;\\n            }\\n\\n            // add video height over than need to hide controls\\n            if (node === 'IFRAME') {\\n                h += 400;\\n                mt -= 200;\\n            }\\n\\n            self.css(self.$video, {\\n                width: `${w}px`,\\n                marginLeft: `${ml}px`,\\n                height: `${h}px`,\\n                marginTop: `${mt}px`,\\n            });\\n        }\\n\\n        return imageData;\\n    };\\n\\n    // init video\\n    const defInitImg = Jarallax.prototype.initImg;\\n    Jarallax.prototype.initImg = function () {\\n        const self = this;\\n        const defaultResult = defInitImg.apply(self);\\n\\n        if (!self.options.videoSrc) {\\n            self.options.videoSrc = self.$item.getAttribute('data-jarallax-video') || null;\\n        }\\n\\n        if (self.options.videoSrc) {\\n            self.defaultInitImgResult = defaultResult;\\n            return true;\\n        }\\n\\n        return defaultResult;\\n    };\\n\\n    const defCanInitParallax = Jarallax.prototype.canInitParallax;\\n    Jarallax.prototype.canInitParallax = function () {\\n        const self = this;\\n        const defaultResult = defCanInitParallax.apply(self);\\n\\n        if (!self.options.videoSrc) {\\n            return defaultResult;\\n        }\\n\\n        const video = new video_worker__WEBPACK_IMPORTED_MODULE_0__[\\\"default\\\"](self.options.videoSrc, {\\n            autoplay: true,\\n            loop: self.options.videoLoop,\\n            showContols: false,\\n            startTime: self.options.videoStartTime || 0,\\n            endTime: self.options.videoEndTime || 0,\\n            mute: self.options.videoVolume ? 0 : 1,\\n            volume: self.options.videoVolume || 0,\\n        });\\n\\n        if (video.isValid()) {\\n            // if parallax will not be inited, we can add thumbnail on background.\\n            if (!defaultResult) {\\n                if (!self.defaultInitImgResult) {\\n                    video.getImageURL((url) => {\\n                        // save default user styles\\n                        const curStyle = self.$item.getAttribute('style');\\n                        if (curStyle) {\\n                            self.$item.setAttribute('data-jarallax-original-styles', curStyle);\\n                        }\\n\\n                        // set new background\\n                        self.css(self.$item, {\\n                            'background-image': `url(\\\"${url}\\\")`,\\n                            'background-position': 'center',\\n                            'background-size': 'cover',\\n                        });\\n                    });\\n                }\\n\\n                // init video\\n            } else {\\n                video.on('ready', () => {\\n                    if (self.options.videoPlayOnlyVisible) {\\n                        const oldOnScroll = self.onScroll;\\n                        self.onScroll = function () {\\n                            oldOnScroll.apply(self);\\n                            if (self.options.videoLoop || (!self.options.videoLoop && !self.videoEnded)) {\\n                                if (self.isVisible()) {\\n                                    video.play();\\n                                } else {\\n                                    video.pause();\\n                                }\\n                            }\\n                        };\\n                    } else {\\n                        video.play();\\n                    }\\n                });\\n                video.on('started', () => {\\n                    self.image.$default_item = self.image.$item;\\n                    self.image.$item = self.$video;\\n\\n                    // set video width and height\\n                    self.image.width = self.video.videoWidth || 1280;\\n                    self.image.height = self.video.videoHeight || 720;\\n                    self.coverImage();\\n                    self.clipContainer();\\n                    self.onScroll();\\n\\n                    // hide image\\n                    if (self.image.$default_item) {\\n                        self.image.$default_item.style.display = 'none';\\n                    }\\n                });\\n\\n                video.on('ended', () => {\\n                    self.videoEnded = true;\\n\\n                    if (!self.options.videoLoop) {\\n                        // show image if Loop disabled\\n                        if (self.image.$default_item) {\\n                            self.image.$item = self.image.$default_item;\\n                            self.image.$item.style.display = 'block';\\n\\n                            // set image width and height\\n                            self.coverImage();\\n                            self.clipContainer();\\n                            self.onScroll();\\n                        }\\n                    }\\n                });\\n\\n                self.video = video;\\n\\n                // set image if not exists\\n                if (!self.defaultInitImgResult) {\\n                    // set empty image on local video if not defined\\n                    self.image.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\\n\\n                    if (video.type !== 'local') {\\n                        video.getImageURL((url) => {\\n                            self.image.bgImage = `url(\\\"${url}\\\")`;\\n                            self.init();\\n                        });\\n\\n                        return false;\\n                    }\\n\\n                    return true;\\n                }\\n            }\\n        }\\n\\n        return defaultResult;\\n    };\\n\\n    // Destroy video parallax\\n    const defDestroy = Jarallax.prototype.destroy;\\n    Jarallax.prototype.destroy = function () {\\n        const self = this;\\n\\n        if (self.image.$default_item) {\\n            self.image.$item = self.image.$default_item;\\n            delete self.image.$default_item;\\n        }\\n\\n        defDestroy.apply(self);\\n    };\\n}\\n//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvamFyYWxsYXgvc3JjL2phcmFsbGF4LXZpZGVvLmVzbS5qcz83N2I2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBdUM7QUFDWDs7QUFFYixrQ0FBa0MsNkNBQU07QUFDdkQ7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDBCQUEwQixFQUFFO0FBQzVCLCtCQUErQixHQUFHO0FBQ2xDLDJCQUEyQixFQUFFO0FBQzdCLDhCQUE4QixHQUFHO0FBQ2pDLGFBQWE7QUFDYjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLDBCQUEwQixvREFBVztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHdEQUF3RCxJQUFJO0FBQzVEO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCOztBQUVBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQ7O0FBRXJEO0FBQ0E7QUFDQSx5REFBeUQsSUFBSTtBQUM3RDtBQUNBLHlCQUF5Qjs7QUFFekI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy9qYXJhbGxheC9zcmMvamFyYWxsYXgtdmlkZW8uZXNtLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFZpZGVvV29ya2VyIGZyb20gJ3ZpZGVvLXdvcmtlcic7XG5pbXBvcnQgZ2xvYmFsIGZyb20gJ2dsb2JhbCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGphcmFsbGF4VmlkZW8oamFyYWxsYXggPSBnbG9iYWwuamFyYWxsYXgpIHtcbiAgICBpZiAodHlwZW9mIGphcmFsbGF4ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgSmFyYWxsYXggPSBqYXJhbGxheC5jb25zdHJ1Y3RvcjtcblxuICAgIC8vIGFwcGVuZCB2aWRlbyBhZnRlciB3aGVuIGJsb2NrIHdpbGwgYmUgdmlzaWJsZS5cbiAgICBjb25zdCBkZWZPblNjcm9sbCA9IEphcmFsbGF4LnByb3RvdHlwZS5vblNjcm9sbDtcbiAgICBKYXJhbGxheC5wcm90b3R5cGUub25TY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIGRlZk9uU2Nyb2xsLmFwcGx5KHNlbGYpO1xuXG4gICAgICAgIGNvbnN0IGlzUmVhZHkgPSAhc2VsZi5pc1ZpZGVvSW5zZXJ0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHNlbGYudmlkZW9cbiAgICAgICAgICAgICAgICAgICAgICAgICYmICghc2VsZi5vcHRpb25zLnZpZGVvTGF6eUxvYWRpbmcgfHwgc2VsZi5pc0VsZW1lbnRJblZpZXdwb3J0KVxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgIXNlbGYub3B0aW9ucy5kaXNhYmxlVmlkZW8oKTtcblxuICAgICAgICBpZiAoaXNSZWFkeSkge1xuICAgICAgICAgICAgc2VsZi5pc1ZpZGVvSW5zZXJ0ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICBzZWxmLnZpZGVvLmdldFZpZGVvKCh2aWRlbykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0ICRwYXJlbnQgPSB2aWRlby5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgIHNlbGYuY3NzKHZpZGVvLCB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBzZWxmLmltYWdlLnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgICB0b3A6ICcwcHgnLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiAnMHB4JyxcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6ICcwcHgnLFxuICAgICAgICAgICAgICAgICAgICBib3R0b206ICcwcHgnLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg6ICdub25lJyxcbiAgICAgICAgICAgICAgICAgICAgbWF4SGVpZ2h0OiAnbm9uZScsXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMCxcbiAgICAgICAgICAgICAgICAgICAgekluZGV4OiAtMSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzZWxmLiR2aWRlbyA9IHZpZGVvO1xuICAgICAgICAgICAgICAgIHNlbGYuaW1hZ2UuJGNvbnRhaW5lci5hcHBlbmRDaGlsZCh2aWRlbyk7XG5cbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgcGFyZW50IHZpZGVvIGVsZW1lbnQgKGNyZWF0ZWQgYnkgVmlkZW9Xb3JrZXIpXG4gICAgICAgICAgICAgICAgJHBhcmVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCRwYXJlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gY292ZXIgdmlkZW9cbiAgICBjb25zdCBkZWZDb3ZlckltYWdlID0gSmFyYWxsYXgucHJvdG90eXBlLmNvdmVySW1hZ2U7XG4gICAgSmFyYWxsYXgucHJvdG90eXBlLmNvdmVySW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICBjb25zdCBpbWFnZURhdGEgPSBkZWZDb3ZlckltYWdlLmFwcGx5KHNlbGYpO1xuICAgICAgICBjb25zdCBub2RlID0gc2VsZi5pbWFnZS4kaXRlbSA/IHNlbGYuaW1hZ2UuJGl0ZW0ubm9kZU5hbWUgOiBmYWxzZTtcblxuICAgICAgICBpZiAoaW1hZ2VEYXRhICYmIHNlbGYudmlkZW8gJiYgbm9kZSAmJiAobm9kZSA9PT0gJ0lGUkFNRScgfHwgbm9kZSA9PT0gJ1ZJREVPJykpIHtcbiAgICAgICAgICAgIGxldCBoID0gaW1hZ2VEYXRhLmltYWdlLmhlaWdodDtcbiAgICAgICAgICAgIGxldCB3ID0gaCAqIHNlbGYuaW1hZ2Uud2lkdGggLyBzZWxmLmltYWdlLmhlaWdodDtcbiAgICAgICAgICAgIGxldCBtbCA9IChpbWFnZURhdGEuY29udGFpbmVyLndpZHRoIC0gdykgLyAyO1xuICAgICAgICAgICAgbGV0IG10ID0gaW1hZ2VEYXRhLmltYWdlLm1hcmdpblRvcDtcblxuICAgICAgICAgICAgaWYgKGltYWdlRGF0YS5jb250YWluZXIud2lkdGggPiB3KSB7XG4gICAgICAgICAgICAgICAgdyA9IGltYWdlRGF0YS5jb250YWluZXIud2lkdGg7XG4gICAgICAgICAgICAgICAgaCA9IHcgKiBzZWxmLmltYWdlLmhlaWdodCAvIHNlbGYuaW1hZ2Uud2lkdGg7XG4gICAgICAgICAgICAgICAgbWwgPSAwO1xuICAgICAgICAgICAgICAgIG10ICs9IChpbWFnZURhdGEuaW1hZ2UuaGVpZ2h0IC0gaCkgLyAyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBhZGQgdmlkZW8gaGVpZ2h0IG92ZXIgdGhhbiBuZWVkIHRvIGhpZGUgY29udHJvbHNcbiAgICAgICAgICAgIGlmIChub2RlID09PSAnSUZSQU1FJykge1xuICAgICAgICAgICAgICAgIGggKz0gNDAwO1xuICAgICAgICAgICAgICAgIG10IC09IDIwMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5jc3Moc2VsZi4kdmlkZW8sIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogYCR7d31weGAsXG4gICAgICAgICAgICAgICAgbWFyZ2luTGVmdDogYCR7bWx9cHhgLFxuICAgICAgICAgICAgICAgIGhlaWdodDogYCR7aH1weGAsXG4gICAgICAgICAgICAgICAgbWFyZ2luVG9wOiBgJHttdH1weGAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpbWFnZURhdGE7XG4gICAgfTtcblxuICAgIC8vIGluaXQgdmlkZW9cbiAgICBjb25zdCBkZWZJbml0SW1nID0gSmFyYWxsYXgucHJvdG90eXBlLmluaXRJbWc7XG4gICAgSmFyYWxsYXgucHJvdG90eXBlLmluaXRJbWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICBjb25zdCBkZWZhdWx0UmVzdWx0ID0gZGVmSW5pdEltZy5hcHBseShzZWxmKTtcblxuICAgICAgICBpZiAoIXNlbGYub3B0aW9ucy52aWRlb1NyYykge1xuICAgICAgICAgICAgc2VsZi5vcHRpb25zLnZpZGVvU3JjID0gc2VsZi4kaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtamFyYWxsYXgtdmlkZW8nKSB8fCBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYub3B0aW9ucy52aWRlb1NyYykge1xuICAgICAgICAgICAgc2VsZi5kZWZhdWx0SW5pdEltZ1Jlc3VsdCA9IGRlZmF1bHRSZXN1bHQ7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkZWZhdWx0UmVzdWx0O1xuICAgIH07XG5cbiAgICBjb25zdCBkZWZDYW5Jbml0UGFyYWxsYXggPSBKYXJhbGxheC5wcm90b3R5cGUuY2FuSW5pdFBhcmFsbGF4O1xuICAgIEphcmFsbGF4LnByb3RvdHlwZS5jYW5Jbml0UGFyYWxsYXggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICBjb25zdCBkZWZhdWx0UmVzdWx0ID0gZGVmQ2FuSW5pdFBhcmFsbGF4LmFwcGx5KHNlbGYpO1xuXG4gICAgICAgIGlmICghc2VsZi5vcHRpb25zLnZpZGVvU3JjKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdFJlc3VsdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHZpZGVvID0gbmV3IFZpZGVvV29ya2VyKHNlbGYub3B0aW9ucy52aWRlb1NyYywge1xuICAgICAgICAgICAgYXV0b3BsYXk6IHRydWUsXG4gICAgICAgICAgICBsb29wOiBzZWxmLm9wdGlvbnMudmlkZW9Mb29wLFxuICAgICAgICAgICAgc2hvd0NvbnRvbHM6IGZhbHNlLFxuICAgICAgICAgICAgc3RhcnRUaW1lOiBzZWxmLm9wdGlvbnMudmlkZW9TdGFydFRpbWUgfHwgMCxcbiAgICAgICAgICAgIGVuZFRpbWU6IHNlbGYub3B0aW9ucy52aWRlb0VuZFRpbWUgfHwgMCxcbiAgICAgICAgICAgIG11dGU6IHNlbGYub3B0aW9ucy52aWRlb1ZvbHVtZSA/IDAgOiAxLFxuICAgICAgICAgICAgdm9sdW1lOiBzZWxmLm9wdGlvbnMudmlkZW9Wb2x1bWUgfHwgMCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHZpZGVvLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgLy8gaWYgcGFyYWxsYXggd2lsbCBub3QgYmUgaW5pdGVkLCB3ZSBjYW4gYWRkIHRodW1ibmFpbCBvbiBiYWNrZ3JvdW5kLlxuICAgICAgICAgICAgaWYgKCFkZWZhdWx0UmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzZWxmLmRlZmF1bHRJbml0SW1nUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZGVvLmdldEltYWdlVVJMKCh1cmwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNhdmUgZGVmYXVsdCB1c2VyIHN0eWxlc1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VyU3R5bGUgPSBzZWxmLiRpdGVtLmdldEF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJTdHlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuJGl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLWphcmFsbGF4LW9yaWdpbmFsLXN0eWxlcycsIGN1clN0eWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG5ldyBiYWNrZ3JvdW5kXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNzcyhzZWxmLiRpdGVtLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtaW1hZ2UnOiBgdXJsKFwiJHt1cmx9XCIpYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1wb3NpdGlvbic6ICdjZW50ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLXNpemUnOiAnY292ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGluaXQgdmlkZW9cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmlkZW8ub24oJ3JlYWR5JywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5vcHRpb25zLnZpZGVvUGxheU9ubHlWaXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvbGRPblNjcm9sbCA9IHNlbGYub25TY3JvbGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9uU2Nyb2xsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZE9uU2Nyb2xsLmFwcGx5KHNlbGYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLm9wdGlvbnMudmlkZW9Mb29wIHx8ICghc2VsZi5vcHRpb25zLnZpZGVvTG9vcCAmJiAhc2VsZi52aWRlb0VuZGVkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5pc1Zpc2libGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW8ucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW8ucGF1c2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWRlby5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2aWRlby5vbignc3RhcnRlZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWFnZS4kZGVmYXVsdF9pdGVtID0gc2VsZi5pbWFnZS4kaXRlbTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWFnZS4kaXRlbSA9IHNlbGYuJHZpZGVvO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHNldCB2aWRlbyB3aWR0aCBhbmQgaGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaW1hZ2Uud2lkdGggPSBzZWxmLnZpZGVvLnZpZGVvV2lkdGggfHwgMTI4MDtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWFnZS5oZWlnaHQgPSBzZWxmLnZpZGVvLnZpZGVvSGVpZ2h0IHx8IDcyMDtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb3ZlckltYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2xpcENvbnRhaW5lcigpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLm9uU2Nyb2xsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gaGlkZSBpbWFnZVxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5pbWFnZS4kZGVmYXVsdF9pdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmltYWdlLiRkZWZhdWx0X2l0ZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdmlkZW8ub24oJ2VuZGVkJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnZpZGVvRW5kZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VsZi5vcHRpb25zLnZpZGVvTG9vcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2hvdyBpbWFnZSBpZiBMb29wIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5pbWFnZS4kZGVmYXVsdF9pdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWFnZS4kaXRlbSA9IHNlbGYuaW1hZ2UuJGRlZmF1bHRfaXRlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmltYWdlLiRpdGVtLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGltYWdlIHdpZHRoIGFuZCBoZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvdmVySW1hZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNsaXBDb250YWluZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9uU2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHNlbGYudmlkZW8gPSB2aWRlbztcblxuICAgICAgICAgICAgICAgIC8vIHNldCBpbWFnZSBpZiBub3QgZXhpc3RzXG4gICAgICAgICAgICAgICAgaWYgKCFzZWxmLmRlZmF1bHRJbml0SW1nUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNldCBlbXB0eSBpbWFnZSBvbiBsb2NhbCB2aWRlbyBpZiBub3QgZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICBzZWxmLmltYWdlLnNyYyA9ICdkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQUFBQUFBUC8vL3lINUJBRUFBQUFBTEFBQUFBQUJBQUVBQUFJQlJBQTcnO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh2aWRlby50eXBlICE9PSAnbG9jYWwnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWRlby5nZXRJbWFnZVVSTCgodXJsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWFnZS5iZ0ltYWdlID0gYHVybChcIiR7dXJsfVwiKWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pbml0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRlZmF1bHRSZXN1bHQ7XG4gICAgfTtcblxuICAgIC8vIERlc3Ryb3kgdmlkZW8gcGFyYWxsYXhcbiAgICBjb25zdCBkZWZEZXN0cm95ID0gSmFyYWxsYXgucHJvdG90eXBlLmRlc3Ryb3k7XG4gICAgSmFyYWxsYXgucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIGlmIChzZWxmLmltYWdlLiRkZWZhdWx0X2l0ZW0pIHtcbiAgICAgICAgICAgIHNlbGYuaW1hZ2UuJGl0ZW0gPSBzZWxmLmltYWdlLiRkZWZhdWx0X2l0ZW07XG4gICAgICAgICAgICBkZWxldGUgc2VsZi5pbWFnZS4kZGVmYXVsdF9pdGVtO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVmRGVzdHJveS5hcHBseShzZWxmKTtcbiAgICB9O1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\\n//# sourceURL=webpack-internal:///./node_modules/jarallax/src/jarallax-video.esm.js\\n\")},\"./node_modules/jarallax/src/jarallax.esm.js\":\n/*!***************************************************!*\\\n  !*** ./node_modules/jarallax/src/jarallax.esm.js ***!\n  \\***************************************************/\n/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval(\"__webpack_require__.r(__webpack_exports__);\\n/* WEBPACK VAR INJECTION */(function(global) {/* harmony import */ var lite_ready__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lite-ready */ \\\"./node_modules/lite-ready/liteready.js\\\");\\n/* harmony import */ var lite_ready__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lite_ready__WEBPACK_IMPORTED_MODULE_0__);\\n/* harmony import */ var rafl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rafl */ \\\"./node_modules/rafl/index.js\\\");\\n/* harmony import */ var rafl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(rafl__WEBPACK_IMPORTED_MODULE_1__);\\n/* harmony import */ var global__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! global */ \\\"./node_modules/global/window.js\\\");\\n/* harmony import */ var global__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(global__WEBPACK_IMPORTED_MODULE_2__);\\n\\n\\n\\n\\nconst isIE = navigator.userAgent.indexOf('MSIE ') > -1 || navigator.userAgent.indexOf('Trident/') > -1 || navigator.userAgent.indexOf('Edge/') > -1;\\nconst isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\\n\\nconst supportTransform = (() => {\\n    const prefixes = 'transform WebkitTransform MozTransform'.split(' ');\\n    const div = document.createElement('div');\\n    for (let i = 0; i < prefixes.length; i++) {\\n        if (div && div.style[prefixes[i]] !== undefined) {\\n            return prefixes[i];\\n        }\\n    }\\n    return false;\\n})();\\n\\nlet $deviceHelper;\\n\\n/**\\n * The most popular mobile browsers changes height after page scroll and this generates image jumping.\\n * We can fix it using this workaround with vh units.\\n */\\nfunction getDeviceHeight() {\\n    if (!$deviceHelper && document.body) {\\n        $deviceHelper = document.createElement('div');\\n        $deviceHelper.style.cssText = 'position: fixed; top: -9999px; left: 0; height: 100vh; width: 0;';\\n        document.body.appendChild($deviceHelper);\\n    }\\n\\n    return ($deviceHelper ? $deviceHelper.clientHeight : 0) || global__WEBPACK_IMPORTED_MODULE_2__[\\\"window\\\"].innerHeight || document.documentElement.clientHeight;\\n}\\n\\n// Window data\\nlet wndW;\\nlet wndH;\\nlet wndY;\\nlet forceResizeParallax = false;\\nlet forceScrollParallax = false;\\nfunction updateWndVars(e) {\\n    wndW = global__WEBPACK_IMPORTED_MODULE_2__[\\\"window\\\"].innerWidth || document.documentElement.clientWidth;\\n\\n    if (isMobile) {\\n        wndH = getDeviceHeight();\\n    } else {\\n        wndH = global__WEBPACK_IMPORTED_MODULE_2__[\\\"window\\\"].innerHeight || document.documentElement.clientHeight;\\n    }\\n\\n    if (typeof e === 'object' && (e.type === 'load' || e.type === 'dom-loaded')) {\\n        forceResizeParallax = true;\\n    }\\n}\\nupdateWndVars();\\nglobal__WEBPACK_IMPORTED_MODULE_2__[\\\"window\\\"].addEventListener('resize', updateWndVars);\\nglobal__WEBPACK_IMPORTED_MODULE_2__[\\\"window\\\"].addEventListener('orientationchange', updateWndVars);\\nglobal__WEBPACK_IMPORTED_MODULE_2__[\\\"window\\\"].addEventListener('load', updateWndVars);\\nlite_ready__WEBPACK_IMPORTED_MODULE_0___default()(() => {\\n    updateWndVars({\\n        type: 'dom-loaded',\\n    });\\n});\\n\\n// list with all jarallax instances\\n// need to render all in one scroll/resize event\\nconst jarallaxList = [];\\n\\n// Animate if changed window size or scrolled page\\nlet oldPageData = false;\\nfunction updateParallax() {\\n    if (!jarallaxList.length) {\\n        return;\\n    }\\n\\n    if (global__WEBPACK_IMPORTED_MODULE_2__[\\\"window\\\"].pageYOffset !== undefined) {\\n        wndY = global__WEBPACK_IMPORTED_MODULE_2__[\\\"window\\\"].pageYOffset;\\n    } else {\\n        wndY = (document.documentElement || document.body.parentNode || document.body).scrollTop;\\n    }\\n\\n    const isResized = forceResizeParallax || !oldPageData || oldPageData.width !== wndW || oldPageData.height !== wndH;\\n    const isScrolled = forceScrollParallax || isResized || !oldPageData || oldPageData.y !== wndY;\\n\\n    forceResizeParallax = false;\\n    forceScrollParallax = false;\\n\\n    if (isResized || isScrolled) {\\n        jarallaxList.forEach((item) => {\\n            if (isResized) {\\n                item.onResize();\\n            }\\n            if (isScrolled) {\\n                item.onScroll();\\n            }\\n        });\\n\\n        oldPageData = {\\n            width: wndW,\\n            height: wndH,\\n            y: wndY,\\n        };\\n    }\\n\\n    rafl__WEBPACK_IMPORTED_MODULE_1___default()(updateParallax);\\n}\\n\\n\\n// ResizeObserver\\nconst resizeObserver = global.ResizeObserver ? new global.ResizeObserver((entry) => {\\n    if (entry && entry.length) {\\n        rafl__WEBPACK_IMPORTED_MODULE_1___default()(() => {\\n            entry.forEach((item) => {\\n                if (item.target && item.target.jarallax) {\\n                    if (!forceResizeParallax) {\\n                        item.target.jarallax.onResize();\\n                    }\\n                    forceScrollParallax = true;\\n                }\\n            });\\n        });\\n    }\\n}) : false;\\n\\n\\nlet instanceID = 0;\\n\\n// Jarallax class\\nclass Jarallax {\\n    constructor(item, userOptions) {\\n        const self = this;\\n\\n        self.instanceID = instanceID++;\\n\\n        self.$item = item;\\n\\n        self.defaults = {\\n            type: 'scroll', // type of parallax: scroll, scale, opacity, scale-opacity, scroll-opacity\\n            speed: 0.5, // supported value from -1 to 2\\n            imgSrc: null,\\n            imgElement: '.jarallax-img',\\n            imgSize: 'cover',\\n            imgPosition: '50% 50%',\\n            imgRepeat: 'no-repeat', // supported only for background, not for <img> tag\\n            keepImg: false, // keep <img> tag in it's default place\\n            elementInViewport: null,\\n            zIndex: -100,\\n            disableParallax: false,\\n            disableVideo: false,\\n            automaticResize: true, // use ResizeObserver to recalculate position and size of parallax image\\n\\n            // video\\n            videoSrc: null,\\n            videoStartTime: 0,\\n            videoEndTime: 0,\\n            videoVolume: 0,\\n            videoLoop: true,\\n            videoPlayOnlyVisible: true,\\n            videoLazyLoading: true,\\n\\n            // events\\n            onScroll: null, // function(calculations) {}\\n            onInit: null, // function() {}\\n            onDestroy: null, // function() {}\\n            onCoverImage: null, // function() {}\\n        };\\n\\n        // prepare data-options\\n        const dataOptions = self.$item.dataset || {};\\n        const pureDataOptions = {};\\n        Object.keys(dataOptions).forEach((key) => {\\n            const loweCaseOption = key.substr(0, 1).toLowerCase() + key.substr(1);\\n            if (loweCaseOption && typeof self.defaults[loweCaseOption] !== 'undefined') {\\n                pureDataOptions[loweCaseOption] = dataOptions[key];\\n            }\\n        });\\n\\n        self.options = self.extend({}, self.defaults, pureDataOptions, userOptions);\\n        self.pureOptions = self.extend({}, self.options);\\n\\n        // prepare 'true' and 'false' strings to boolean\\n        Object.keys(self.options).forEach((key) => {\\n            if (self.options[key] === 'true') {\\n                self.options[key] = true;\\n            } else if (self.options[key] === 'false') {\\n                self.options[key] = false;\\n            }\\n        });\\n\\n        // fix speed option [-1.0, 2.0]\\n        self.options.speed = Math.min(2, Math.max(-1, parseFloat(self.options.speed)));\\n\\n        // prepare disableParallax callback\\n        if (typeof self.options.disableParallax === 'string') {\\n            self.options.disableParallax = new RegExp(self.options.disableParallax);\\n        }\\n        if (self.options.disableParallax instanceof RegExp) {\\n            const disableParallaxRegexp = self.options.disableParallax;\\n            self.options.disableParallax = () => disableParallaxRegexp.test(navigator.userAgent);\\n        }\\n        if (typeof self.options.disableParallax !== 'function') {\\n            self.options.disableParallax = () => false;\\n        }\\n\\n        // prepare disableVideo callback\\n        if (typeof self.options.disableVideo === 'string') {\\n            self.options.disableVideo = new RegExp(self.options.disableVideo);\\n        }\\n        if (self.options.disableVideo instanceof RegExp) {\\n            const disableVideoRegexp = self.options.disableVideo;\\n            self.options.disableVideo = () => disableVideoRegexp.test(navigator.userAgent);\\n        }\\n        if (typeof self.options.disableVideo !== 'function') {\\n            self.options.disableVideo = () => false;\\n        }\\n\\n        // custom element to check if parallax in viewport\\n        let elementInVP = self.options.elementInViewport;\\n        // get first item from array\\n        if (elementInVP && typeof elementInVP === 'object' && typeof elementInVP.length !== 'undefined') {\\n            [elementInVP] = elementInVP;\\n        }\\n        // check if dom element\\n        if (!(elementInVP instanceof Element)) {\\n            elementInVP = null;\\n        }\\n        self.options.elementInViewport = elementInVP;\\n\\n        self.image = {\\n            src: self.options.imgSrc || null,\\n            $container: null,\\n            useImgTag: false,\\n\\n            // position fixed is needed for the most of browsers because absolute position have glitches\\n            // on MacOS with smooth scroll there is a huge lags with absolute position - https://github.com/nk-o/jarallax/issues/75\\n            // on mobile devices better scrolled with absolute position\\n            position: /iPad|iPhone|iPod|Android/.test(navigator.userAgent) ? 'absolute' : 'fixed',\\n        };\\n\\n        if (self.initImg() && self.canInitParallax()) {\\n            self.init();\\n        }\\n    }\\n\\n    // add styles to element\\n    css(el, styles) {\\n        if (typeof styles === 'string') {\\n            return global__WEBPACK_IMPORTED_MODULE_2__[\\\"window\\\"].getComputedStyle(el).getPropertyValue(styles);\\n        }\\n\\n        // add transform property with vendor prefix\\n        if (styles.transform && supportTransform) {\\n            styles[supportTransform] = styles.transform;\\n        }\\n\\n        Object.keys(styles).forEach((key) => {\\n            el.style[key] = styles[key];\\n        });\\n        return el;\\n    }\\n\\n    // Extend like jQuery.extend\\n    extend(out) {\\n        out = out || {};\\n        Object.keys(arguments).forEach((i) => {\\n            if (!arguments[i]) {\\n                return;\\n            }\\n            Object.keys(arguments[i]).forEach((key) => {\\n                out[key] = arguments[i][key];\\n            });\\n        });\\n        return out;\\n    }\\n\\n    // get window size and scroll position. Useful for extensions\\n    getWindowData() {\\n        return {\\n            width: wndW,\\n            height: wndH,\\n            y: wndY,\\n        };\\n    }\\n\\n    // Jarallax functions\\n    initImg() {\\n        const self = this;\\n\\n        // find image element\\n        let $imgElement = self.options.imgElement;\\n        if ($imgElement && typeof $imgElement === 'string') {\\n            $imgElement = self.$item.querySelector($imgElement);\\n        }\\n        // check if dom element\\n        if (!($imgElement instanceof Element)) {\\n            if (self.options.imgSrc) {\\n                $imgElement = new Image();\\n                $imgElement.src = self.options.imgSrc;\\n            } else {\\n                $imgElement = null;\\n            }\\n        }\\n\\n        if ($imgElement) {\\n            if (self.options.keepImg) {\\n                self.image.$item = $imgElement.cloneNode(true);\\n            } else {\\n                self.image.$item = $imgElement;\\n                self.image.$itemParent = $imgElement.parentNode;\\n            }\\n            self.image.useImgTag = true;\\n        }\\n\\n        // true if there is img tag\\n        if (self.image.$item) {\\n            return true;\\n        }\\n\\n        // get image src\\n        if (self.image.src === null) {\\n            self.image.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\\n            self.image.bgImage = self.css(self.$item, 'background-image');\\n        }\\n        return !(!self.image.bgImage || self.image.bgImage === 'none');\\n    }\\n\\n    canInitParallax() {\\n        return supportTransform && !this.options.disableParallax();\\n    }\\n\\n    init() {\\n        const self = this;\\n        const containerStyles = {\\n            position: 'absolute',\\n            top: 0,\\n            left: 0,\\n            width: '100%',\\n            height: '100%',\\n            overflow: 'hidden',\\n            pointerEvents: 'none',\\n        };\\n        let imageStyles = {};\\n\\n        if (!self.options.keepImg) {\\n            // save default user styles\\n            const curStyle = self.$item.getAttribute('style');\\n            if (curStyle) {\\n                self.$item.setAttribute('data-jarallax-original-styles', curStyle);\\n            }\\n            if (self.image.useImgTag) {\\n                const curImgStyle = self.image.$item.getAttribute('style');\\n                if (curImgStyle) {\\n                    self.image.$item.setAttribute('data-jarallax-original-styles', curImgStyle);\\n                }\\n            }\\n        }\\n\\n        // set relative position and z-index to the parent\\n        if (self.css(self.$item, 'position') === 'static') {\\n            self.css(self.$item, {\\n                position: 'relative',\\n            });\\n        }\\n        if (self.css(self.$item, 'z-index') === 'auto') {\\n            self.css(self.$item, {\\n                zIndex: 0,\\n            });\\n        }\\n\\n        // container for parallax image\\n        self.image.$container = document.createElement('div');\\n        self.css(self.image.$container, containerStyles);\\n        self.css(self.image.$container, {\\n            'z-index': self.options.zIndex,\\n        });\\n\\n        // fix for IE https://github.com/nk-o/jarallax/issues/110\\n        if (isIE) {\\n            self.css(self.image.$container, {\\n                opacity: 0.9999,\\n            });\\n        }\\n\\n        self.image.$container.setAttribute('id', `jarallax-container-${self.instanceID}`);\\n        self.$item.appendChild(self.image.$container);\\n\\n        // use img tag\\n        if (self.image.useImgTag) {\\n            imageStyles = self.extend({\\n                'object-fit': self.options.imgSize,\\n                'object-position': self.options.imgPosition,\\n                // support for plugin https://github.com/bfred-it/object-fit-images\\n                'font-family': `object-fit: ${self.options.imgSize}; object-position: ${self.options.imgPosition};`,\\n                'max-width': 'none',\\n            }, containerStyles, imageStyles);\\n\\n        // use div with background image\\n        } else {\\n            self.image.$item = document.createElement('div');\\n            if (self.image.src) {\\n                imageStyles = self.extend({\\n                    'background-position': self.options.imgPosition,\\n                    'background-size': self.options.imgSize,\\n                    'background-repeat': self.options.imgRepeat,\\n                    'background-image': self.image.bgImage || `url(\\\"${self.image.src}\\\")`,\\n                }, containerStyles, imageStyles);\\n            }\\n        }\\n\\n        if (self.options.type === 'opacity' || self.options.type === 'scale' || self.options.type === 'scale-opacity' || self.options.speed === 1) {\\n            self.image.position = 'absolute';\\n        }\\n\\n        // check if one of parents have transform style (without this check, scroll transform will be inverted if used parallax with position fixed)\\n        // discussion - https://github.com/nk-o/jarallax/issues/9\\n        if (self.image.position === 'fixed') {\\n            let parentWithTransform = 0;\\n            let $itemParents = self.$item;\\n            while ($itemParents !== null && $itemParents !== document && parentWithTransform === 0) {\\n                const parentTransform = self.css($itemParents, '-webkit-transform') || self.css($itemParents, '-moz-transform') || self.css($itemParents, 'transform');\\n                if (parentTransform && parentTransform !== 'none') {\\n                    parentWithTransform = 1;\\n                    self.image.position = 'absolute';\\n                }\\n                $itemParents = $itemParents.parentNode;\\n            }\\n        }\\n\\n        // add position to parallax block\\n        imageStyles.position = self.image.position;\\n\\n        // insert parallax image\\n        self.css(self.image.$item, imageStyles);\\n        self.image.$container.appendChild(self.image.$item);\\n\\n        // set initial position and size\\n        self.onResize();\\n        self.onScroll(true);\\n\\n        // ResizeObserver\\n        if (self.options.automaticResize && resizeObserver) {\\n            resizeObserver.observe(self.$item);\\n        }\\n\\n        // call onInit event\\n        if (self.options.onInit) {\\n            self.options.onInit.call(self);\\n        }\\n\\n        // remove default user background\\n        if (self.css(self.$item, 'background-image') !== 'none') {\\n            self.css(self.$item, {\\n                'background-image': 'none',\\n            });\\n        }\\n\\n        self.addToParallaxList();\\n    }\\n\\n    // add to parallax instances list\\n    addToParallaxList() {\\n        jarallaxList.push(this);\\n\\n        if (jarallaxList.length === 1) {\\n            updateParallax();\\n        }\\n    }\\n\\n    // remove from parallax instances list\\n    removeFromParallaxList() {\\n        const self = this;\\n\\n        jarallaxList.forEach((item, key) => {\\n            if (item.instanceID === self.instanceID) {\\n                jarallaxList.splice(key, 1);\\n            }\\n        });\\n    }\\n\\n    destroy() {\\n        const self = this;\\n\\n        self.removeFromParallaxList();\\n\\n        // return styles on container as before jarallax init\\n        const originalStylesTag = self.$item.getAttribute('data-jarallax-original-styles');\\n        self.$item.removeAttribute('data-jarallax-original-styles');\\n        // null occurs if there is no style tag before jarallax init\\n        if (!originalStylesTag) {\\n            self.$item.removeAttribute('style');\\n        } else {\\n            self.$item.setAttribute('style', originalStylesTag);\\n        }\\n\\n        if (self.image.useImgTag) {\\n            // return styles on img tag as before jarallax init\\n            const originalStylesImgTag = self.image.$item.getAttribute('data-jarallax-original-styles');\\n            self.image.$item.removeAttribute('data-jarallax-original-styles');\\n            // null occurs if there is no style tag before jarallax init\\n            if (!originalStylesImgTag) {\\n                self.image.$item.removeAttribute('style');\\n            } else {\\n                self.image.$item.setAttribute('style', originalStylesTag);\\n            }\\n\\n            // move img tag to its default position\\n            if (self.image.$itemParent) {\\n                self.image.$itemParent.appendChild(self.image.$item);\\n            }\\n        }\\n\\n        // remove additional dom elements\\n        if (self.$clipStyles) {\\n            self.$clipStyles.parentNode.removeChild(self.$clipStyles);\\n        }\\n        if (self.image.$container) {\\n            self.image.$container.parentNode.removeChild(self.image.$container);\\n        }\\n\\n        // call onDestroy event\\n        if (self.options.onDestroy) {\\n            self.options.onDestroy.call(self);\\n        }\\n\\n        // delete jarallax from item\\n        delete self.$item.jarallax;\\n    }\\n\\n    // it will remove some image overlapping\\n    // overlapping occur due to an image position fixed inside absolute position element\\n    clipContainer() {\\n        // needed only when background in fixed position\\n        if (this.image.position !== 'fixed') {\\n            return;\\n        }\\n\\n        const self = this;\\n        const rect = self.image.$container.getBoundingClientRect();\\n        const { width, height } = rect;\\n\\n        if (!self.$clipStyles) {\\n            self.$clipStyles = document.createElement('style');\\n            self.$clipStyles.setAttribute('type', 'text/css');\\n            self.$clipStyles.setAttribute('id', `jarallax-clip-${self.instanceID}`);\\n            const head = document.head || document.getElementsByTagName('head')[0];\\n            head.appendChild(self.$clipStyles);\\n        }\\n\\n        const styles = `#jarallax-container-${self.instanceID} {\\n           clip: rect(0 ${width}px ${height}px 0);\\n           clip: rect(0, ${width}px, ${height}px, 0);\\n        }`;\\n\\n        // add clip styles inline (this method need for support IE8 and less browsers)\\n        if (self.$clipStyles.styleSheet) {\\n            self.$clipStyles.styleSheet.cssText = styles;\\n        } else {\\n            self.$clipStyles.innerHTML = styles;\\n        }\\n    }\\n\\n    coverImage() {\\n        const self = this;\\n\\n        const rect = self.image.$container.getBoundingClientRect();\\n        const contH = rect.height;\\n        const { speed } = self.options;\\n        const isScroll = self.options.type === 'scroll' || self.options.type === 'scroll-opacity';\\n        let scrollDist = 0;\\n        let resultH = contH;\\n        let resultMT = 0;\\n\\n        // scroll parallax\\n        if (isScroll) {\\n            // scroll distance and height for image\\n            if (speed < 0) {\\n                scrollDist = speed * Math.max(contH, wndH);\\n\\n                if (wndH < contH) {\\n                    scrollDist -= speed * (contH - wndH);\\n                }\\n            } else {\\n                scrollDist = speed * (contH + wndH);\\n            }\\n\\n            // size for scroll parallax\\n            if (speed > 1) {\\n                resultH = Math.abs(scrollDist - wndH);\\n            } else if (speed < 0) {\\n                resultH = scrollDist / speed + Math.abs(scrollDist);\\n            } else {\\n                resultH += (wndH - contH) * (1 - speed);\\n            }\\n\\n            scrollDist /= 2;\\n        }\\n\\n        // store scroll distance\\n        self.parallaxScrollDistance = scrollDist;\\n\\n        // vertical center\\n        if (isScroll) {\\n            resultMT = (wndH - resultH) / 2;\\n        } else {\\n            resultMT = (contH - resultH) / 2;\\n        }\\n\\n        // apply result to item\\n        self.css(self.image.$item, {\\n            height: `${resultH}px`,\\n            marginTop: `${resultMT}px`,\\n            left: self.image.position === 'fixed' ? `${rect.left}px` : '0',\\n            width: `${rect.width}px`,\\n        });\\n\\n        // call onCoverImage event\\n        if (self.options.onCoverImage) {\\n            self.options.onCoverImage.call(self);\\n        }\\n\\n        // return some useful data. Used in the video cover function\\n        return {\\n            image: {\\n                height: resultH,\\n                marginTop: resultMT,\\n            },\\n            container: rect,\\n        };\\n    }\\n\\n    isVisible() {\\n        return this.isElementInViewport || false;\\n    }\\n\\n    onScroll(force) {\\n        const self = this;\\n\\n        const rect = self.$item.getBoundingClientRect();\\n        const contT = rect.top;\\n        const contH = rect.height;\\n        const styles = {};\\n\\n        // check if in viewport\\n        let viewportRect = rect;\\n        if (self.options.elementInViewport) {\\n            viewportRect = self.options.elementInViewport.getBoundingClientRect();\\n        }\\n        self.isElementInViewport = viewportRect.bottom >= 0\\n            && viewportRect.right >= 0\\n            && viewportRect.top <= wndH\\n            && viewportRect.left <= wndW;\\n\\n        // stop calculations if item is not in viewport\\n        if (force ? false : !self.isElementInViewport) {\\n            return;\\n        }\\n\\n        // calculate parallax helping variables\\n        const beforeTop = Math.max(0, contT);\\n        const beforeTopEnd = Math.max(0, contH + contT);\\n        const afterTop = Math.max(0, -contT);\\n        const beforeBottom = Math.max(0, contT + contH - wndH);\\n        const beforeBottomEnd = Math.max(0, contH - (contT + contH - wndH));\\n        const afterBottom = Math.max(0, -contT + wndH - contH);\\n        const fromViewportCenter = 1 - 2 * (wndH - contT) / (wndH + contH);\\n\\n        // calculate on how percent of section is visible\\n        let visiblePercent = 1;\\n        if (contH < wndH) {\\n            visiblePercent = 1 - (afterTop || beforeBottom) / contH;\\n        } else if (beforeTopEnd <= wndH) {\\n            visiblePercent = beforeTopEnd / wndH;\\n        } else if (beforeBottomEnd <= wndH) {\\n            visiblePercent = beforeBottomEnd / wndH;\\n        }\\n\\n        // opacity\\n        if (self.options.type === 'opacity' || self.options.type === 'scale-opacity' || self.options.type === 'scroll-opacity') {\\n            styles.transform = 'translate3d(0,0,0)';\\n            styles.opacity = visiblePercent;\\n        }\\n\\n        // scale\\n        if (self.options.type === 'scale' || self.options.type === 'scale-opacity') {\\n            let scale = 1;\\n            if (self.options.speed < 0) {\\n                scale -= self.options.speed * visiblePercent;\\n            } else {\\n                scale += self.options.speed * (1 - visiblePercent);\\n            }\\n            styles.transform = `scale(${scale}) translate3d(0,0,0)`;\\n        }\\n\\n        // scroll\\n        if (self.options.type === 'scroll' || self.options.type === 'scroll-opacity') {\\n            let positionY = self.parallaxScrollDistance * fromViewportCenter;\\n\\n            // fix if parallax block in absolute position\\n            if (self.image.position === 'absolute') {\\n                positionY -= contT;\\n            }\\n\\n            styles.transform = `translate3d(0,${positionY}px,0)`;\\n        }\\n\\n        self.css(self.image.$item, styles);\\n\\n        // call onScroll event\\n        if (self.options.onScroll) {\\n            self.options.onScroll.call(self, {\\n                section: rect,\\n\\n                beforeTop,\\n                beforeTopEnd,\\n                afterTop,\\n                beforeBottom,\\n                beforeBottomEnd,\\n                afterBottom,\\n\\n                visiblePercent,\\n                fromViewportCenter,\\n            });\\n        }\\n    }\\n\\n    onResize() {\\n        this.coverImage();\\n        this.clipContainer();\\n    }\\n}\\n\\n\\n// global definition\\nconst plugin = function (items) {\\n    // check for dom element\\n    // thanks: http://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object\\n    if (typeof HTMLElement === 'object' ? items instanceof HTMLElement : items && typeof items === 'object' && items !== null && items.nodeType === 1 && typeof items.nodeName === 'string') {\\n        items = [items];\\n    }\\n\\n    const options = arguments[1];\\n    const args = Array.prototype.slice.call(arguments, 2);\\n    const len = items.length;\\n    let k = 0;\\n    let ret;\\n\\n    for (k; k < len; k++) {\\n        if (typeof options === 'object' || typeof options === 'undefined') {\\n            if (!items[k].jarallax) {\\n                items[k].jarallax = new Jarallax(items[k], options);\\n            }\\n        } else if (items[k].jarallax) {\\n            // eslint-disable-next-line prefer-spread\\n            ret = items[k].jarallax[options].apply(items[k].jarallax, args);\\n        }\\n        if (typeof ret !== 'undefined') {\\n            return ret;\\n        }\\n    }\\n\\n    return items;\\n};\\nplugin.constructor = Jarallax;\\n\\n/* harmony default export */ __webpack_exports__[\\\"default\\\"] = (plugin);\\n\\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/global.js */ \\\"./node_modules/webpack/buildin/global.js\\\")))//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvamFyYWxsYXgvc3JjL2phcmFsbGF4LmVzbS5qcz8xMTI3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQWtDO0FBQ1g7QUFDUzs7QUFFaEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIscUJBQXFCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVELGNBQWMsU0FBUyxlQUFlLFVBQVU7QUFDdkc7QUFDQTs7QUFFQSwrREFBK0QsNkNBQU07QUFDckU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDZDQUFNOztBQUVqQjtBQUNBO0FBQ0EsS0FBSztBQUNMLGVBQWUsNkNBQU07QUFDckI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUFNO0FBQ04sNkNBQU07QUFDTiw2Q0FBTTtBQUNOLGlEQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsUUFBUSw2Q0FBTTtBQUNkLGVBQWUsNkNBQU07QUFDckIsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxJQUFJLDJDQUFHO0FBQ1A7OztBQUdBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMkNBQUc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQSxDQUFDOzs7QUFHRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVULHFDQUFxQztBQUNyQyx5Q0FBeUM7O0FBRXpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNkNBQU07QUFDekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBLHVFQUF1RSxnQkFBZ0I7QUFDdkY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLHNCQUFzQixvQkFBb0IsMEJBQTBCO0FBQ2xIO0FBQ0EsYUFBYTs7QUFFYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRUFBc0UsZUFBZTtBQUNyRixpQkFBaUI7QUFDakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxnQkFBZ0I7O0FBRS9CO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxnQkFBZ0I7QUFDakY7QUFDQTtBQUNBOztBQUVBLDhDQUE4QyxnQkFBZ0I7QUFDOUQsMEJBQTBCLE1BQU0sS0FBSyxPQUFPO0FBQzVDLDJCQUEyQixNQUFNLE1BQU0sT0FBTztBQUM5QyxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1QkFBdUIsUUFBUTtBQUMvQiwwQkFBMEIsU0FBUztBQUNuQyx1REFBdUQsVUFBVTtBQUNqRSxzQkFBc0IsV0FBVztBQUNqQyxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSx3Q0FBd0MsTUFBTTtBQUM5Qzs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZ0RBQWdELFVBQVU7QUFDMUQ7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRWUscUVBQU0sRUFBQyIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy9qYXJhbGxheC9zcmMvamFyYWxsYXguZXNtLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRvbVJlYWR5IGZyb20gJ2xpdGUtcmVhZHknO1xuaW1wb3J0IHJhZiBmcm9tICdyYWZsJztcbmltcG9ydCB7IHdpbmRvdyB9IGZyb20gJ2dsb2JhbCc7XG5cbmNvbnN0IGlzSUUgPSBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ01TSUUgJykgPiAtMSB8fCBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ1RyaWRlbnQvJykgPiAtMSB8fCBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0VkZ2UvJykgPiAtMTtcbmNvbnN0IGlzTW9iaWxlID0gL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuXG5jb25zdCBzdXBwb3J0VHJhbnNmb3JtID0gKCgpID0+IHtcbiAgICBjb25zdCBwcmVmaXhlcyA9ICd0cmFuc2Zvcm0gV2Via2l0VHJhbnNmb3JtIE1velRyYW5zZm9ybScuc3BsaXQoJyAnKTtcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByZWZpeGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChkaXYgJiYgZGl2LnN0eWxlW3ByZWZpeGVzW2ldXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJlZml4ZXNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufSkoKTtcblxubGV0ICRkZXZpY2VIZWxwZXI7XG5cbi8qKlxuICogVGhlIG1vc3QgcG9wdWxhciBtb2JpbGUgYnJvd3NlcnMgY2hhbmdlcyBoZWlnaHQgYWZ0ZXIgcGFnZSBzY3JvbGwgYW5kIHRoaXMgZ2VuZXJhdGVzIGltYWdlIGp1bXBpbmcuXG4gKiBXZSBjYW4gZml4IGl0IHVzaW5nIHRoaXMgd29ya2Fyb3VuZCB3aXRoIHZoIHVuaXRzLlxuICovXG5mdW5jdGlvbiBnZXREZXZpY2VIZWlnaHQoKSB7XG4gICAgaWYgKCEkZGV2aWNlSGVscGVyICYmIGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgJGRldmljZUhlbHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAkZGV2aWNlSGVscGVyLnN0eWxlLmNzc1RleHQgPSAncG9zaXRpb246IGZpeGVkOyB0b3A6IC05OTk5cHg7IGxlZnQ6IDA7IGhlaWdodDogMTAwdmg7IHdpZHRoOiAwOyc7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoJGRldmljZUhlbHBlcik7XG4gICAgfVxuXG4gICAgcmV0dXJuICgkZGV2aWNlSGVscGVyID8gJGRldmljZUhlbHBlci5jbGllbnRIZWlnaHQgOiAwKSB8fCB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcbn1cblxuLy8gV2luZG93IGRhdGFcbmxldCB3bmRXO1xubGV0IHduZEg7XG5sZXQgd25kWTtcbmxldCBmb3JjZVJlc2l6ZVBhcmFsbGF4ID0gZmFsc2U7XG5sZXQgZm9yY2VTY3JvbGxQYXJhbGxheCA9IGZhbHNlO1xuZnVuY3Rpb24gdXBkYXRlV25kVmFycyhlKSB7XG4gICAgd25kVyA9IHdpbmRvdy5pbm5lcldpZHRoIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcblxuICAgIGlmIChpc01vYmlsZSkge1xuICAgICAgICB3bmRIID0gZ2V0RGV2aWNlSGVpZ2h0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgd25kSCA9IHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZSA9PT0gJ29iamVjdCcgJiYgKGUudHlwZSA9PT0gJ2xvYWQnIHx8IGUudHlwZSA9PT0gJ2RvbS1sb2FkZWQnKSkge1xuICAgICAgICBmb3JjZVJlc2l6ZVBhcmFsbGF4ID0gdHJ1ZTtcbiAgICB9XG59XG51cGRhdGVXbmRWYXJzKCk7XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdXBkYXRlV25kVmFycyk7XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCB1cGRhdGVXbmRWYXJzKTtcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgdXBkYXRlV25kVmFycyk7XG5kb21SZWFkeSgoKSA9PiB7XG4gICAgdXBkYXRlV25kVmFycyh7XG4gICAgICAgIHR5cGU6ICdkb20tbG9hZGVkJyxcbiAgICB9KTtcbn0pO1xuXG4vLyBsaXN0IHdpdGggYWxsIGphcmFsbGF4IGluc3RhbmNlc1xuLy8gbmVlZCB0byByZW5kZXIgYWxsIGluIG9uZSBzY3JvbGwvcmVzaXplIGV2ZW50XG5jb25zdCBqYXJhbGxheExpc3QgPSBbXTtcblxuLy8gQW5pbWF0ZSBpZiBjaGFuZ2VkIHdpbmRvdyBzaXplIG9yIHNjcm9sbGVkIHBhZ2VcbmxldCBvbGRQYWdlRGF0YSA9IGZhbHNlO1xuZnVuY3Rpb24gdXBkYXRlUGFyYWxsYXgoKSB7XG4gICAgaWYgKCFqYXJhbGxheExpc3QubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAod2luZG93LnBhZ2VZT2Zmc2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgd25kWSA9IHdpbmRvdy5wYWdlWU9mZnNldDtcbiAgICB9IGVsc2Uge1xuICAgICAgICB3bmRZID0gKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fCBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUgfHwgZG9jdW1lbnQuYm9keSkuc2Nyb2xsVG9wO1xuICAgIH1cblxuICAgIGNvbnN0IGlzUmVzaXplZCA9IGZvcmNlUmVzaXplUGFyYWxsYXggfHwgIW9sZFBhZ2VEYXRhIHx8IG9sZFBhZ2VEYXRhLndpZHRoICE9PSB3bmRXIHx8IG9sZFBhZ2VEYXRhLmhlaWdodCAhPT0gd25kSDtcbiAgICBjb25zdCBpc1Njcm9sbGVkID0gZm9yY2VTY3JvbGxQYXJhbGxheCB8fCBpc1Jlc2l6ZWQgfHwgIW9sZFBhZ2VEYXRhIHx8IG9sZFBhZ2VEYXRhLnkgIT09IHduZFk7XG5cbiAgICBmb3JjZVJlc2l6ZVBhcmFsbGF4ID0gZmFsc2U7XG4gICAgZm9yY2VTY3JvbGxQYXJhbGxheCA9IGZhbHNlO1xuXG4gICAgaWYgKGlzUmVzaXplZCB8fCBpc1Njcm9sbGVkKSB7XG4gICAgICAgIGphcmFsbGF4TGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNSZXNpemVkKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5vblJlc2l6ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzU2Nyb2xsZWQpIHtcbiAgICAgICAgICAgICAgICBpdGVtLm9uU2Nyb2xsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG9sZFBhZ2VEYXRhID0ge1xuICAgICAgICAgICAgd2lkdGg6IHduZFcsXG4gICAgICAgICAgICBoZWlnaHQ6IHduZEgsXG4gICAgICAgICAgICB5OiB3bmRZLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJhZih1cGRhdGVQYXJhbGxheCk7XG59XG5cblxuLy8gUmVzaXplT2JzZXJ2ZXJcbmNvbnN0IHJlc2l6ZU9ic2VydmVyID0gZ2xvYmFsLlJlc2l6ZU9ic2VydmVyID8gbmV3IGdsb2JhbC5SZXNpemVPYnNlcnZlcigoZW50cnkpID0+IHtcbiAgICBpZiAoZW50cnkgJiYgZW50cnkubGVuZ3RoKSB7XG4gICAgICAgIHJhZigoKSA9PiB7XG4gICAgICAgICAgICBlbnRyeS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0udGFyZ2V0ICYmIGl0ZW0udGFyZ2V0LmphcmFsbGF4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZm9yY2VSZXNpemVQYXJhbGxheCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS50YXJnZXQuamFyYWxsYXgub25SZXNpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3JjZVNjcm9sbFBhcmFsbGF4ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufSkgOiBmYWxzZTtcblxuXG5sZXQgaW5zdGFuY2VJRCA9IDA7XG5cbi8vIEphcmFsbGF4IGNsYXNzXG5jbGFzcyBKYXJhbGxheCB7XG4gICAgY29uc3RydWN0b3IoaXRlbSwgdXNlck9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgc2VsZi5pbnN0YW5jZUlEID0gaW5zdGFuY2VJRCsrO1xuXG4gICAgICAgIHNlbGYuJGl0ZW0gPSBpdGVtO1xuXG4gICAgICAgIHNlbGYuZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICB0eXBlOiAnc2Nyb2xsJywgLy8gdHlwZSBvZiBwYXJhbGxheDogc2Nyb2xsLCBzY2FsZSwgb3BhY2l0eSwgc2NhbGUtb3BhY2l0eSwgc2Nyb2xsLW9wYWNpdHlcbiAgICAgICAgICAgIHNwZWVkOiAwLjUsIC8vIHN1cHBvcnRlZCB2YWx1ZSBmcm9tIC0xIHRvIDJcbiAgICAgICAgICAgIGltZ1NyYzogbnVsbCxcbiAgICAgICAgICAgIGltZ0VsZW1lbnQ6ICcuamFyYWxsYXgtaW1nJyxcbiAgICAgICAgICAgIGltZ1NpemU6ICdjb3ZlcicsXG4gICAgICAgICAgICBpbWdQb3NpdGlvbjogJzUwJSA1MCUnLFxuICAgICAgICAgICAgaW1nUmVwZWF0OiAnbm8tcmVwZWF0JywgLy8gc3VwcG9ydGVkIG9ubHkgZm9yIGJhY2tncm91bmQsIG5vdCBmb3IgPGltZz4gdGFnXG4gICAgICAgICAgICBrZWVwSW1nOiBmYWxzZSwgLy8ga2VlcCA8aW1nPiB0YWcgaW4gaXQncyBkZWZhdWx0IHBsYWNlXG4gICAgICAgICAgICBlbGVtZW50SW5WaWV3cG9ydDogbnVsbCxcbiAgICAgICAgICAgIHpJbmRleDogLTEwMCxcbiAgICAgICAgICAgIGRpc2FibGVQYXJhbGxheDogZmFsc2UsXG4gICAgICAgICAgICBkaXNhYmxlVmlkZW86IGZhbHNlLFxuICAgICAgICAgICAgYXV0b21hdGljUmVzaXplOiB0cnVlLCAvLyB1c2UgUmVzaXplT2JzZXJ2ZXIgdG8gcmVjYWxjdWxhdGUgcG9zaXRpb24gYW5kIHNpemUgb2YgcGFyYWxsYXggaW1hZ2VcblxuICAgICAgICAgICAgLy8gdmlkZW9cbiAgICAgICAgICAgIHZpZGVvU3JjOiBudWxsLFxuICAgICAgICAgICAgdmlkZW9TdGFydFRpbWU6IDAsXG4gICAgICAgICAgICB2aWRlb0VuZFRpbWU6IDAsXG4gICAgICAgICAgICB2aWRlb1ZvbHVtZTogMCxcbiAgICAgICAgICAgIHZpZGVvTG9vcDogdHJ1ZSxcbiAgICAgICAgICAgIHZpZGVvUGxheU9ubHlWaXNpYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmlkZW9MYXp5TG9hZGluZzogdHJ1ZSxcblxuICAgICAgICAgICAgLy8gZXZlbnRzXG4gICAgICAgICAgICBvblNjcm9sbDogbnVsbCwgLy8gZnVuY3Rpb24oY2FsY3VsYXRpb25zKSB7fVxuICAgICAgICAgICAgb25Jbml0OiBudWxsLCAvLyBmdW5jdGlvbigpIHt9XG4gICAgICAgICAgICBvbkRlc3Ryb3k6IG51bGwsIC8vIGZ1bmN0aW9uKCkge31cbiAgICAgICAgICAgIG9uQ292ZXJJbWFnZTogbnVsbCwgLy8gZnVuY3Rpb24oKSB7fVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIHByZXBhcmUgZGF0YS1vcHRpb25zXG4gICAgICAgIGNvbnN0IGRhdGFPcHRpb25zID0gc2VsZi4kaXRlbS5kYXRhc2V0IHx8IHt9O1xuICAgICAgICBjb25zdCBwdXJlRGF0YU9wdGlvbnMgPSB7fTtcbiAgICAgICAgT2JqZWN0LmtleXMoZGF0YU9wdGlvbnMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbG93ZUNhc2VPcHRpb24gPSBrZXkuc3Vic3RyKDAsIDEpLnRvTG93ZXJDYXNlKCkgKyBrZXkuc3Vic3RyKDEpO1xuICAgICAgICAgICAgaWYgKGxvd2VDYXNlT3B0aW9uICYmIHR5cGVvZiBzZWxmLmRlZmF1bHRzW2xvd2VDYXNlT3B0aW9uXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBwdXJlRGF0YU9wdGlvbnNbbG93ZUNhc2VPcHRpb25dID0gZGF0YU9wdGlvbnNba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2VsZi5vcHRpb25zID0gc2VsZi5leHRlbmQoe30sIHNlbGYuZGVmYXVsdHMsIHB1cmVEYXRhT3B0aW9ucywgdXNlck9wdGlvbnMpO1xuICAgICAgICBzZWxmLnB1cmVPcHRpb25zID0gc2VsZi5leHRlbmQoe30sIHNlbGYub3B0aW9ucyk7XG5cbiAgICAgICAgLy8gcHJlcGFyZSAndHJ1ZScgYW5kICdmYWxzZScgc3RyaW5ncyB0byBib29sZWFuXG4gICAgICAgIE9iamVjdC5rZXlzKHNlbGYub3B0aW9ucykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBpZiAoc2VsZi5vcHRpb25zW2tleV0gPT09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgIHNlbGYub3B0aW9uc1trZXldID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VsZi5vcHRpb25zW2tleV0gPT09ICdmYWxzZScpIHtcbiAgICAgICAgICAgICAgICBzZWxmLm9wdGlvbnNba2V5XSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBmaXggc3BlZWQgb3B0aW9uIFstMS4wLCAyLjBdXG4gICAgICAgIHNlbGYub3B0aW9ucy5zcGVlZCA9IE1hdGgubWluKDIsIE1hdGgubWF4KC0xLCBwYXJzZUZsb2F0KHNlbGYub3B0aW9ucy5zcGVlZCkpKTtcblxuICAgICAgICAvLyBwcmVwYXJlIGRpc2FibGVQYXJhbGxheCBjYWxsYmFja1xuICAgICAgICBpZiAodHlwZW9mIHNlbGYub3B0aW9ucy5kaXNhYmxlUGFyYWxsYXggPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBzZWxmLm9wdGlvbnMuZGlzYWJsZVBhcmFsbGF4ID0gbmV3IFJlZ0V4cChzZWxmLm9wdGlvbnMuZGlzYWJsZVBhcmFsbGF4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5vcHRpb25zLmRpc2FibGVQYXJhbGxheCBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgICAgICAgICAgY29uc3QgZGlzYWJsZVBhcmFsbGF4UmVnZXhwID0gc2VsZi5vcHRpb25zLmRpc2FibGVQYXJhbGxheDtcbiAgICAgICAgICAgIHNlbGYub3B0aW9ucy5kaXNhYmxlUGFyYWxsYXggPSAoKSA9PiBkaXNhYmxlUGFyYWxsYXhSZWdleHAudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHNlbGYub3B0aW9ucy5kaXNhYmxlUGFyYWxsYXggIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHNlbGYub3B0aW9ucy5kaXNhYmxlUGFyYWxsYXggPSAoKSA9PiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHByZXBhcmUgZGlzYWJsZVZpZGVvIGNhbGxiYWNrXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZi5vcHRpb25zLmRpc2FibGVWaWRlbyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHNlbGYub3B0aW9ucy5kaXNhYmxlVmlkZW8gPSBuZXcgUmVnRXhwKHNlbGYub3B0aW9ucy5kaXNhYmxlVmlkZW8pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLm9wdGlvbnMuZGlzYWJsZVZpZGVvIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgICAgICAgICBjb25zdCBkaXNhYmxlVmlkZW9SZWdleHAgPSBzZWxmLm9wdGlvbnMuZGlzYWJsZVZpZGVvO1xuICAgICAgICAgICAgc2VsZi5vcHRpb25zLmRpc2FibGVWaWRlbyA9ICgpID0+IGRpc2FibGVWaWRlb1JlZ2V4cC50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZi5vcHRpb25zLmRpc2FibGVWaWRlbyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgc2VsZi5vcHRpb25zLmRpc2FibGVWaWRlbyA9ICgpID0+IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY3VzdG9tIGVsZW1lbnQgdG8gY2hlY2sgaWYgcGFyYWxsYXggaW4gdmlld3BvcnRcbiAgICAgICAgbGV0IGVsZW1lbnRJblZQID0gc2VsZi5vcHRpb25zLmVsZW1lbnRJblZpZXdwb3J0O1xuICAgICAgICAvLyBnZXQgZmlyc3QgaXRlbSBmcm9tIGFycmF5XG4gICAgICAgIGlmIChlbGVtZW50SW5WUCAmJiB0eXBlb2YgZWxlbWVudEluVlAgPT09ICdvYmplY3QnICYmIHR5cGVvZiBlbGVtZW50SW5WUC5sZW5ndGggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBbZWxlbWVudEluVlBdID0gZWxlbWVudEluVlA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2hlY2sgaWYgZG9tIGVsZW1lbnRcbiAgICAgICAgaWYgKCEoZWxlbWVudEluVlAgaW5zdGFuY2VvZiBFbGVtZW50KSkge1xuICAgICAgICAgICAgZWxlbWVudEluVlAgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYub3B0aW9ucy5lbGVtZW50SW5WaWV3cG9ydCA9IGVsZW1lbnRJblZQO1xuXG4gICAgICAgIHNlbGYuaW1hZ2UgPSB7XG4gICAgICAgICAgICBzcmM6IHNlbGYub3B0aW9ucy5pbWdTcmMgfHwgbnVsbCxcbiAgICAgICAgICAgICRjb250YWluZXI6IG51bGwsXG4gICAgICAgICAgICB1c2VJbWdUYWc6IGZhbHNlLFxuXG4gICAgICAgICAgICAvLyBwb3NpdGlvbiBmaXhlZCBpcyBuZWVkZWQgZm9yIHRoZSBtb3N0IG9mIGJyb3dzZXJzIGJlY2F1c2UgYWJzb2x1dGUgcG9zaXRpb24gaGF2ZSBnbGl0Y2hlc1xuICAgICAgICAgICAgLy8gb24gTWFjT1Mgd2l0aCBzbW9vdGggc2Nyb2xsIHRoZXJlIGlzIGEgaHVnZSBsYWdzIHdpdGggYWJzb2x1dGUgcG9zaXRpb24gLSBodHRwczovL2dpdGh1Yi5jb20vbmstby9qYXJhbGxheC9pc3N1ZXMvNzVcbiAgICAgICAgICAgIC8vIG9uIG1vYmlsZSBkZXZpY2VzIGJldHRlciBzY3JvbGxlZCB3aXRoIGFic29sdXRlIHBvc2l0aW9uXG4gICAgICAgICAgICBwb3NpdGlvbjogL2lQYWR8aVBob25lfGlQb2R8QW5kcm9pZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSA/ICdhYnNvbHV0ZScgOiAnZml4ZWQnLFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChzZWxmLmluaXRJbWcoKSAmJiBzZWxmLmNhbkluaXRQYXJhbGxheCgpKSB7XG4gICAgICAgICAgICBzZWxmLmluaXQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGFkZCBzdHlsZXMgdG8gZWxlbWVudFxuICAgIGNzcyhlbCwgc3R5bGVzKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3R5bGVzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsKS5nZXRQcm9wZXJ0eVZhbHVlKHN0eWxlcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhZGQgdHJhbnNmb3JtIHByb3BlcnR5IHdpdGggdmVuZG9yIHByZWZpeFxuICAgICAgICBpZiAoc3R5bGVzLnRyYW5zZm9ybSAmJiBzdXBwb3J0VHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBzdHlsZXNbc3VwcG9ydFRyYW5zZm9ybV0gPSBzdHlsZXMudHJhbnNmb3JtO1xuICAgICAgICB9XG5cbiAgICAgICAgT2JqZWN0LmtleXMoc3R5bGVzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGVsLnN0eWxlW2tleV0gPSBzdHlsZXNba2V5XTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBlbDtcbiAgICB9XG5cbiAgICAvLyBFeHRlbmQgbGlrZSBqUXVlcnkuZXh0ZW5kXG4gICAgZXh0ZW5kKG91dCkge1xuICAgICAgICBvdXQgPSBvdXQgfHwge307XG4gICAgICAgIE9iamVjdC5rZXlzKGFyZ3VtZW50cykuZm9yRWFjaCgoaSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFhcmd1bWVudHNbaV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhhcmd1bWVudHNbaV0pLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIG91dFtrZXldID0gYXJndW1lbnRzW2ldW2tleV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLy8gZ2V0IHdpbmRvdyBzaXplIGFuZCBzY3JvbGwgcG9zaXRpb24uIFVzZWZ1bCBmb3IgZXh0ZW5zaW9uc1xuICAgIGdldFdpbmRvd0RhdGEoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB3aWR0aDogd25kVyxcbiAgICAgICAgICAgIGhlaWdodDogd25kSCxcbiAgICAgICAgICAgIHk6IHduZFksXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gSmFyYWxsYXggZnVuY3Rpb25zXG4gICAgaW5pdEltZygpIHtcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgLy8gZmluZCBpbWFnZSBlbGVtZW50XG4gICAgICAgIGxldCAkaW1nRWxlbWVudCA9IHNlbGYub3B0aW9ucy5pbWdFbGVtZW50O1xuICAgICAgICBpZiAoJGltZ0VsZW1lbnQgJiYgdHlwZW9mICRpbWdFbGVtZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgJGltZ0VsZW1lbnQgPSBzZWxmLiRpdGVtLnF1ZXJ5U2VsZWN0b3IoJGltZ0VsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNoZWNrIGlmIGRvbSBlbGVtZW50XG4gICAgICAgIGlmICghKCRpbWdFbGVtZW50IGluc3RhbmNlb2YgRWxlbWVudCkpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLm9wdGlvbnMuaW1nU3JjKSB7XG4gICAgICAgICAgICAgICAgJGltZ0VsZW1lbnQgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgICAgICAkaW1nRWxlbWVudC5zcmMgPSBzZWxmLm9wdGlvbnMuaW1nU3JjO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkaW1nRWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoJGltZ0VsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLm9wdGlvbnMua2VlcEltZykge1xuICAgICAgICAgICAgICAgIHNlbGYuaW1hZ2UuJGl0ZW0gPSAkaW1nRWxlbWVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYuaW1hZ2UuJGl0ZW0gPSAkaW1nRWxlbWVudDtcbiAgICAgICAgICAgICAgICBzZWxmLmltYWdlLiRpdGVtUGFyZW50ID0gJGltZ0VsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlbGYuaW1hZ2UudXNlSW1nVGFnID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRydWUgaWYgdGhlcmUgaXMgaW1nIHRhZ1xuICAgICAgICBpZiAoc2VsZi5pbWFnZS4kaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBnZXQgaW1hZ2Ugc3JjXG4gICAgICAgIGlmIChzZWxmLmltYWdlLnNyYyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgc2VsZi5pbWFnZS5zcmMgPSAnZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95SDVCQUVBQUFBQUxBQUFBQUFCQUFFQUFBSUJSQUE3JztcbiAgICAgICAgICAgIHNlbGYuaW1hZ2UuYmdJbWFnZSA9IHNlbGYuY3NzKHNlbGYuJGl0ZW0sICdiYWNrZ3JvdW5kLWltYWdlJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEoIXNlbGYuaW1hZ2UuYmdJbWFnZSB8fCBzZWxmLmltYWdlLmJnSW1hZ2UgPT09ICdub25lJyk7XG4gICAgfVxuXG4gICAgY2FuSW5pdFBhcmFsbGF4KCkge1xuICAgICAgICByZXR1cm4gc3VwcG9ydFRyYW5zZm9ybSAmJiAhdGhpcy5vcHRpb25zLmRpc2FibGVQYXJhbGxheCgpO1xuICAgIH1cblxuICAgIGluaXQoKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICBjb25zdCBjb250YWluZXJTdHlsZXMgPSB7XG4gICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICAgICAgICBwb2ludGVyRXZlbnRzOiAnbm9uZScsXG4gICAgICAgIH07XG4gICAgICAgIGxldCBpbWFnZVN0eWxlcyA9IHt9O1xuXG4gICAgICAgIGlmICghc2VsZi5vcHRpb25zLmtlZXBJbWcpIHtcbiAgICAgICAgICAgIC8vIHNhdmUgZGVmYXVsdCB1c2VyIHN0eWxlc1xuICAgICAgICAgICAgY29uc3QgY3VyU3R5bGUgPSBzZWxmLiRpdGVtLmdldEF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgIGlmIChjdXJTdHlsZSkge1xuICAgICAgICAgICAgICAgIHNlbGYuJGl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLWphcmFsbGF4LW9yaWdpbmFsLXN0eWxlcycsIGN1clN0eWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZWxmLmltYWdlLnVzZUltZ1RhZykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1ckltZ1N0eWxlID0gc2VsZi5pbWFnZS4kaXRlbS5nZXRBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgaWYgKGN1ckltZ1N0eWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaW1hZ2UuJGl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLWphcmFsbGF4LW9yaWdpbmFsLXN0eWxlcycsIGN1ckltZ1N0eWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzZXQgcmVsYXRpdmUgcG9zaXRpb24gYW5kIHotaW5kZXggdG8gdGhlIHBhcmVudFxuICAgICAgICBpZiAoc2VsZi5jc3Moc2VsZi4kaXRlbSwgJ3Bvc2l0aW9uJykgPT09ICdzdGF0aWMnKSB7XG4gICAgICAgICAgICBzZWxmLmNzcyhzZWxmLiRpdGVtLCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5jc3Moc2VsZi4kaXRlbSwgJ3otaW5kZXgnKSA9PT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICBzZWxmLmNzcyhzZWxmLiRpdGVtLCB7XG4gICAgICAgICAgICAgICAgekluZGV4OiAwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjb250YWluZXIgZm9yIHBhcmFsbGF4IGltYWdlXG4gICAgICAgIHNlbGYuaW1hZ2UuJGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBzZWxmLmNzcyhzZWxmLmltYWdlLiRjb250YWluZXIsIGNvbnRhaW5lclN0eWxlcyk7XG4gICAgICAgIHNlbGYuY3NzKHNlbGYuaW1hZ2UuJGNvbnRhaW5lciwge1xuICAgICAgICAgICAgJ3otaW5kZXgnOiBzZWxmLm9wdGlvbnMuekluZGV4LFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBmaXggZm9yIElFIGh0dHBzOi8vZ2l0aHViLmNvbS9uay1vL2phcmFsbGF4L2lzc3Vlcy8xMTBcbiAgICAgICAgaWYgKGlzSUUpIHtcbiAgICAgICAgICAgIHNlbGYuY3NzKHNlbGYuaW1hZ2UuJGNvbnRhaW5lciwge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuOTk5OSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5pbWFnZS4kY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnaWQnLCBgamFyYWxsYXgtY29udGFpbmVyLSR7c2VsZi5pbnN0YW5jZUlEfWApO1xuICAgICAgICBzZWxmLiRpdGVtLmFwcGVuZENoaWxkKHNlbGYuaW1hZ2UuJGNvbnRhaW5lcik7XG5cbiAgICAgICAgLy8gdXNlIGltZyB0YWdcbiAgICAgICAgaWYgKHNlbGYuaW1hZ2UudXNlSW1nVGFnKSB7XG4gICAgICAgICAgICBpbWFnZVN0eWxlcyA9IHNlbGYuZXh0ZW5kKHtcbiAgICAgICAgICAgICAgICAnb2JqZWN0LWZpdCc6IHNlbGYub3B0aW9ucy5pbWdTaXplLFxuICAgICAgICAgICAgICAgICdvYmplY3QtcG9zaXRpb24nOiBzZWxmLm9wdGlvbnMuaW1nUG9zaXRpb24sXG4gICAgICAgICAgICAgICAgLy8gc3VwcG9ydCBmb3IgcGx1Z2luIGh0dHBzOi8vZ2l0aHViLmNvbS9iZnJlZC1pdC9vYmplY3QtZml0LWltYWdlc1xuICAgICAgICAgICAgICAgICdmb250LWZhbWlseSc6IGBvYmplY3QtZml0OiAke3NlbGYub3B0aW9ucy5pbWdTaXplfTsgb2JqZWN0LXBvc2l0aW9uOiAke3NlbGYub3B0aW9ucy5pbWdQb3NpdGlvbn07YCxcbiAgICAgICAgICAgICAgICAnbWF4LXdpZHRoJzogJ25vbmUnLFxuICAgICAgICAgICAgfSwgY29udGFpbmVyU3R5bGVzLCBpbWFnZVN0eWxlcyk7XG5cbiAgICAgICAgLy8gdXNlIGRpdiB3aXRoIGJhY2tncm91bmQgaW1hZ2VcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYuaW1hZ2UuJGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGlmIChzZWxmLmltYWdlLnNyYykge1xuICAgICAgICAgICAgICAgIGltYWdlU3R5bGVzID0gc2VsZi5leHRlbmQoe1xuICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1wb3NpdGlvbic6IHNlbGYub3B0aW9ucy5pbWdQb3NpdGlvbixcbiAgICAgICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtc2l6ZSc6IHNlbGYub3B0aW9ucy5pbWdTaXplLFxuICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1yZXBlYXQnOiBzZWxmLm9wdGlvbnMuaW1nUmVwZWF0LFxuICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1pbWFnZSc6IHNlbGYuaW1hZ2UuYmdJbWFnZSB8fCBgdXJsKFwiJHtzZWxmLmltYWdlLnNyY31cIilgLFxuICAgICAgICAgICAgICAgIH0sIGNvbnRhaW5lclN0eWxlcywgaW1hZ2VTdHlsZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYub3B0aW9ucy50eXBlID09PSAnb3BhY2l0eScgfHwgc2VsZi5vcHRpb25zLnR5cGUgPT09ICdzY2FsZScgfHwgc2VsZi5vcHRpb25zLnR5cGUgPT09ICdzY2FsZS1vcGFjaXR5JyB8fCBzZWxmLm9wdGlvbnMuc3BlZWQgPT09IDEpIHtcbiAgICAgICAgICAgIHNlbGYuaW1hZ2UucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2hlY2sgaWYgb25lIG9mIHBhcmVudHMgaGF2ZSB0cmFuc2Zvcm0gc3R5bGUgKHdpdGhvdXQgdGhpcyBjaGVjaywgc2Nyb2xsIHRyYW5zZm9ybSB3aWxsIGJlIGludmVydGVkIGlmIHVzZWQgcGFyYWxsYXggd2l0aCBwb3NpdGlvbiBmaXhlZClcbiAgICAgICAgLy8gZGlzY3Vzc2lvbiAtIGh0dHBzOi8vZ2l0aHViLmNvbS9uay1vL2phcmFsbGF4L2lzc3Vlcy85XG4gICAgICAgIGlmIChzZWxmLmltYWdlLnBvc2l0aW9uID09PSAnZml4ZWQnKSB7XG4gICAgICAgICAgICBsZXQgcGFyZW50V2l0aFRyYW5zZm9ybSA9IDA7XG4gICAgICAgICAgICBsZXQgJGl0ZW1QYXJlbnRzID0gc2VsZi4kaXRlbTtcbiAgICAgICAgICAgIHdoaWxlICgkaXRlbVBhcmVudHMgIT09IG51bGwgJiYgJGl0ZW1QYXJlbnRzICE9PSBkb2N1bWVudCAmJiBwYXJlbnRXaXRoVHJhbnNmb3JtID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50VHJhbnNmb3JtID0gc2VsZi5jc3MoJGl0ZW1QYXJlbnRzLCAnLXdlYmtpdC10cmFuc2Zvcm0nKSB8fCBzZWxmLmNzcygkaXRlbVBhcmVudHMsICctbW96LXRyYW5zZm9ybScpIHx8IHNlbGYuY3NzKCRpdGVtUGFyZW50cywgJ3RyYW5zZm9ybScpO1xuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRUcmFuc2Zvcm0gJiYgcGFyZW50VHJhbnNmb3JtICE9PSAnbm9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50V2l0aFRyYW5zZm9ybSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaW1hZ2UucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkaXRlbVBhcmVudHMgPSAkaXRlbVBhcmVudHMucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFkZCBwb3NpdGlvbiB0byBwYXJhbGxheCBibG9ja1xuICAgICAgICBpbWFnZVN0eWxlcy5wb3NpdGlvbiA9IHNlbGYuaW1hZ2UucG9zaXRpb247XG5cbiAgICAgICAgLy8gaW5zZXJ0IHBhcmFsbGF4IGltYWdlXG4gICAgICAgIHNlbGYuY3NzKHNlbGYuaW1hZ2UuJGl0ZW0sIGltYWdlU3R5bGVzKTtcbiAgICAgICAgc2VsZi5pbWFnZS4kY29udGFpbmVyLmFwcGVuZENoaWxkKHNlbGYuaW1hZ2UuJGl0ZW0pO1xuXG4gICAgICAgIC8vIHNldCBpbml0aWFsIHBvc2l0aW9uIGFuZCBzaXplXG4gICAgICAgIHNlbGYub25SZXNpemUoKTtcbiAgICAgICAgc2VsZi5vblNjcm9sbCh0cnVlKTtcblxuICAgICAgICAvLyBSZXNpemVPYnNlcnZlclxuICAgICAgICBpZiAoc2VsZi5vcHRpb25zLmF1dG9tYXRpY1Jlc2l6ZSAmJiByZXNpemVPYnNlcnZlcikge1xuICAgICAgICAgICAgcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZShzZWxmLiRpdGVtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNhbGwgb25Jbml0IGV2ZW50XG4gICAgICAgIGlmIChzZWxmLm9wdGlvbnMub25Jbml0KSB7XG4gICAgICAgICAgICBzZWxmLm9wdGlvbnMub25Jbml0LmNhbGwoc2VsZik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZW1vdmUgZGVmYXVsdCB1c2VyIGJhY2tncm91bmRcbiAgICAgICAgaWYgKHNlbGYuY3NzKHNlbGYuJGl0ZW0sICdiYWNrZ3JvdW5kLWltYWdlJykgIT09ICdub25lJykge1xuICAgICAgICAgICAgc2VsZi5jc3Moc2VsZi4kaXRlbSwge1xuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLWltYWdlJzogJ25vbmUnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLmFkZFRvUGFyYWxsYXhMaXN0KCk7XG4gICAgfVxuXG4gICAgLy8gYWRkIHRvIHBhcmFsbGF4IGluc3RhbmNlcyBsaXN0XG4gICAgYWRkVG9QYXJhbGxheExpc3QoKSB7XG4gICAgICAgIGphcmFsbGF4TGlzdC5wdXNoKHRoaXMpO1xuXG4gICAgICAgIGlmIChqYXJhbGxheExpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICB1cGRhdGVQYXJhbGxheCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmVtb3ZlIGZyb20gcGFyYWxsYXggaW5zdGFuY2VzIGxpc3RcbiAgICByZW1vdmVGcm9tUGFyYWxsYXhMaXN0KCkge1xuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICBqYXJhbGxheExpc3QuZm9yRWFjaCgoaXRlbSwga2V5KSA9PiB7XG4gICAgICAgICAgICBpZiAoaXRlbS5pbnN0YW5jZUlEID09PSBzZWxmLmluc3RhbmNlSUQpIHtcbiAgICAgICAgICAgICAgICBqYXJhbGxheExpc3Quc3BsaWNlKGtleSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHNlbGYucmVtb3ZlRnJvbVBhcmFsbGF4TGlzdCgpO1xuXG4gICAgICAgIC8vIHJldHVybiBzdHlsZXMgb24gY29udGFpbmVyIGFzIGJlZm9yZSBqYXJhbGxheCBpbml0XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsU3R5bGVzVGFnID0gc2VsZi4kaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtamFyYWxsYXgtb3JpZ2luYWwtc3R5bGVzJyk7XG4gICAgICAgIHNlbGYuJGl0ZW0ucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWphcmFsbGF4LW9yaWdpbmFsLXN0eWxlcycpO1xuICAgICAgICAvLyBudWxsIG9jY3VycyBpZiB0aGVyZSBpcyBubyBzdHlsZSB0YWcgYmVmb3JlIGphcmFsbGF4IGluaXRcbiAgICAgICAgaWYgKCFvcmlnaW5hbFN0eWxlc1RhZykge1xuICAgICAgICAgICAgc2VsZi4kaXRlbS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxmLiRpdGVtLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBvcmlnaW5hbFN0eWxlc1RhZyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5pbWFnZS51c2VJbWdUYWcpIHtcbiAgICAgICAgICAgIC8vIHJldHVybiBzdHlsZXMgb24gaW1nIHRhZyBhcyBiZWZvcmUgamFyYWxsYXggaW5pdFxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxTdHlsZXNJbWdUYWcgPSBzZWxmLmltYWdlLiRpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1qYXJhbGxheC1vcmlnaW5hbC1zdHlsZXMnKTtcbiAgICAgICAgICAgIHNlbGYuaW1hZ2UuJGl0ZW0ucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWphcmFsbGF4LW9yaWdpbmFsLXN0eWxlcycpO1xuICAgICAgICAgICAgLy8gbnVsbCBvY2N1cnMgaWYgdGhlcmUgaXMgbm8gc3R5bGUgdGFnIGJlZm9yZSBqYXJhbGxheCBpbml0XG4gICAgICAgICAgICBpZiAoIW9yaWdpbmFsU3R5bGVzSW1nVGFnKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5pbWFnZS4kaXRlbS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYuaW1hZ2UuJGl0ZW0uc2V0QXR0cmlidXRlKCdzdHlsZScsIG9yaWdpbmFsU3R5bGVzVGFnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gbW92ZSBpbWcgdGFnIHRvIGl0cyBkZWZhdWx0IHBvc2l0aW9uXG4gICAgICAgICAgICBpZiAoc2VsZi5pbWFnZS4kaXRlbVBhcmVudCkge1xuICAgICAgICAgICAgICAgIHNlbGYuaW1hZ2UuJGl0ZW1QYXJlbnQuYXBwZW5kQ2hpbGQoc2VsZi5pbWFnZS4kaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZW1vdmUgYWRkaXRpb25hbCBkb20gZWxlbWVudHNcbiAgICAgICAgaWYgKHNlbGYuJGNsaXBTdHlsZXMpIHtcbiAgICAgICAgICAgIHNlbGYuJGNsaXBTdHlsZXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLiRjbGlwU3R5bGVzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5pbWFnZS4kY29udGFpbmVyKSB7XG4gICAgICAgICAgICBzZWxmLmltYWdlLiRjb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLmltYWdlLiRjb250YWluZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2FsbCBvbkRlc3Ryb3kgZXZlbnRcbiAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5vbkRlc3Ryb3kpIHtcbiAgICAgICAgICAgIHNlbGYub3B0aW9ucy5vbkRlc3Ryb3kuY2FsbChzZWxmKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRlbGV0ZSBqYXJhbGxheCBmcm9tIGl0ZW1cbiAgICAgICAgZGVsZXRlIHNlbGYuJGl0ZW0uamFyYWxsYXg7XG4gICAgfVxuXG4gICAgLy8gaXQgd2lsbCByZW1vdmUgc29tZSBpbWFnZSBvdmVybGFwcGluZ1xuICAgIC8vIG92ZXJsYXBwaW5nIG9jY3VyIGR1ZSB0byBhbiBpbWFnZSBwb3NpdGlvbiBmaXhlZCBpbnNpZGUgYWJzb2x1dGUgcG9zaXRpb24gZWxlbWVudFxuICAgIGNsaXBDb250YWluZXIoKSB7XG4gICAgICAgIC8vIG5lZWRlZCBvbmx5IHdoZW4gYmFja2dyb3VuZCBpbiBmaXhlZCBwb3NpdGlvblxuICAgICAgICBpZiAodGhpcy5pbWFnZS5wb3NpdGlvbiAhPT0gJ2ZpeGVkJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHJlY3QgPSBzZWxmLmltYWdlLiRjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gcmVjdDtcblxuICAgICAgICBpZiAoIXNlbGYuJGNsaXBTdHlsZXMpIHtcbiAgICAgICAgICAgIHNlbGYuJGNsaXBTdHlsZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICAgICAgc2VsZi4kY2xpcFN0eWxlcy5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dC9jc3MnKTtcbiAgICAgICAgICAgIHNlbGYuJGNsaXBTdHlsZXMuc2V0QXR0cmlidXRlKCdpZCcsIGBqYXJhbGxheC1jbGlwLSR7c2VsZi5pbnN0YW5jZUlEfWApO1xuICAgICAgICAgICAgY29uc3QgaGVhZCA9IGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcbiAgICAgICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoc2VsZi4kY2xpcFN0eWxlcyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdHlsZXMgPSBgI2phcmFsbGF4LWNvbnRhaW5lci0ke3NlbGYuaW5zdGFuY2VJRH0ge1xuICAgICAgICAgICBjbGlwOiByZWN0KDAgJHt3aWR0aH1weCAke2hlaWdodH1weCAwKTtcbiAgICAgICAgICAgY2xpcDogcmVjdCgwLCAke3dpZHRofXB4LCAke2hlaWdodH1weCwgMCk7XG4gICAgICAgIH1gO1xuXG4gICAgICAgIC8vIGFkZCBjbGlwIHN0eWxlcyBpbmxpbmUgKHRoaXMgbWV0aG9kIG5lZWQgZm9yIHN1cHBvcnQgSUU4IGFuZCBsZXNzIGJyb3dzZXJzKVxuICAgICAgICBpZiAoc2VsZi4kY2xpcFN0eWxlcy5zdHlsZVNoZWV0KSB7XG4gICAgICAgICAgICBzZWxmLiRjbGlwU3R5bGVzLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHN0eWxlcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYuJGNsaXBTdHlsZXMuaW5uZXJIVE1MID0gc3R5bGVzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY292ZXJJbWFnZSgpIHtcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgY29uc3QgcmVjdCA9IHNlbGYuaW1hZ2UuJGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3QgY29udEggPSByZWN0LmhlaWdodDtcbiAgICAgICAgY29uc3QgeyBzcGVlZCB9ID0gc2VsZi5vcHRpb25zO1xuICAgICAgICBjb25zdCBpc1Njcm9sbCA9IHNlbGYub3B0aW9ucy50eXBlID09PSAnc2Nyb2xsJyB8fCBzZWxmLm9wdGlvbnMudHlwZSA9PT0gJ3Njcm9sbC1vcGFjaXR5JztcbiAgICAgICAgbGV0IHNjcm9sbERpc3QgPSAwO1xuICAgICAgICBsZXQgcmVzdWx0SCA9IGNvbnRIO1xuICAgICAgICBsZXQgcmVzdWx0TVQgPSAwO1xuXG4gICAgICAgIC8vIHNjcm9sbCBwYXJhbGxheFxuICAgICAgICBpZiAoaXNTY3JvbGwpIHtcbiAgICAgICAgICAgIC8vIHNjcm9sbCBkaXN0YW5jZSBhbmQgaGVpZ2h0IGZvciBpbWFnZVxuICAgICAgICAgICAgaWYgKHNwZWVkIDwgMCkge1xuICAgICAgICAgICAgICAgIHNjcm9sbERpc3QgPSBzcGVlZCAqIE1hdGgubWF4KGNvbnRILCB3bmRIKTtcblxuICAgICAgICAgICAgICAgIGlmICh3bmRIIDwgY29udEgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsRGlzdCAtPSBzcGVlZCAqIChjb250SCAtIHduZEgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsRGlzdCA9IHNwZWVkICogKGNvbnRIICsgd25kSCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHNpemUgZm9yIHNjcm9sbCBwYXJhbGxheFxuICAgICAgICAgICAgaWYgKHNwZWVkID4gMSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdEggPSBNYXRoLmFicyhzY3JvbGxEaXN0IC0gd25kSCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNwZWVkIDwgMCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdEggPSBzY3JvbGxEaXN0IC8gc3BlZWQgKyBNYXRoLmFicyhzY3JvbGxEaXN0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0SCArPSAod25kSCAtIGNvbnRIKSAqICgxIC0gc3BlZWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzY3JvbGxEaXN0IC89IDI7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzdG9yZSBzY3JvbGwgZGlzdGFuY2VcbiAgICAgICAgc2VsZi5wYXJhbGxheFNjcm9sbERpc3RhbmNlID0gc2Nyb2xsRGlzdDtcblxuICAgICAgICAvLyB2ZXJ0aWNhbCBjZW50ZXJcbiAgICAgICAgaWYgKGlzU2Nyb2xsKSB7XG4gICAgICAgICAgICByZXN1bHRNVCA9ICh3bmRIIC0gcmVzdWx0SCkgLyAyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0TVQgPSAoY29udEggLSByZXN1bHRIKSAvIDI7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhcHBseSByZXN1bHQgdG8gaXRlbVxuICAgICAgICBzZWxmLmNzcyhzZWxmLmltYWdlLiRpdGVtLCB7XG4gICAgICAgICAgICBoZWlnaHQ6IGAke3Jlc3VsdEh9cHhgLFxuICAgICAgICAgICAgbWFyZ2luVG9wOiBgJHtyZXN1bHRNVH1weGAsXG4gICAgICAgICAgICBsZWZ0OiBzZWxmLmltYWdlLnBvc2l0aW9uID09PSAnZml4ZWQnID8gYCR7cmVjdC5sZWZ0fXB4YCA6ICcwJyxcbiAgICAgICAgICAgIHdpZHRoOiBgJHtyZWN0LndpZHRofXB4YCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gY2FsbCBvbkNvdmVySW1hZ2UgZXZlbnRcbiAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5vbkNvdmVySW1hZ2UpIHtcbiAgICAgICAgICAgIHNlbGYub3B0aW9ucy5vbkNvdmVySW1hZ2UuY2FsbChzZWxmKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJldHVybiBzb21lIHVzZWZ1bCBkYXRhLiBVc2VkIGluIHRoZSB2aWRlbyBjb3ZlciBmdW5jdGlvblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW1hZ2U6IHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHJlc3VsdEgsXG4gICAgICAgICAgICAgICAgbWFyZ2luVG9wOiByZXN1bHRNVCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb250YWluZXI6IHJlY3QsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgaXNWaXNpYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0VsZW1lbnRJblZpZXdwb3J0IHx8IGZhbHNlO1xuICAgIH1cblxuICAgIG9uU2Nyb2xsKGZvcmNlKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIGNvbnN0IHJlY3QgPSBzZWxmLiRpdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCBjb250VCA9IHJlY3QudG9wO1xuICAgICAgICBjb25zdCBjb250SCA9IHJlY3QuaGVpZ2h0O1xuICAgICAgICBjb25zdCBzdHlsZXMgPSB7fTtcblxuICAgICAgICAvLyBjaGVjayBpZiBpbiB2aWV3cG9ydFxuICAgICAgICBsZXQgdmlld3BvcnRSZWN0ID0gcmVjdDtcbiAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5lbGVtZW50SW5WaWV3cG9ydCkge1xuICAgICAgICAgICAgdmlld3BvcnRSZWN0ID0gc2VsZi5vcHRpb25zLmVsZW1lbnRJblZpZXdwb3J0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuaXNFbGVtZW50SW5WaWV3cG9ydCA9IHZpZXdwb3J0UmVjdC5ib3R0b20gPj0gMFxuICAgICAgICAgICAgJiYgdmlld3BvcnRSZWN0LnJpZ2h0ID49IDBcbiAgICAgICAgICAgICYmIHZpZXdwb3J0UmVjdC50b3AgPD0gd25kSFxuICAgICAgICAgICAgJiYgdmlld3BvcnRSZWN0LmxlZnQgPD0gd25kVztcblxuICAgICAgICAvLyBzdG9wIGNhbGN1bGF0aW9ucyBpZiBpdGVtIGlzIG5vdCBpbiB2aWV3cG9ydFxuICAgICAgICBpZiAoZm9yY2UgPyBmYWxzZSA6ICFzZWxmLmlzRWxlbWVudEluVmlld3BvcnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNhbGN1bGF0ZSBwYXJhbGxheCBoZWxwaW5nIHZhcmlhYmxlc1xuICAgICAgICBjb25zdCBiZWZvcmVUb3AgPSBNYXRoLm1heCgwLCBjb250VCk7XG4gICAgICAgIGNvbnN0IGJlZm9yZVRvcEVuZCA9IE1hdGgubWF4KDAsIGNvbnRIICsgY29udFQpO1xuICAgICAgICBjb25zdCBhZnRlclRvcCA9IE1hdGgubWF4KDAsIC1jb250VCk7XG4gICAgICAgIGNvbnN0IGJlZm9yZUJvdHRvbSA9IE1hdGgubWF4KDAsIGNvbnRUICsgY29udEggLSB3bmRIKTtcbiAgICAgICAgY29uc3QgYmVmb3JlQm90dG9tRW5kID0gTWF0aC5tYXgoMCwgY29udEggLSAoY29udFQgKyBjb250SCAtIHduZEgpKTtcbiAgICAgICAgY29uc3QgYWZ0ZXJCb3R0b20gPSBNYXRoLm1heCgwLCAtY29udFQgKyB3bmRIIC0gY29udEgpO1xuICAgICAgICBjb25zdCBmcm9tVmlld3BvcnRDZW50ZXIgPSAxIC0gMiAqICh3bmRIIC0gY29udFQpIC8gKHduZEggKyBjb250SCk7XG5cbiAgICAgICAgLy8gY2FsY3VsYXRlIG9uIGhvdyBwZXJjZW50IG9mIHNlY3Rpb24gaXMgdmlzaWJsZVxuICAgICAgICBsZXQgdmlzaWJsZVBlcmNlbnQgPSAxO1xuICAgICAgICBpZiAoY29udEggPCB3bmRIKSB7XG4gICAgICAgICAgICB2aXNpYmxlUGVyY2VudCA9IDEgLSAoYWZ0ZXJUb3AgfHwgYmVmb3JlQm90dG9tKSAvIGNvbnRIO1xuICAgICAgICB9IGVsc2UgaWYgKGJlZm9yZVRvcEVuZCA8PSB3bmRIKSB7XG4gICAgICAgICAgICB2aXNpYmxlUGVyY2VudCA9IGJlZm9yZVRvcEVuZCAvIHduZEg7XG4gICAgICAgIH0gZWxzZSBpZiAoYmVmb3JlQm90dG9tRW5kIDw9IHduZEgpIHtcbiAgICAgICAgICAgIHZpc2libGVQZXJjZW50ID0gYmVmb3JlQm90dG9tRW5kIC8gd25kSDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG9wYWNpdHlcbiAgICAgICAgaWYgKHNlbGYub3B0aW9ucy50eXBlID09PSAnb3BhY2l0eScgfHwgc2VsZi5vcHRpb25zLnR5cGUgPT09ICdzY2FsZS1vcGFjaXR5JyB8fCBzZWxmLm9wdGlvbnMudHlwZSA9PT0gJ3Njcm9sbC1vcGFjaXR5Jykge1xuICAgICAgICAgICAgc3R5bGVzLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgwLDAsMCknO1xuICAgICAgICAgICAgc3R5bGVzLm9wYWNpdHkgPSB2aXNpYmxlUGVyY2VudDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNjYWxlXG4gICAgICAgIGlmIChzZWxmLm9wdGlvbnMudHlwZSA9PT0gJ3NjYWxlJyB8fCBzZWxmLm9wdGlvbnMudHlwZSA9PT0gJ3NjYWxlLW9wYWNpdHknKSB7XG4gICAgICAgICAgICBsZXQgc2NhbGUgPSAxO1xuICAgICAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5zcGVlZCA8IDApIHtcbiAgICAgICAgICAgICAgICBzY2FsZSAtPSBzZWxmLm9wdGlvbnMuc3BlZWQgKiB2aXNpYmxlUGVyY2VudDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2NhbGUgKz0gc2VsZi5vcHRpb25zLnNwZWVkICogKDEgLSB2aXNpYmxlUGVyY2VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdHlsZXMudHJhbnNmb3JtID0gYHNjYWxlKCR7c2NhbGV9KSB0cmFuc2xhdGUzZCgwLDAsMClgO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2Nyb2xsXG4gICAgICAgIGlmIChzZWxmLm9wdGlvbnMudHlwZSA9PT0gJ3Njcm9sbCcgfHwgc2VsZi5vcHRpb25zLnR5cGUgPT09ICdzY3JvbGwtb3BhY2l0eScpIHtcbiAgICAgICAgICAgIGxldCBwb3NpdGlvblkgPSBzZWxmLnBhcmFsbGF4U2Nyb2xsRGlzdGFuY2UgKiBmcm9tVmlld3BvcnRDZW50ZXI7XG5cbiAgICAgICAgICAgIC8vIGZpeCBpZiBwYXJhbGxheCBibG9jayBpbiBhYnNvbHV0ZSBwb3NpdGlvblxuICAgICAgICAgICAgaWYgKHNlbGYuaW1hZ2UucG9zaXRpb24gPT09ICdhYnNvbHV0ZScpIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvblkgLT0gY29udFQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN0eWxlcy50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoMCwke3Bvc2l0aW9uWX1weCwwKWA7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLmNzcyhzZWxmLmltYWdlLiRpdGVtLCBzdHlsZXMpO1xuXG4gICAgICAgIC8vIGNhbGwgb25TY3JvbGwgZXZlbnRcbiAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5vblNjcm9sbCkge1xuICAgICAgICAgICAgc2VsZi5vcHRpb25zLm9uU2Nyb2xsLmNhbGwoc2VsZiwge1xuICAgICAgICAgICAgICAgIHNlY3Rpb246IHJlY3QsXG5cbiAgICAgICAgICAgICAgICBiZWZvcmVUb3AsXG4gICAgICAgICAgICAgICAgYmVmb3JlVG9wRW5kLFxuICAgICAgICAgICAgICAgIGFmdGVyVG9wLFxuICAgICAgICAgICAgICAgIGJlZm9yZUJvdHRvbSxcbiAgICAgICAgICAgICAgICBiZWZvcmVCb3R0b21FbmQsXG4gICAgICAgICAgICAgICAgYWZ0ZXJCb3R0b20sXG5cbiAgICAgICAgICAgICAgICB2aXNpYmxlUGVyY2VudCxcbiAgICAgICAgICAgICAgICBmcm9tVmlld3BvcnRDZW50ZXIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uUmVzaXplKCkge1xuICAgICAgICB0aGlzLmNvdmVySW1hZ2UoKTtcbiAgICAgICAgdGhpcy5jbGlwQ29udGFpbmVyKCk7XG4gICAgfVxufVxuXG5cbi8vIGdsb2JhbCBkZWZpbml0aW9uXG5jb25zdCBwbHVnaW4gPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgICAvLyBjaGVjayBmb3IgZG9tIGVsZW1lbnRcbiAgICAvLyB0aGFua3M6IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzg0Mjg2L2phdmFzY3JpcHQtaXNkb20taG93LWRvLXlvdS1jaGVjay1pZi1hLWphdmFzY3JpcHQtb2JqZWN0LWlzLWEtZG9tLW9iamVjdFxuICAgIGlmICh0eXBlb2YgSFRNTEVsZW1lbnQgPT09ICdvYmplY3QnID8gaXRlbXMgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCA6IGl0ZW1zICYmIHR5cGVvZiBpdGVtcyA9PT0gJ29iamVjdCcgJiYgaXRlbXMgIT09IG51bGwgJiYgaXRlbXMubm9kZVR5cGUgPT09IDEgJiYgdHlwZW9mIGl0ZW1zLm5vZGVOYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICBpdGVtcyA9IFtpdGVtc107XG4gICAgfVxuXG4gICAgY29uc3Qgb3B0aW9ucyA9IGFyZ3VtZW50c1sxXTtcbiAgICBjb25zdCBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICBjb25zdCBsZW4gPSBpdGVtcy5sZW5ndGg7XG4gICAgbGV0IGsgPSAwO1xuICAgIGxldCByZXQ7XG5cbiAgICBmb3IgKGs7IGsgPCBsZW47IGsrKykge1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnIHx8IHR5cGVvZiBvcHRpb25zID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaWYgKCFpdGVtc1trXS5qYXJhbGxheCkge1xuICAgICAgICAgICAgICAgIGl0ZW1zW2tdLmphcmFsbGF4ID0gbmV3IEphcmFsbGF4KGl0ZW1zW2tdLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChpdGVtc1trXS5qYXJhbGxheCkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1zcHJlYWRcbiAgICAgICAgICAgIHJldCA9IGl0ZW1zW2tdLmphcmFsbGF4W29wdGlvbnNdLmFwcGx5KGl0ZW1zW2tdLmphcmFsbGF4LCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHJldCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaXRlbXM7XG59O1xucGx1Z2luLmNvbnN0cnVjdG9yID0gSmFyYWxsYXg7XG5cbmV4cG9ydCBkZWZhdWx0IHBsdWdpbjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\\n//# sourceURL=webpack-internal:///./node_modules/jarallax/src/jarallax.esm.js\\n\")},\"./node_modules/lite-ready/liteready.js\":\n/*!**********************************************!*\\\n  !*** ./node_modules/lite-ready/liteready.js ***!\n  \\**********************************************/\n/*! no static exports found */function(module,exports){eval(\"module.exports = function (callback) {\\r\\n\\r\\n\\tif (document.readyState === 'complete' || document.readyState === 'interactive') {\\r\\n\\t\\t// Already ready or interactive, execute callback\\r\\n\\t\\tcallback.call();\\r\\n\\t}\\r\\n\\telse if (document.attachEvent) {\\r\\n\\t\\t// Old browsers\\r\\n\\t\\tdocument.attachEvent('onreadystatechange', function () {\\r\\n\\t\\t\\tif (document.readyState === 'interactive')\\r\\n\\t\\t\\t\\tcallback.call();\\r\\n\\t\\t});\\r\\n\\t}\\r\\n\\telse if (document.addEventListener) {\\r\\n\\t\\t// Modern browsers\\r\\n\\t\\tdocument.addEventListener('DOMContentLoaded', callback);\\r\\n\\t}\\r\\n}\\r\\n//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbGl0ZS1yZWFkeS9saXRlcmVhZHkuanM/NzdlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL2xpdGUtcmVhZHkvbGl0ZXJlYWR5LmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuXHJcblx0aWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScgfHwgZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2ludGVyYWN0aXZlJykge1xyXG5cdFx0Ly8gQWxyZWFkeSByZWFkeSBvciBpbnRlcmFjdGl2ZSwgZXhlY3V0ZSBjYWxsYmFja1xyXG5cdFx0Y2FsbGJhY2suY2FsbCgpO1xyXG5cdH1cclxuXHRlbHNlIGlmIChkb2N1bWVudC5hdHRhY2hFdmVudCkge1xyXG5cdFx0Ly8gT2xkIGJyb3dzZXJzXHJcblx0XHRkb2N1bWVudC5hdHRhY2hFdmVudCgnb25yZWFkeXN0YXRlY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2ludGVyYWN0aXZlJylcclxuXHRcdFx0XHRjYWxsYmFjay5jYWxsKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0ZWxzZSBpZiAoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikge1xyXG5cdFx0Ly8gTW9kZXJuIGJyb3dzZXJzXHJcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgY2FsbGJhY2spO1xyXG5cdH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9\\n//# sourceURL=webpack-internal:///./node_modules/lite-ready/liteready.js\\n\")},\"./node_modules/rafl/index.js\":\n/*!************************************!*\\\n  !*** ./node_modules/rafl/index.js ***!\n  \\************************************/\n/*! no static exports found */function(module,exports,__webpack_require__){eval('var global = __webpack_require__(/*! global */ \"./node_modules/rafl/node_modules/global/window.js\")\\n\\n/**\\n * `requestAnimationFrame()`\\n */\\n\\nvar request = global.requestAnimationFrame\\n  || global.webkitRequestAnimationFrame\\n  || global.mozRequestAnimationFrame\\n  || fallback\\n\\nvar prev = +new Date\\nfunction fallback (fn) {\\n  var curr = +new Date\\n  var ms = Math.max(0, 16 - (curr - prev))\\n  var req = setTimeout(fn, ms)\\n  return prev = curr, req\\n}\\n\\n/**\\n * `cancelAnimationFrame()`\\n */\\n\\nvar cancel = global.cancelAnimationFrame\\n  || global.webkitCancelAnimationFrame\\n  || global.mozCancelAnimationFrame\\n  || clearTimeout\\n\\nif (Function.prototype.bind) {\\n  request = request.bind(global)\\n  cancel = cancel.bind(global)\\n}\\n\\nexports = module.exports = request\\nexports.cancel = cancel\\n//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmFmbC9pbmRleC5qcz8wYmMyIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGFBQWEsbUJBQU8sQ0FBQyxpRUFBUTs7QUFFN0I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3JhZmwvaW5kZXguanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnZ2xvYmFsJylcblxuLyoqXG4gKiBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKClgXG4gKi9cblxudmFyIHJlcXVlc3QgPSBnbG9iYWwucmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gIHx8IGdsb2JhbC53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgfHwgZ2xvYmFsLm1velJlcXVlc3RBbmltYXRpb25GcmFtZVxuICB8fCBmYWxsYmFja1xuXG52YXIgcHJldiA9ICtuZXcgRGF0ZVxuZnVuY3Rpb24gZmFsbGJhY2sgKGZuKSB7XG4gIHZhciBjdXJyID0gK25ldyBEYXRlXG4gIHZhciBtcyA9IE1hdGgubWF4KDAsIDE2IC0gKGN1cnIgLSBwcmV2KSlcbiAgdmFyIHJlcSA9IHNldFRpbWVvdXQoZm4sIG1zKVxuICByZXR1cm4gcHJldiA9IGN1cnIsIHJlcVxufVxuXG4vKipcbiAqIGBjYW5jZWxBbmltYXRpb25GcmFtZSgpYFxuICovXG5cbnZhciBjYW5jZWwgPSBnbG9iYWwuY2FuY2VsQW5pbWF0aW9uRnJhbWVcbiAgfHwgZ2xvYmFsLndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lXG4gIHx8IGdsb2JhbC5tb3pDYW5jZWxBbmltYXRpb25GcmFtZVxuICB8fCBjbGVhclRpbWVvdXRcblxuaWYgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kKSB7XG4gIHJlcXVlc3QgPSByZXF1ZXN0LmJpbmQoZ2xvYmFsKVxuICBjYW5jZWwgPSBjYW5jZWwuYmluZChnbG9iYWwpXG59XG5cbmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVlc3RcbmV4cG9ydHMuY2FuY2VsID0gY2FuY2VsXG4iXSwic291cmNlUm9vdCI6IiJ9\\n//# sourceURL=webpack-internal:///./node_modules/rafl/index.js\\n')},\"./node_modules/rafl/node_modules/global/window.js\":\n/*!*********************************************************!*\\\n  !*** ./node_modules/rafl/node_modules/global/window.js ***!\n  \\*********************************************************/\n/*! no static exports found */function(module,exports,__webpack_require__){eval('/* WEBPACK VAR INJECTION */(function(global) {var win;\\n\\nif (typeof window !== \"undefined\") {\\n    win = window;\\n} else if (typeof global !== \"undefined\") {\\n    win = global;\\n} else if (typeof self !== \"undefined\"){\\n    win = self;\\n} else {\\n    win = {};\\n}\\n\\nmodule.exports = win;\\n\\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmFmbC9ub2RlX21vZHVsZXMvZ2xvYmFsL3dpbmRvdy5qcz9hNjdjIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQTs7QUFFQSIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy9yYWZsL25vZGVfbW9kdWxlcy9nbG9iYWwvd2luZG93LmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHdpbjtcblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB3aW4gPSB3aW5kb3c7XG59IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB3aW4gPSBnbG9iYWw7XG59IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiKXtcbiAgICB3aW4gPSBzZWxmO1xufSBlbHNlIHtcbiAgICB3aW4gPSB7fTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB3aW47XG4iXSwic291cmNlUm9vdCI6IiJ9\\n//# sourceURL=webpack-internal:///./node_modules/rafl/node_modules/global/window.js\\n')},\"./node_modules/video-worker/src/video-worker.esm.js\":\n/*!***********************************************************!*\\\n  !*** ./node_modules/video-worker/src/video-worker.esm.js ***!\n  \\***********************************************************/\n/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\"default\\\", function() { return VideoWorker; });\\n/* harmony import */ var global__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! global */ \\\"./node_modules/global/window.js\\\");\\n/* harmony import */ var global__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(global__WEBPACK_IMPORTED_MODULE_0__);\\n\\n\\n// Deferred\\n// thanks http://stackoverflow.com/questions/18096715/implement-deferred-object-without-using-jquery\\nfunction Deferred() {\\n    this.doneCallbacks = [];\\n    this.failCallbacks = [];\\n}\\n\\nDeferred.prototype = {\\n    execute( list, args ) {\\n        let i = list.length;\\n        args = Array.prototype.slice.call( args );\\n\\n        while ( i ) {\\n            i -= 1;\\n            list[ i ].apply( null, args );\\n        }\\n    },\\n    resolve( ...args ) {\\n        this.execute( this.doneCallbacks, args );\\n    },\\n    reject( ...args ) {\\n        this.execute( this.failCallbacks, args );\\n    },\\n    done( callback ) {\\n        this.doneCallbacks.push( callback );\\n    },\\n    fail( callback ) {\\n        this.failCallbacks.push( callback );\\n    },\\n};\\n\\nlet ID = 0;\\nlet YoutubeAPIadded = 0;\\nlet VimeoAPIadded = 0;\\nlet loadingYoutubePlayer = 0;\\nlet loadingVimeoPlayer = 0;\\nconst loadingYoutubeDefer = new Deferred();\\nconst loadingVimeoDefer = new Deferred();\\n\\nclass VideoWorker {\\n    constructor( url, options ) {\\n        const self = this;\\n\\n        self.url = url;\\n\\n        self.options_default = {\\n            autoplay: false,\\n            loop: false,\\n            mute: false,\\n            volume: 100,\\n            showControls: true,\\n            accessibilityHidden: false,\\n\\n            // start / end video time in seconds\\n            startTime: 0,\\n            endTime: 0,\\n        };\\n\\n        self.options = self.extend( {}, self.options_default, options );\\n\\n        // Fix wrong option name.\\n        // Thanks to https://github.com/nk-o/video-worker/issues/13.\\n        if ( 'undefined' !== typeof self.options.showContols ) {\\n            self.options.showControls = self.options.showContols;\\n            delete self.options.showContols;\\n        }\\n\\n        // check URL\\n        self.videoID = self.parseURL( url );\\n\\n        // init\\n        if ( self.videoID ) {\\n            self.ID = ID;\\n            ID += 1;\\n            self.loadAPI();\\n            self.init();\\n        }\\n    }\\n\\n    // Extend like jQuery.extend\\n    // eslint-disable-next-line class-methods-use-this\\n    extend( ...args ) {\\n        const out = args[ 0 ] || {};\\n\\n        Object.keys( args ).forEach( ( i ) => {\\n            if ( ! args[ i ] ) {\\n                return;\\n            }\\n            Object.keys( args[ i ] ).forEach( ( key ) => {\\n                out[ key ] = args[ i ][ key ];\\n            } );\\n        } );\\n\\n        return out;\\n    }\\n\\n    parseURL( url ) {\\n        // parse youtube ID\\n        function getYoutubeID( ytUrl ) {\\n            // eslint-disable-next-line no-useless-escape\\n            const regExp = /.*(?:youtu.be\\\\/|v\\\\/|u\\\\/\\\\w\\\\/|embed\\\\/|watch\\\\?v=)([^#\\\\&\\\\?]*).*/;\\n            const match = ytUrl.match( regExp );\\n            return match && 11 === match[ 1 ].length ? match[ 1 ] : false;\\n        }\\n\\n        // parse vimeo ID\\n        function getVimeoID( vmUrl ) {\\n            // eslint-disable-next-line no-useless-escape\\n            const regExp = /https?:\\\\/\\\\/(?:www\\\\.|player\\\\.)?vimeo.com\\\\/(?:channels\\\\/(?:\\\\w+\\\\/)?|groups\\\\/([^\\\\/]*)\\\\/videos\\\\/|album\\\\/(\\\\d+)\\\\/video\\\\/|video\\\\/|)(\\\\d+)(?:$|\\\\/|\\\\?)/;\\n            const match = vmUrl.match( regExp );\\n            return match && match[ 3 ] ? match[ 3 ] : false;\\n        }\\n\\n        // parse local string\\n        function getLocalVideos( locUrl ) {\\n            // eslint-disable-next-line no-useless-escape\\n            const videoFormats = locUrl.split( /,(?=mp4\\\\:|webm\\\\:|ogv\\\\:|ogg\\\\:)/ );\\n            const result = {};\\n            let ready = 0;\\n            videoFormats.forEach( ( val ) => {\\n                // eslint-disable-next-line no-useless-escape\\n                const match = val.match( /^(mp4|webm|ogv|ogg)\\\\:(.*)/ );\\n                if ( match && match[ 1 ] && match[ 2 ] ) {\\n                    // eslint-disable-next-line prefer-destructuring\\n                    result[ 'ogv' === match[ 1 ] ? 'ogg' : match[ 1 ] ] = match[ 2 ];\\n                    ready = 1;\\n                }\\n            } );\\n            return ready ? result : false;\\n        }\\n\\n        const Youtube = getYoutubeID( url );\\n        const Vimeo = getVimeoID( url );\\n        const Local = getLocalVideos( url );\\n\\n        if ( Youtube ) {\\n            this.type = 'youtube';\\n            return Youtube;\\n        }\\n\\n        if ( Vimeo ) {\\n            this.type = 'vimeo';\\n            return Vimeo;\\n        }\\n\\n        if ( Local ) {\\n            this.type = 'local';\\n            return Local;\\n        }\\n\\n        return false;\\n    }\\n\\n    isValid() {\\n        return !! this.videoID;\\n    }\\n\\n    // events\\n    on( name, callback ) {\\n        this.userEventsList = this.userEventsList || [];\\n\\n        // add new callback in events list\\n        ( this.userEventsList[ name ] || ( this.userEventsList[ name ] = [] ) ).push( callback );\\n    }\\n\\n    off( name, callback ) {\\n        if ( ! this.userEventsList || ! this.userEventsList[ name ] ) {\\n            return;\\n        }\\n\\n        if ( ! callback ) {\\n            delete this.userEventsList[ name ];\\n        } else {\\n            this.userEventsList[ name ].forEach( ( val, key ) => {\\n                if ( val === callback ) {\\n                    this.userEventsList[ name ][ key ] = false;\\n                }\\n            } );\\n        }\\n    }\\n\\n    fire( name, ...args ) {\\n        if ( this.userEventsList && 'undefined' !== typeof this.userEventsList[ name ] ) {\\n            this.userEventsList[ name ].forEach( ( val ) => {\\n                // call with all arguments\\n                if ( val ) {\\n                    val.apply( this, args );\\n                }\\n            } );\\n        }\\n    }\\n\\n    play( start ) {\\n        const self = this;\\n        if ( ! self.player ) {\\n            return;\\n        }\\n\\n        if ( 'youtube' === self.type && self.player.playVideo ) {\\n            if ( 'undefined' !== typeof start ) {\\n                self.player.seekTo( start || 0 );\\n            }\\n            if ( global__WEBPACK_IMPORTED_MODULE_0___default.a.YT.PlayerState.PLAYING !== self.player.getPlayerState() ) {\\n                self.player.playVideo();\\n            }\\n        }\\n\\n        if ( 'vimeo' === self.type ) {\\n            if ( 'undefined' !== typeof start ) {\\n                self.player.setCurrentTime( start );\\n            }\\n            self.player.getPaused().then( ( paused ) => {\\n                if ( paused ) {\\n                    self.player.play();\\n                }\\n            } );\\n        }\\n\\n        if ( 'local' === self.type ) {\\n            if ( 'undefined' !== typeof start ) {\\n                self.player.currentTime = start;\\n            }\\n            if ( self.player.paused ) {\\n                self.player.play();\\n            }\\n        }\\n    }\\n\\n    pause() {\\n        const self = this;\\n        if ( ! self.player ) {\\n            return;\\n        }\\n\\n        if ( 'youtube' === self.type && self.player.pauseVideo ) {\\n            if ( global__WEBPACK_IMPORTED_MODULE_0___default.a.YT.PlayerState.PLAYING === self.player.getPlayerState() ) {\\n                self.player.pauseVideo();\\n            }\\n        }\\n\\n        if ( 'vimeo' === self.type ) {\\n            self.player.getPaused().then( ( paused ) => {\\n                if ( ! paused ) {\\n                    self.player.pause();\\n                }\\n            } );\\n        }\\n\\n        if ( 'local' === self.type ) {\\n            if ( ! self.player.paused ) {\\n                self.player.pause();\\n            }\\n        }\\n    }\\n\\n    mute() {\\n        const self = this;\\n        if ( ! self.player ) {\\n            return;\\n        }\\n\\n        if ( 'youtube' === self.type && self.player.mute ) {\\n            self.player.mute();\\n        }\\n\\n        if ( 'vimeo' === self.type && self.player.setVolume ) {\\n            self.player.setVolume( 0 );\\n        }\\n\\n        if ( 'local' === self.type ) {\\n            self.$video.muted = true;\\n        }\\n    }\\n\\n    unmute() {\\n        const self = this;\\n        if ( ! self.player ) {\\n            return;\\n        }\\n\\n        if ( 'youtube' === self.type && self.player.mute ) {\\n            self.player.unMute();\\n        }\\n\\n        if ( 'vimeo' === self.type && self.player.setVolume ) {\\n            self.player.setVolume( self.options.volume );\\n        }\\n\\n        if ( 'local' === self.type ) {\\n            self.$video.muted = false;\\n        }\\n    }\\n\\n    setVolume( volume = false ) {\\n        const self = this;\\n        if ( ! self.player || ! volume ) {\\n            return;\\n        }\\n\\n        if ( 'youtube' === self.type && self.player.setVolume ) {\\n            self.player.setVolume( volume );\\n        }\\n\\n        if ( 'vimeo' === self.type && self.player.setVolume ) {\\n            self.player.setVolume( volume );\\n        }\\n\\n        if ( 'local' === self.type ) {\\n            self.$video.volume = volume / 100;\\n        }\\n    }\\n\\n    getVolume( callback ) {\\n        const self = this;\\n        if ( ! self.player ) {\\n            callback( false );\\n            return;\\n        }\\n\\n        if ( 'youtube' === self.type && self.player.getVolume ) {\\n            callback( self.player.getVolume() );\\n        }\\n\\n        if ( 'vimeo' === self.type && self.player.getVolume ) {\\n            self.player.getVolume().then( ( volume ) => {\\n                callback( volume );\\n            } );\\n        }\\n\\n        if ( 'local' === self.type ) {\\n            callback( self.$video.volume * 100 );\\n        }\\n    }\\n\\n    getMuted( callback ) {\\n        const self = this;\\n        if ( ! self.player ) {\\n            callback( null );\\n            return;\\n        }\\n\\n        if ( 'youtube' === self.type && self.player.isMuted ) {\\n            callback( self.player.isMuted() );\\n        }\\n\\n        if ( 'vimeo' === self.type && self.player.getVolume ) {\\n            self.player.getVolume().then( ( volume ) => {\\n                callback( !! volume );\\n            } );\\n        }\\n\\n        if ( 'local' === self.type ) {\\n            callback( self.$video.muted );\\n        }\\n    }\\n\\n    getImageURL( callback ) {\\n        const self = this;\\n\\n        if ( self.videoImage ) {\\n            callback( self.videoImage );\\n            return;\\n        }\\n\\n        if ( 'youtube' === self.type ) {\\n            const availableSizes = [\\n                'maxresdefault',\\n                'sddefault',\\n                'hqdefault',\\n                '0',\\n            ];\\n            let step = 0;\\n\\n            const tempImg = new Image();\\n            tempImg.onload = function() {\\n                // if no thumbnail, youtube add their own image with width = 120px\\n                if ( 120 !== ( this.naturalWidth || this.width ) || step === availableSizes.length - 1 ) {\\n                    // ok\\n                    self.videoImage = `https://img.youtube.com/vi/${ self.videoID }/${ availableSizes[ step ] }.jpg`;\\n                    callback( self.videoImage );\\n                } else {\\n                    // try another size\\n                    step += 1;\\n                    this.src = `https://img.youtube.com/vi/${ self.videoID }/${ availableSizes[ step ] }.jpg`;\\n                }\\n            };\\n            tempImg.src = `https://img.youtube.com/vi/${ self.videoID }/${ availableSizes[ step ] }.jpg`;\\n        }\\n\\n        if ( 'vimeo' === self.type ) {\\n            let request = new XMLHttpRequest();\\n            request.open( 'GET', `https://vimeo.com/api/v2/video/${ self.videoID }.json`, true );\\n            request.onreadystatechange = function() {\\n                if ( 4 === this.readyState ) {\\n                    if ( 200 <= this.status && 400 > this.status ) {\\n                        // Success!\\n                        const response = JSON.parse( this.responseText );\\n                        self.videoImage = response[ 0 ].thumbnail_large;\\n                        callback( self.videoImage );\\n                    } else {\\n                        // Error :(\\n                    }\\n                }\\n            };\\n            request.send();\\n            request = null;\\n        }\\n    }\\n\\n    // fallback to the old version.\\n    getIframe( callback ) {\\n        this.getVideo( callback );\\n    }\\n\\n    getVideo( callback ) {\\n        const self = this;\\n\\n        // return generated video block\\n        if ( self.$video ) {\\n            callback( self.$video );\\n            return;\\n        }\\n\\n        // generate new video block\\n        self.onAPIready( () => {\\n            let hiddenDiv;\\n            if ( ! self.$video ) {\\n                hiddenDiv = document.createElement( 'div' );\\n                hiddenDiv.style.display = 'none';\\n            }\\n\\n            // Youtube\\n            if ( 'youtube' === self.type ) {\\n                self.playerOptions = {\\n                    // GDPR Compliance.\\n                    host: 'https://www.youtube-nocookie.com',\\n                    videoId: self.videoID,\\n                    playerVars: {\\n                        autohide: 1,\\n                        rel: 0,\\n                        autoplay: 0,\\n                        // autoplay enable on mobile devices\\n                        playsinline: 1,\\n                    },\\n                };\\n\\n                // hide controls\\n                if ( ! self.options.showControls ) {\\n                    self.playerOptions.playerVars.iv_load_policy = 3;\\n                    self.playerOptions.playerVars.modestbranding = 1;\\n                    self.playerOptions.playerVars.controls = 0;\\n                    self.playerOptions.playerVars.showinfo = 0;\\n                    self.playerOptions.playerVars.disablekb = 1;\\n                }\\n\\n                // events\\n                let ytStarted;\\n                let ytProgressInterval;\\n                self.playerOptions.events = {\\n                    onReady( e ) {\\n                        // mute\\n                        if ( self.options.mute ) {\\n                            e.target.mute();\\n                        } else if ( self.options.volume ) {\\n                            e.target.setVolume( self.options.volume );\\n                        }\\n\\n                        // autoplay\\n                        if ( self.options.autoplay ) {\\n                            self.play( self.options.startTime );\\n                        }\\n                        self.fire( 'ready', e );\\n\\n                        // For seamless loops, set the endTime to 0.1 seconds less than the video's duration\\n                        // https://github.com/nk-o/video-worker/issues/2\\n                        if ( self.options.loop && ! self.options.endTime ) {\\n                            const secondsOffset = 0.1;\\n                            self.options.endTime = self.player.getDuration() - secondsOffset;\\n                        }\\n\\n                        // volumechange\\n                        setInterval( () => {\\n                            self.getVolume( ( volume ) => {\\n                                if ( self.options.volume !== volume ) {\\n                                    self.options.volume = volume;\\n                                    self.fire( 'volumechange', e );\\n                                }\\n                            } );\\n                        }, 150 );\\n                    },\\n                    onStateChange( e ) {\\n                        // loop\\n                        if ( self.options.loop && e.data === global__WEBPACK_IMPORTED_MODULE_0___default.a.YT.PlayerState.ENDED ) {\\n                            self.play( self.options.startTime );\\n                        }\\n                        if ( ! ytStarted && e.data === global__WEBPACK_IMPORTED_MODULE_0___default.a.YT.PlayerState.PLAYING ) {\\n                            ytStarted = 1;\\n                            self.fire( 'started', e );\\n                        }\\n                        if ( e.data === global__WEBPACK_IMPORTED_MODULE_0___default.a.YT.PlayerState.PLAYING ) {\\n                            self.fire( 'play', e );\\n                        }\\n                        if ( e.data === global__WEBPACK_IMPORTED_MODULE_0___default.a.YT.PlayerState.PAUSED ) {\\n                            self.fire( 'pause', e );\\n                        }\\n                        if ( e.data === global__WEBPACK_IMPORTED_MODULE_0___default.a.YT.PlayerState.ENDED ) {\\n                            self.fire( 'ended', e );\\n                        }\\n\\n                        // progress check\\n                        if ( e.data === global__WEBPACK_IMPORTED_MODULE_0___default.a.YT.PlayerState.PLAYING ) {\\n                            ytProgressInterval = setInterval( () => {\\n                                self.fire( 'timeupdate', e );\\n\\n                                // check for end of video and play again or stop\\n                                if ( self.options.endTime && self.player.getCurrentTime() >= self.options.endTime ) {\\n                                    if ( self.options.loop ) {\\n                                        self.play( self.options.startTime );\\n                                    } else {\\n                                        self.pause();\\n                                    }\\n                                }\\n                            }, 150 );\\n                        } else {\\n                            clearInterval( ytProgressInterval );\\n                        }\\n                    },\\n                    onError( e ) {\\n                        self.fire( 'error', e );\\n                    },\\n                };\\n\\n                const firstInit = ! self.$video;\\n                if ( firstInit ) {\\n                    const div = document.createElement( 'div' );\\n                    div.setAttribute( 'id', self.playerID );\\n                    hiddenDiv.appendChild( div );\\n                    document.body.appendChild( hiddenDiv );\\n                }\\n                self.player = self.player || new global__WEBPACK_IMPORTED_MODULE_0___default.a.YT.Player( self.playerID, self.playerOptions );\\n                if ( firstInit ) {\\n                    self.$video = document.getElementById( self.playerID );\\n\\n                    // add accessibility attributes\\n                    if ( self.options.accessibilityHidden ) {\\n                        self.$video.setAttribute( 'tabindex', '-1' );\\n                        self.$video.setAttribute( 'aria-hidden', 'true' );\\n                    }\\n\\n                    // get video width and height\\n                    self.videoWidth = parseInt( self.$video.getAttribute( 'width' ), 10 ) || 1280;\\n                    self.videoHeight = parseInt( self.$video.getAttribute( 'height' ), 10 ) || 720;\\n                }\\n            }\\n\\n            // Vimeo\\n            if ( 'vimeo' === self.type ) {\\n                self.playerOptions = {\\n                    // GDPR Compliance.\\n                    dnt: 1,\\n                    id: self.videoID,\\n                    autopause: 0,\\n                    transparent: 0,\\n                    autoplay: self.options.autoplay ? 1 : 0,\\n                    loop: self.options.loop ? 1 : 0,\\n                    muted: self.options.mute ? 1 : 0,\\n                };\\n\\n                if ( self.options.volume ) {\\n                    self.playerOptions.volume = self.options.volume;\\n                }\\n\\n                // hide controls\\n                if ( ! self.options.showControls ) {\\n                    self.playerOptions.badge = 0;\\n                    self.playerOptions.byline = 0;\\n                    self.playerOptions.portrait = 0;\\n                    self.playerOptions.title = 0;\\n                    self.playerOptions.background = 1;\\n                }\\n\\n                if ( ! self.$video ) {\\n                    let playerOptionsString = '';\\n                    Object.keys( self.playerOptions ).forEach( ( key ) => {\\n                        if ( '' !== playerOptionsString ) {\\n                            playerOptionsString += '&';\\n                        }\\n                        playerOptionsString += `${ key }=${ encodeURIComponent( self.playerOptions[ key ] ) }`;\\n                    } );\\n\\n                    // we need to create iframe manually because when we create it using API\\n                    // js events won't triggers after iframe moved to another place\\n                    self.$video = document.createElement( 'iframe' );\\n                    self.$video.setAttribute( 'id', self.playerID );\\n                    self.$video.setAttribute( 'src', `https://player.vimeo.com/video/${ self.videoID }?${ playerOptionsString }` );\\n                    self.$video.setAttribute( 'frameborder', '0' );\\n                    self.$video.setAttribute( 'mozallowfullscreen', '' );\\n                    self.$video.setAttribute( 'allowfullscreen', '' );\\n                    self.$video.setAttribute( 'title', 'Vimeo video player' );\\n\\n                    // add accessibility attributes\\n                    if ( self.options.accessibilityHidden ) {\\n                        self.$video.setAttribute( 'tabindex', '-1' );\\n                        self.$video.setAttribute( 'aria-hidden', 'true' );\\n                    }\\n\\n                    hiddenDiv.appendChild( self.$video );\\n                    document.body.appendChild( hiddenDiv );\\n                }\\n                self.player = self.player || new global__WEBPACK_IMPORTED_MODULE_0___default.a.Vimeo.Player( self.$video, self.playerOptions );\\n\\n                // set current time for autoplay\\n                if ( self.options.startTime && self.options.autoplay ) {\\n                    self.player.setCurrentTime( self.options.startTime );\\n                }\\n\\n                // get video width and height\\n                self.player.getVideoWidth().then( ( width ) => {\\n                    self.videoWidth = width || 1280;\\n                } );\\n                self.player.getVideoHeight().then( ( height ) => {\\n                    self.videoHeight = height || 720;\\n                } );\\n\\n                // events\\n                let vmStarted;\\n                self.player.on( 'timeupdate', ( e ) => {\\n                    if ( ! vmStarted ) {\\n                        self.fire( 'started', e );\\n                        vmStarted = 1;\\n                    }\\n\\n                    self.fire( 'timeupdate', e );\\n\\n                    // check for end of video and play again or stop\\n                    if ( self.options.endTime ) {\\n                        if ( self.options.endTime && e.seconds >= self.options.endTime ) {\\n                            if ( self.options.loop ) {\\n                                self.play( self.options.startTime );\\n                            } else {\\n                                self.pause();\\n                            }\\n                        }\\n                    }\\n                } );\\n                self.player.on( 'play', ( e ) => {\\n                    self.fire( 'play', e );\\n\\n                    // check for the start time and start with it\\n                    if ( self.options.startTime && 0 === e.seconds ) {\\n                        self.play( self.options.startTime );\\n                    }\\n                } );\\n                self.player.on( 'pause', ( e ) => {\\n                    self.fire( 'pause', e );\\n                } );\\n                self.player.on( 'ended', ( e ) => {\\n                    self.fire( 'ended', e );\\n                } );\\n                self.player.on( 'loaded', ( e ) => {\\n                    self.fire( 'ready', e );\\n                } );\\n                self.player.on( 'volumechange', ( e ) => {\\n                    self.fire( 'volumechange', e );\\n                } );\\n                self.player.on( 'error', ( e ) => {\\n                    self.fire( 'error', e );\\n                } );\\n            }\\n\\n            // Local\\n            function addSourceToLocal( element, src, type ) {\\n                const source = document.createElement( 'source' );\\n                source.src = src;\\n                source.type = type;\\n                element.appendChild( source );\\n            }\\n            if ( 'local' === self.type ) {\\n                if ( ! self.$video ) {\\n                    self.$video = document.createElement( 'video' );\\n\\n                    // show controls\\n                    if ( self.options.showControls ) {\\n                        self.$video.controls = true;\\n                    }\\n\\n                    // mute\\n                    if ( self.options.mute ) {\\n                        self.$video.muted = true;\\n                    } else if ( self.$video.volume ) {\\n                        self.$video.volume = self.options.volume / 100;\\n                    }\\n\\n                    // loop\\n                    if ( self.options.loop ) {\\n                        self.$video.loop = true;\\n                    }\\n\\n                    // autoplay enable on mobile devices\\n                    self.$video.setAttribute( 'playsinline', '' );\\n                    self.$video.setAttribute( 'webkit-playsinline', '' );\\n\\n                    // add accessibility attributes\\n                    if ( self.options.accessibilityHidden ) {\\n                        self.$video.setAttribute( 'tabindex', '-1' );\\n                        self.$video.setAttribute( 'aria-hidden', 'true' );\\n                    }\\n\\n                    self.$video.setAttribute( 'id', self.playerID );\\n                    hiddenDiv.appendChild( self.$video );\\n                    document.body.appendChild( hiddenDiv );\\n\\n                    Object.keys( self.videoID ).forEach( ( key ) => {\\n                        addSourceToLocal( self.$video, self.videoID[ key ], `video/${ key }` );\\n                    } );\\n                }\\n\\n                self.player = self.player || self.$video;\\n\\n                let locStarted;\\n                self.player.addEventListener( 'playing', ( e ) => {\\n                    if ( ! locStarted ) {\\n                        self.fire( 'started', e );\\n                    }\\n                    locStarted = 1;\\n                } );\\n                self.player.addEventListener( 'timeupdate', function( e ) {\\n                    self.fire( 'timeupdate', e );\\n\\n                    // check for end of video and play again or stop\\n                    if ( self.options.endTime ) {\\n                        if ( self.options.endTime && this.currentTime >= self.options.endTime ) {\\n                            if ( self.options.loop ) {\\n                                self.play( self.options.startTime );\\n                            } else {\\n                                self.pause();\\n                            }\\n                        }\\n                    }\\n                } );\\n                self.player.addEventListener( 'play', ( e ) => {\\n                    self.fire( 'play', e );\\n                } );\\n                self.player.addEventListener( 'pause', ( e ) => {\\n                    self.fire( 'pause', e );\\n                } );\\n                self.player.addEventListener( 'ended', ( e ) => {\\n                    self.fire( 'ended', e );\\n                } );\\n                self.player.addEventListener( 'loadedmetadata', function() {\\n                    // get video width and height\\n                    self.videoWidth = this.videoWidth || 1280;\\n                    self.videoHeight = this.videoHeight || 720;\\n\\n                    self.fire( 'ready' );\\n\\n                    // autoplay\\n                    if ( self.options.autoplay ) {\\n                        self.play( self.options.startTime );\\n                    }\\n                } );\\n                self.player.addEventListener( 'volumechange', ( e ) => {\\n                    self.getVolume( ( volume ) => {\\n                        self.options.volume = volume;\\n                    } );\\n                    self.fire( 'volumechange', e );\\n                } );\\n                self.player.addEventListener( 'error', ( e ) => {\\n                    self.fire( 'error', e );\\n                } );\\n            }\\n            callback( self.$video );\\n        } );\\n    }\\n\\n    init() {\\n        const self = this;\\n\\n        self.playerID = `VideoWorker-${ self.ID }`;\\n    }\\n\\n    loadAPI() {\\n        const self = this;\\n\\n        if ( YoutubeAPIadded && VimeoAPIadded ) {\\n            return;\\n        }\\n\\n        let src = '';\\n\\n        // load Youtube API\\n        if ( 'youtube' === self.type && ! YoutubeAPIadded ) {\\n            YoutubeAPIadded = 1;\\n            src = 'https://www.youtube.com/iframe_api';\\n        }\\n\\n        // load Vimeo API\\n        if ( 'vimeo' === self.type && ! VimeoAPIadded ) {\\n            VimeoAPIadded = 1;\\n\\n            // Useful when Vimeo API added using RequireJS https://github.com/nk-o/video-worker/pull/7\\n            if ( 'undefined' !== typeof global__WEBPACK_IMPORTED_MODULE_0___default.a.Vimeo ) {\\n                return;\\n            }\\n\\n            src = 'https://player.vimeo.com/api/player.js';\\n        }\\n\\n        if ( ! src ) {\\n            return;\\n        }\\n\\n        // add script in head section\\n        let tag = document.createElement( 'script' );\\n        let head = document.getElementsByTagName( 'head' )[ 0 ];\\n        tag.src = src;\\n\\n        head.appendChild( tag );\\n\\n        head = null;\\n        tag = null;\\n    }\\n\\n    onAPIready( callback ) {\\n        const self = this;\\n\\n        // Youtube\\n        if ( 'youtube' === self.type ) {\\n            // Listen for global YT player callback\\n            if ( ( 'undefined' === typeof global__WEBPACK_IMPORTED_MODULE_0___default.a.YT || 0 === global__WEBPACK_IMPORTED_MODULE_0___default.a.YT.loaded ) && ! loadingYoutubePlayer ) {\\n                // Prevents Ready event from being called twice\\n                loadingYoutubePlayer = 1;\\n\\n                // Creates deferred so, other players know when to wait.\\n                window.onYouTubeIframeAPIReady = function() {\\n                    window.onYouTubeIframeAPIReady = null;\\n                    loadingYoutubeDefer.resolve( 'done' );\\n                    callback();\\n                };\\n            } else if ( 'object' === typeof global__WEBPACK_IMPORTED_MODULE_0___default.a.YT && 1 === global__WEBPACK_IMPORTED_MODULE_0___default.a.YT.loaded ) {\\n                callback();\\n            } else {\\n                loadingYoutubeDefer.done( () => {\\n                    callback();\\n                } );\\n            }\\n        }\\n\\n        // Vimeo\\n        if ( 'vimeo' === self.type ) {\\n            if ( 'undefined' === typeof global__WEBPACK_IMPORTED_MODULE_0___default.a.Vimeo && ! loadingVimeoPlayer ) {\\n                loadingVimeoPlayer = 1;\\n                const vimeoInterval = setInterval( () => {\\n                    if ( 'undefined' !== typeof global__WEBPACK_IMPORTED_MODULE_0___default.a.Vimeo ) {\\n                        clearInterval( vimeoInterval );\\n                        loadingVimeoDefer.resolve( 'done' );\\n                        callback();\\n                    }\\n                }, 20 );\\n            } else if ( 'undefined' !== typeof global__WEBPACK_IMPORTED_MODULE_0___default.a.Vimeo ) {\\n                callback();\\n            } else {\\n                loadingVimeoDefer.done( () => {\\n                    callback();\\n                } );\\n            }\\n        }\\n\\n        // Local\\n        if ( 'local' === self.type ) {\\n            callback();\\n        }\\n    }\\n}\\n//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdmlkZW8td29ya2VyL3NyYy92aWRlby13b3JrZXIuZXNtLmpzP2JlYTMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBNEI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVlO0FBQ2Y7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxzQ0FBc0M7O0FBRXRDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDZDQUFNO0FBQ3ZCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCLDZDQUFNO0FBQ3ZCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSxlQUFlLEdBQUcseUJBQXlCO0FBQy9HO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSw2REFBNkQsZUFBZSxHQUFHLHlCQUF5QjtBQUN4RztBQUNBO0FBQ0Esd0RBQXdELGVBQWUsR0FBRyx5QkFBeUI7QUFDbkc7O0FBRUE7QUFDQTtBQUNBLG1FQUFtRSxlQUFlO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3Qix5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSw2REFBNkQsNkNBQU07QUFDbkU7QUFDQTtBQUNBLHVEQUF1RCw2Q0FBTTtBQUM3RDtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsNkNBQU07QUFDOUM7QUFDQTtBQUNBLHdDQUF3Qyw2Q0FBTTtBQUM5QztBQUNBO0FBQ0Esd0NBQXdDLDZDQUFNO0FBQzlDO0FBQ0E7O0FBRUE7QUFDQSx3Q0FBd0MsNkNBQU07QUFDOUM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCw2Q0FBTTtBQUN2RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELE1BQU0sR0FBRyxrREFBa0Q7QUFDN0cscUJBQXFCOztBQUVyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVGQUF1RixlQUFlLEdBQUcsc0JBQXNCO0FBQy9IO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaURBQWlELDZDQUFNOztBQUV2RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxxRkFBcUYsTUFBTTtBQUMzRixxQkFBcUI7QUFDckI7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7O0FBRUEsdUNBQXVDLFVBQVU7QUFDakQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3Q0FBd0MsNkNBQU07QUFDOUM7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsNkNBQU0sYUFBYSw2Q0FBTTtBQUNuRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsK0JBQStCLDZDQUFNLGFBQWEsNkNBQU07QUFDckU7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQSx3Q0FBd0MsNkNBQU07QUFDOUM7QUFDQTtBQUNBLGdEQUFnRCw2Q0FBTTtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhLGtDQUFrQyw2Q0FBTTtBQUNyRDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3ZpZGVvLXdvcmtlci9zcmMvdmlkZW8td29ya2VyLmVzbS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBnbG9iYWwgZnJvbSAnZ2xvYmFsJztcblxuLy8gRGVmZXJyZWRcbi8vIHRoYW5rcyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE4MDk2NzE1L2ltcGxlbWVudC1kZWZlcnJlZC1vYmplY3Qtd2l0aG91dC11c2luZy1qcXVlcnlcbmZ1bmN0aW9uIERlZmVycmVkKCkge1xuICAgIHRoaXMuZG9uZUNhbGxiYWNrcyA9IFtdO1xuICAgIHRoaXMuZmFpbENhbGxiYWNrcyA9IFtdO1xufVxuXG5EZWZlcnJlZC5wcm90b3R5cGUgPSB7XG4gICAgZXhlY3V0ZSggbGlzdCwgYXJncyApIHtcbiAgICAgICAgbGV0IGkgPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKCBhcmdzICk7XG5cbiAgICAgICAgd2hpbGUgKCBpICkge1xuICAgICAgICAgICAgaSAtPSAxO1xuICAgICAgICAgICAgbGlzdFsgaSBdLmFwcGx5KCBudWxsLCBhcmdzICk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHJlc29sdmUoIC4uLmFyZ3MgKSB7XG4gICAgICAgIHRoaXMuZXhlY3V0ZSggdGhpcy5kb25lQ2FsbGJhY2tzLCBhcmdzICk7XG4gICAgfSxcbiAgICByZWplY3QoIC4uLmFyZ3MgKSB7XG4gICAgICAgIHRoaXMuZXhlY3V0ZSggdGhpcy5mYWlsQ2FsbGJhY2tzLCBhcmdzICk7XG4gICAgfSxcbiAgICBkb25lKCBjYWxsYmFjayApIHtcbiAgICAgICAgdGhpcy5kb25lQ2FsbGJhY2tzLnB1c2goIGNhbGxiYWNrICk7XG4gICAgfSxcbiAgICBmYWlsKCBjYWxsYmFjayApIHtcbiAgICAgICAgdGhpcy5mYWlsQ2FsbGJhY2tzLnB1c2goIGNhbGxiYWNrICk7XG4gICAgfSxcbn07XG5cbmxldCBJRCA9IDA7XG5sZXQgWW91dHViZUFQSWFkZGVkID0gMDtcbmxldCBWaW1lb0FQSWFkZGVkID0gMDtcbmxldCBsb2FkaW5nWW91dHViZVBsYXllciA9IDA7XG5sZXQgbG9hZGluZ1ZpbWVvUGxheWVyID0gMDtcbmNvbnN0IGxvYWRpbmdZb3V0dWJlRGVmZXIgPSBuZXcgRGVmZXJyZWQoKTtcbmNvbnN0IGxvYWRpbmdWaW1lb0RlZmVyID0gbmV3IERlZmVycmVkKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpZGVvV29ya2VyIHtcbiAgICBjb25zdHJ1Y3RvciggdXJsLCBvcHRpb25zICkge1xuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICBzZWxmLnVybCA9IHVybDtcblxuICAgICAgICBzZWxmLm9wdGlvbnNfZGVmYXVsdCA9IHtcbiAgICAgICAgICAgIGF1dG9wbGF5OiBmYWxzZSxcbiAgICAgICAgICAgIGxvb3A6IGZhbHNlLFxuICAgICAgICAgICAgbXV0ZTogZmFsc2UsXG4gICAgICAgICAgICB2b2x1bWU6IDEwMCxcbiAgICAgICAgICAgIHNob3dDb250cm9sczogdHJ1ZSxcbiAgICAgICAgICAgIGFjY2Vzc2liaWxpdHlIaWRkZW46IGZhbHNlLFxuXG4gICAgICAgICAgICAvLyBzdGFydCAvIGVuZCB2aWRlbyB0aW1lIGluIHNlY29uZHNcbiAgICAgICAgICAgIHN0YXJ0VGltZTogMCxcbiAgICAgICAgICAgIGVuZFRpbWU6IDAsXG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5vcHRpb25zID0gc2VsZi5leHRlbmQoIHt9LCBzZWxmLm9wdGlvbnNfZGVmYXVsdCwgb3B0aW9ucyApO1xuXG4gICAgICAgIC8vIEZpeCB3cm9uZyBvcHRpb24gbmFtZS5cbiAgICAgICAgLy8gVGhhbmtzIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9uay1vL3ZpZGVvLXdvcmtlci9pc3N1ZXMvMTMuXG4gICAgICAgIGlmICggJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBzZWxmLm9wdGlvbnMuc2hvd0NvbnRvbHMgKSB7XG4gICAgICAgICAgICBzZWxmLm9wdGlvbnMuc2hvd0NvbnRyb2xzID0gc2VsZi5vcHRpb25zLnNob3dDb250b2xzO1xuICAgICAgICAgICAgZGVsZXRlIHNlbGYub3B0aW9ucy5zaG93Q29udG9scztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNoZWNrIFVSTFxuICAgICAgICBzZWxmLnZpZGVvSUQgPSBzZWxmLnBhcnNlVVJMKCB1cmwgKTtcblxuICAgICAgICAvLyBpbml0XG4gICAgICAgIGlmICggc2VsZi52aWRlb0lEICkge1xuICAgICAgICAgICAgc2VsZi5JRCA9IElEO1xuICAgICAgICAgICAgSUQgKz0gMTtcbiAgICAgICAgICAgIHNlbGYubG9hZEFQSSgpO1xuICAgICAgICAgICAgc2VsZi5pbml0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFeHRlbmQgbGlrZSBqUXVlcnkuZXh0ZW5kXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcbiAgICBleHRlbmQoIC4uLmFyZ3MgKSB7XG4gICAgICAgIGNvbnN0IG91dCA9IGFyZ3NbIDAgXSB8fCB7fTtcblxuICAgICAgICBPYmplY3Qua2V5cyggYXJncyApLmZvckVhY2goICggaSApID0+IHtcbiAgICAgICAgICAgIGlmICggISBhcmdzWyBpIF0gKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgT2JqZWN0LmtleXMoIGFyZ3NbIGkgXSApLmZvckVhY2goICgga2V5ICkgPT4ge1xuICAgICAgICAgICAgICAgIG91dFsga2V5IF0gPSBhcmdzWyBpIF1bIGtleSBdO1xuICAgICAgICAgICAgfSApO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICBwYXJzZVVSTCggdXJsICkge1xuICAgICAgICAvLyBwYXJzZSB5b3V0dWJlIElEXG4gICAgICAgIGZ1bmN0aW9uIGdldFlvdXR1YmVJRCggeXRVcmwgKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlbGVzcy1lc2NhcGVcbiAgICAgICAgICAgIGNvbnN0IHJlZ0V4cCA9IC8uKig/OnlvdXR1LmJlXFwvfHZcXC98dVxcL1xcd1xcL3xlbWJlZFxcL3x3YXRjaFxcP3Y9KShbXiNcXCZcXD9dKikuKi87XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHl0VXJsLm1hdGNoKCByZWdFeHAgKTtcbiAgICAgICAgICAgIHJldHVybiBtYXRjaCAmJiAxMSA9PT0gbWF0Y2hbIDEgXS5sZW5ndGggPyBtYXRjaFsgMSBdIDogZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBwYXJzZSB2aW1lbyBJRFxuICAgICAgICBmdW5jdGlvbiBnZXRWaW1lb0lEKCB2bVVybCApIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2VsZXNzLWVzY2FwZVxuICAgICAgICAgICAgY29uc3QgcmVnRXhwID0gL2h0dHBzPzpcXC9cXC8oPzp3d3dcXC58cGxheWVyXFwuKT92aW1lby5jb21cXC8oPzpjaGFubmVsc1xcLyg/OlxcdytcXC8pP3xncm91cHNcXC8oW15cXC9dKilcXC92aWRlb3NcXC98YWxidW1cXC8oXFxkKylcXC92aWRlb1xcL3x2aWRlb1xcL3wpKFxcZCspKD86JHxcXC98XFw/KS87XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHZtVXJsLm1hdGNoKCByZWdFeHAgKTtcbiAgICAgICAgICAgIHJldHVybiBtYXRjaCAmJiBtYXRjaFsgMyBdID8gbWF0Y2hbIDMgXSA6IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcGFyc2UgbG9jYWwgc3RyaW5nXG4gICAgICAgIGZ1bmN0aW9uIGdldExvY2FsVmlkZW9zKCBsb2NVcmwgKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlbGVzcy1lc2NhcGVcbiAgICAgICAgICAgIGNvbnN0IHZpZGVvRm9ybWF0cyA9IGxvY1VybC5zcGxpdCggLywoPz1tcDRcXDp8d2VibVxcOnxvZ3ZcXDp8b2dnXFw6KS8gKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgICAgICAgICAgbGV0IHJlYWR5ID0gMDtcbiAgICAgICAgICAgIHZpZGVvRm9ybWF0cy5mb3JFYWNoKCAoIHZhbCApID0+IHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlbGVzcy1lc2NhcGVcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IHZhbC5tYXRjaCggL14obXA0fHdlYm18b2d2fG9nZylcXDooLiopLyApO1xuICAgICAgICAgICAgICAgIGlmICggbWF0Y2ggJiYgbWF0Y2hbIDEgXSAmJiBtYXRjaFsgMiBdICkge1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0WyAnb2d2JyA9PT0gbWF0Y2hbIDEgXSA/ICdvZ2cnIDogbWF0Y2hbIDEgXSBdID0gbWF0Y2hbIDIgXTtcbiAgICAgICAgICAgICAgICAgICAgcmVhZHkgPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIHJldHVybiByZWFkeSA/IHJlc3VsdCA6IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgWW91dHViZSA9IGdldFlvdXR1YmVJRCggdXJsICk7XG4gICAgICAgIGNvbnN0IFZpbWVvID0gZ2V0VmltZW9JRCggdXJsICk7XG4gICAgICAgIGNvbnN0IExvY2FsID0gZ2V0TG9jYWxWaWRlb3MoIHVybCApO1xuXG4gICAgICAgIGlmICggWW91dHViZSApIHtcbiAgICAgICAgICAgIHRoaXMudHlwZSA9ICd5b3V0dWJlJztcbiAgICAgICAgICAgIHJldHVybiBZb3V0dWJlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCBWaW1lbyApIHtcbiAgICAgICAgICAgIHRoaXMudHlwZSA9ICd2aW1lbyc7XG4gICAgICAgICAgICByZXR1cm4gVmltZW87XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIExvY2FsICkge1xuICAgICAgICAgICAgdGhpcy50eXBlID0gJ2xvY2FsJztcbiAgICAgICAgICAgIHJldHVybiBMb2NhbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpc1ZhbGlkKCkge1xuICAgICAgICByZXR1cm4gISEgdGhpcy52aWRlb0lEO1xuICAgIH1cblxuICAgIC8vIGV2ZW50c1xuICAgIG9uKCBuYW1lLCBjYWxsYmFjayApIHtcbiAgICAgICAgdGhpcy51c2VyRXZlbnRzTGlzdCA9IHRoaXMudXNlckV2ZW50c0xpc3QgfHwgW107XG5cbiAgICAgICAgLy8gYWRkIG5ldyBjYWxsYmFjayBpbiBldmVudHMgbGlzdFxuICAgICAgICAoIHRoaXMudXNlckV2ZW50c0xpc3RbIG5hbWUgXSB8fCAoIHRoaXMudXNlckV2ZW50c0xpc3RbIG5hbWUgXSA9IFtdICkgKS5wdXNoKCBjYWxsYmFjayApO1xuICAgIH1cblxuICAgIG9mZiggbmFtZSwgY2FsbGJhY2sgKSB7XG4gICAgICAgIGlmICggISB0aGlzLnVzZXJFdmVudHNMaXN0IHx8ICEgdGhpcy51c2VyRXZlbnRzTGlzdFsgbmFtZSBdICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCAhIGNhbGxiYWNrICkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMudXNlckV2ZW50c0xpc3RbIG5hbWUgXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudXNlckV2ZW50c0xpc3RbIG5hbWUgXS5mb3JFYWNoKCAoIHZhbCwga2V5ICkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICggdmFsID09PSBjYWxsYmFjayApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VyRXZlbnRzTGlzdFsgbmFtZSBdWyBrZXkgXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZpcmUoIG5hbWUsIC4uLmFyZ3MgKSB7XG4gICAgICAgIGlmICggdGhpcy51c2VyRXZlbnRzTGlzdCAmJiAndW5kZWZpbmVkJyAhPT0gdHlwZW9mIHRoaXMudXNlckV2ZW50c0xpc3RbIG5hbWUgXSApIHtcbiAgICAgICAgICAgIHRoaXMudXNlckV2ZW50c0xpc3RbIG5hbWUgXS5mb3JFYWNoKCAoIHZhbCApID0+IHtcbiAgICAgICAgICAgICAgICAvLyBjYWxsIHdpdGggYWxsIGFyZ3VtZW50c1xuICAgICAgICAgICAgICAgIGlmICggdmFsICkge1xuICAgICAgICAgICAgICAgICAgICB2YWwuYXBwbHkoIHRoaXMsIGFyZ3MgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwbGF5KCBzdGFydCApIHtcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICAgIGlmICggISBzZWxmLnBsYXllciApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggJ3lvdXR1YmUnID09PSBzZWxmLnR5cGUgJiYgc2VsZi5wbGF5ZXIucGxheVZpZGVvICkge1xuICAgICAgICAgICAgaWYgKCAndW5kZWZpbmVkJyAhPT0gdHlwZW9mIHN0YXJ0ICkge1xuICAgICAgICAgICAgICAgIHNlbGYucGxheWVyLnNlZWtUbyggc3RhcnQgfHwgMCApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCBnbG9iYWwuWVQuUGxheWVyU3RhdGUuUExBWUlORyAhPT0gc2VsZi5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSApIHtcbiAgICAgICAgICAgICAgICBzZWxmLnBsYXllci5wbGF5VmlkZW8oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggJ3ZpbWVvJyA9PT0gc2VsZi50eXBlICkge1xuICAgICAgICAgICAgaWYgKCAndW5kZWZpbmVkJyAhPT0gdHlwZW9mIHN0YXJ0ICkge1xuICAgICAgICAgICAgICAgIHNlbGYucGxheWVyLnNldEN1cnJlbnRUaW1lKCBzdGFydCApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VsZi5wbGF5ZXIuZ2V0UGF1c2VkKCkudGhlbiggKCBwYXVzZWQgKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCBwYXVzZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYucGxheWVyLnBsYXkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoICdsb2NhbCcgPT09IHNlbGYudHlwZSApIHtcbiAgICAgICAgICAgIGlmICggJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBzdGFydCApIHtcbiAgICAgICAgICAgICAgICBzZWxmLnBsYXllci5jdXJyZW50VGltZSA9IHN0YXJ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCBzZWxmLnBsYXllci5wYXVzZWQgKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5wbGF5ZXIucGxheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcGF1c2UoKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICBpZiAoICEgc2VsZi5wbGF5ZXIgKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoICd5b3V0dWJlJyA9PT0gc2VsZi50eXBlICYmIHNlbGYucGxheWVyLnBhdXNlVmlkZW8gKSB7XG4gICAgICAgICAgICBpZiAoIGdsb2JhbC5ZVC5QbGF5ZXJTdGF0ZS5QTEFZSU5HID09PSBzZWxmLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpICkge1xuICAgICAgICAgICAgICAgIHNlbGYucGxheWVyLnBhdXNlVmlkZW8oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggJ3ZpbWVvJyA9PT0gc2VsZi50eXBlICkge1xuICAgICAgICAgICAgc2VsZi5wbGF5ZXIuZ2V0UGF1c2VkKCkudGhlbiggKCBwYXVzZWQgKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCAhIHBhdXNlZCApIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wbGF5ZXIucGF1c2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoICdsb2NhbCcgPT09IHNlbGYudHlwZSApIHtcbiAgICAgICAgICAgIGlmICggISBzZWxmLnBsYXllci5wYXVzZWQgKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5wbGF5ZXIucGF1c2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIG11dGUoKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICBpZiAoICEgc2VsZi5wbGF5ZXIgKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoICd5b3V0dWJlJyA9PT0gc2VsZi50eXBlICYmIHNlbGYucGxheWVyLm11dGUgKSB7XG4gICAgICAgICAgICBzZWxmLnBsYXllci5tdXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoICd2aW1lbycgPT09IHNlbGYudHlwZSAmJiBzZWxmLnBsYXllci5zZXRWb2x1bWUgKSB7XG4gICAgICAgICAgICBzZWxmLnBsYXllci5zZXRWb2x1bWUoIDAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggJ2xvY2FsJyA9PT0gc2VsZi50eXBlICkge1xuICAgICAgICAgICAgc2VsZi4kdmlkZW8ubXV0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdW5tdXRlKCkge1xuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgICAgaWYgKCAhIHNlbGYucGxheWVyICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCAneW91dHViZScgPT09IHNlbGYudHlwZSAmJiBzZWxmLnBsYXllci5tdXRlICkge1xuICAgICAgICAgICAgc2VsZi5wbGF5ZXIudW5NdXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoICd2aW1lbycgPT09IHNlbGYudHlwZSAmJiBzZWxmLnBsYXllci5zZXRWb2x1bWUgKSB7XG4gICAgICAgICAgICBzZWxmLnBsYXllci5zZXRWb2x1bWUoIHNlbGYub3B0aW9ucy52b2x1bWUgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggJ2xvY2FsJyA9PT0gc2VsZi50eXBlICkge1xuICAgICAgICAgICAgc2VsZi4kdmlkZW8ubXV0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldFZvbHVtZSggdm9sdW1lID0gZmFsc2UgKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICBpZiAoICEgc2VsZi5wbGF5ZXIgfHwgISB2b2x1bWUgKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoICd5b3V0dWJlJyA9PT0gc2VsZi50eXBlICYmIHNlbGYucGxheWVyLnNldFZvbHVtZSApIHtcbiAgICAgICAgICAgIHNlbGYucGxheWVyLnNldFZvbHVtZSggdm9sdW1lICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoICd2aW1lbycgPT09IHNlbGYudHlwZSAmJiBzZWxmLnBsYXllci5zZXRWb2x1bWUgKSB7XG4gICAgICAgICAgICBzZWxmLnBsYXllci5zZXRWb2x1bWUoIHZvbHVtZSApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCAnbG9jYWwnID09PSBzZWxmLnR5cGUgKSB7XG4gICAgICAgICAgICBzZWxmLiR2aWRlby52b2x1bWUgPSB2b2x1bWUgLyAxMDA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRWb2x1bWUoIGNhbGxiYWNrICkge1xuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgICAgaWYgKCAhIHNlbGYucGxheWVyICkge1xuICAgICAgICAgICAgY2FsbGJhY2soIGZhbHNlICk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoICd5b3V0dWJlJyA9PT0gc2VsZi50eXBlICYmIHNlbGYucGxheWVyLmdldFZvbHVtZSApIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCBzZWxmLnBsYXllci5nZXRWb2x1bWUoKSApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCAndmltZW8nID09PSBzZWxmLnR5cGUgJiYgc2VsZi5wbGF5ZXIuZ2V0Vm9sdW1lICkge1xuICAgICAgICAgICAgc2VsZi5wbGF5ZXIuZ2V0Vm9sdW1lKCkudGhlbiggKCB2b2x1bWUgKSA9PiB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soIHZvbHVtZSApO1xuICAgICAgICAgICAgfSApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCAnbG9jYWwnID09PSBzZWxmLnR5cGUgKSB7XG4gICAgICAgICAgICBjYWxsYmFjayggc2VsZi4kdmlkZW8udm9sdW1lICogMTAwICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRNdXRlZCggY2FsbGJhY2sgKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICBpZiAoICEgc2VsZi5wbGF5ZXIgKSB7XG4gICAgICAgICAgICBjYWxsYmFjayggbnVsbCApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCAneW91dHViZScgPT09IHNlbGYudHlwZSAmJiBzZWxmLnBsYXllci5pc011dGVkICkge1xuICAgICAgICAgICAgY2FsbGJhY2soIHNlbGYucGxheWVyLmlzTXV0ZWQoKSApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCAndmltZW8nID09PSBzZWxmLnR5cGUgJiYgc2VsZi5wbGF5ZXIuZ2V0Vm9sdW1lICkge1xuICAgICAgICAgICAgc2VsZi5wbGF5ZXIuZ2V0Vm9sdW1lKCkudGhlbiggKCB2b2x1bWUgKSA9PiB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soICEhIHZvbHVtZSApO1xuICAgICAgICAgICAgfSApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCAnbG9jYWwnID09PSBzZWxmLnR5cGUgKSB7XG4gICAgICAgICAgICBjYWxsYmFjayggc2VsZi4kdmlkZW8ubXV0ZWQgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEltYWdlVVJMKCBjYWxsYmFjayApIHtcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCBzZWxmLnZpZGVvSW1hZ2UgKSB7XG4gICAgICAgICAgICBjYWxsYmFjayggc2VsZi52aWRlb0ltYWdlICk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoICd5b3V0dWJlJyA9PT0gc2VsZi50eXBlICkge1xuICAgICAgICAgICAgY29uc3QgYXZhaWxhYmxlU2l6ZXMgPSBbXG4gICAgICAgICAgICAgICAgJ21heHJlc2RlZmF1bHQnLFxuICAgICAgICAgICAgICAgICdzZGRlZmF1bHQnLFxuICAgICAgICAgICAgICAgICdocWRlZmF1bHQnLFxuICAgICAgICAgICAgICAgICcwJyxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBsZXQgc3RlcCA9IDA7XG5cbiAgICAgICAgICAgIGNvbnN0IHRlbXBJbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIHRlbXBJbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgbm8gdGh1bWJuYWlsLCB5b3V0dWJlIGFkZCB0aGVpciBvd24gaW1hZ2Ugd2l0aCB3aWR0aCA9IDEyMHB4XG4gICAgICAgICAgICAgICAgaWYgKCAxMjAgIT09ICggdGhpcy5uYXR1cmFsV2lkdGggfHwgdGhpcy53aWR0aCApIHx8IHN0ZXAgPT09IGF2YWlsYWJsZVNpemVzLmxlbmd0aCAtIDEgKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG9rXG4gICAgICAgICAgICAgICAgICAgIHNlbGYudmlkZW9JbWFnZSA9IGBodHRwczovL2ltZy55b3V0dWJlLmNvbS92aS8keyBzZWxmLnZpZGVvSUQgfS8keyBhdmFpbGFibGVTaXplc1sgc3RlcCBdIH0uanBnYDtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soIHNlbGYudmlkZW9JbWFnZSApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRyeSBhbm90aGVyIHNpemVcbiAgICAgICAgICAgICAgICAgICAgc3RlcCArPSAxO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNyYyA9IGBodHRwczovL2ltZy55b3V0dWJlLmNvbS92aS8keyBzZWxmLnZpZGVvSUQgfS8keyBhdmFpbGFibGVTaXplc1sgc3RlcCBdIH0uanBnYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGVtcEltZy5zcmMgPSBgaHR0cHM6Ly9pbWcueW91dHViZS5jb20vdmkvJHsgc2VsZi52aWRlb0lEIH0vJHsgYXZhaWxhYmxlU2l6ZXNbIHN0ZXAgXSB9LmpwZ2A7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoICd2aW1lbycgPT09IHNlbGYudHlwZSApIHtcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICByZXF1ZXN0Lm9wZW4oICdHRVQnLCBgaHR0cHM6Ly92aW1lby5jb20vYXBpL3YyL3ZpZGVvLyR7IHNlbGYudmlkZW9JRCB9Lmpzb25gLCB0cnVlICk7XG4gICAgICAgICAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICggNCA9PT0gdGhpcy5yZWFkeVN0YXRlICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIDIwMCA8PSB0aGlzLnN0YXR1cyAmJiA0MDAgPiB0aGlzLnN0YXR1cyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN1Y2Nlc3MhXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IEpTT04ucGFyc2UoIHRoaXMucmVzcG9uc2VUZXh0ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnZpZGVvSW1hZ2UgPSByZXNwb25zZVsgMCBdLnRodW1ibmFpbF9sYXJnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCBzZWxmLnZpZGVvSW1hZ2UgKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVycm9yIDooXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVxdWVzdC5zZW5kKCk7XG4gICAgICAgICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGZhbGxiYWNrIHRvIHRoZSBvbGQgdmVyc2lvbi5cbiAgICBnZXRJZnJhbWUoIGNhbGxiYWNrICkge1xuICAgICAgICB0aGlzLmdldFZpZGVvKCBjYWxsYmFjayApO1xuICAgIH1cblxuICAgIGdldFZpZGVvKCBjYWxsYmFjayApIHtcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgLy8gcmV0dXJuIGdlbmVyYXRlZCB2aWRlbyBibG9ja1xuICAgICAgICBpZiAoIHNlbGYuJHZpZGVvICkge1xuICAgICAgICAgICAgY2FsbGJhY2soIHNlbGYuJHZpZGVvICk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBnZW5lcmF0ZSBuZXcgdmlkZW8gYmxvY2tcbiAgICAgICAgc2VsZi5vbkFQSXJlYWR5KCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgaGlkZGVuRGl2O1xuICAgICAgICAgICAgaWYgKCAhIHNlbGYuJHZpZGVvICkge1xuICAgICAgICAgICAgICAgIGhpZGRlbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7XG4gICAgICAgICAgICAgICAgaGlkZGVuRGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFlvdXR1YmVcbiAgICAgICAgICAgIGlmICggJ3lvdXR1YmUnID09PSBzZWxmLnR5cGUgKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5wbGF5ZXJPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICAvLyBHRFBSIENvbXBsaWFuY2UuXG4gICAgICAgICAgICAgICAgICAgIGhvc3Q6ICdodHRwczovL3d3dy55b3V0dWJlLW5vY29va2llLmNvbScsXG4gICAgICAgICAgICAgICAgICAgIHZpZGVvSWQ6IHNlbGYudmlkZW9JRCxcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyVmFyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b2hpZGU6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWw6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvcGxheTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF1dG9wbGF5IGVuYWJsZSBvbiBtb2JpbGUgZGV2aWNlc1xuICAgICAgICAgICAgICAgICAgICAgICAgcGxheXNpbmxpbmU6IDEsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8vIGhpZGUgY29udHJvbHNcbiAgICAgICAgICAgICAgICBpZiAoICEgc2VsZi5vcHRpb25zLnNob3dDb250cm9scyApIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wbGF5ZXJPcHRpb25zLnBsYXllclZhcnMuaXZfbG9hZF9wb2xpY3kgPSAzO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnBsYXllck9wdGlvbnMucGxheWVyVmFycy5tb2Rlc3RicmFuZGluZyA9IDE7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYucGxheWVyT3B0aW9ucy5wbGF5ZXJWYXJzLmNvbnRyb2xzID0gMDtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wbGF5ZXJPcHRpb25zLnBsYXllclZhcnMuc2hvd2luZm8gPSAwO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnBsYXllck9wdGlvbnMucGxheWVyVmFycy5kaXNhYmxla2IgPSAxO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGV2ZW50c1xuICAgICAgICAgICAgICAgIGxldCB5dFN0YXJ0ZWQ7XG4gICAgICAgICAgICAgICAgbGV0IHl0UHJvZ3Jlc3NJbnRlcnZhbDtcbiAgICAgICAgICAgICAgICBzZWxmLnBsYXllck9wdGlvbnMuZXZlbnRzID0ge1xuICAgICAgICAgICAgICAgICAgICBvblJlYWR5KCBlICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbXV0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBzZWxmLm9wdGlvbnMubXV0ZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5tdXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBzZWxmLm9wdGlvbnMudm9sdW1lICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnNldFZvbHVtZSggc2VsZi5vcHRpb25zLnZvbHVtZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhdXRvcGxheVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBzZWxmLm9wdGlvbnMuYXV0b3BsYXkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wbGF5KCBzZWxmLm9wdGlvbnMuc3RhcnRUaW1lICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZpcmUoICdyZWFkeScsIGUgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIHNlYW1sZXNzIGxvb3BzLCBzZXQgdGhlIGVuZFRpbWUgdG8gMC4xIHNlY29uZHMgbGVzcyB0aGFuIHRoZSB2aWRlbydzIGR1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbmstby92aWRlby13b3JrZXIvaXNzdWVzLzJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc2VsZi5vcHRpb25zLmxvb3AgJiYgISBzZWxmLm9wdGlvbnMuZW5kVGltZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWNvbmRzT2Zmc2V0ID0gMC4xO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub3B0aW9ucy5lbmRUaW1lID0gc2VsZi5wbGF5ZXIuZ2V0RHVyYXRpb24oKSAtIHNlY29uZHNPZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZvbHVtZWNoYW5nZVxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0SW50ZXJ2YWwoICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmdldFZvbHVtZSggKCB2b2x1bWUgKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc2VsZi5vcHRpb25zLnZvbHVtZSAhPT0gdm9sdW1lICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vcHRpb25zLnZvbHVtZSA9IHZvbHVtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZmlyZSggJ3ZvbHVtZWNoYW5nZScsIGUgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDE1MCApO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvblN0YXRlQ2hhbmdlKCBlICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9vcFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBzZWxmLm9wdGlvbnMubG9vcCAmJiBlLmRhdGEgPT09IGdsb2JhbC5ZVC5QbGF5ZXJTdGF0ZS5FTkRFRCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBsYXkoIHNlbGYub3B0aW9ucy5zdGFydFRpbWUgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggISB5dFN0YXJ0ZWQgJiYgZS5kYXRhID09PSBnbG9iYWwuWVQuUGxheWVyU3RhdGUuUExBWUlORyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5dFN0YXJ0ZWQgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZmlyZSggJ3N0YXJ0ZWQnLCBlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGUuZGF0YSA9PT0gZ2xvYmFsLllULlBsYXllclN0YXRlLlBMQVlJTkcgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5maXJlKCAncGxheScsIGUgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZS5kYXRhID09PSBnbG9iYWwuWVQuUGxheWVyU3RhdGUuUEFVU0VEICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZmlyZSggJ3BhdXNlJywgZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBlLmRhdGEgPT09IGdsb2JhbC5ZVC5QbGF5ZXJTdGF0ZS5FTkRFRCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZpcmUoICdlbmRlZCcsIGUgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJvZ3Jlc3MgY2hlY2tcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZS5kYXRhID09PSBnbG9iYWwuWVQuUGxheWVyU3RhdGUuUExBWUlORyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5dFByb2dyZXNzSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCggKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZpcmUoICd0aW1ldXBkYXRlJywgZSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGZvciBlbmQgb2YgdmlkZW8gYW5kIHBsYXkgYWdhaW4gb3Igc3RvcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHNlbGYub3B0aW9ucy5lbmRUaW1lICYmIHNlbGYucGxheWVyLmdldEN1cnJlbnRUaW1lKCkgPj0gc2VsZi5vcHRpb25zLmVuZFRpbWUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHNlbGYub3B0aW9ucy5sb29wICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGxheSggc2VsZi5vcHRpb25zLnN0YXJ0VGltZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxNTAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCggeXRQcm9ncmVzc0ludGVydmFsICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9uRXJyb3IoIGUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZpcmUoICdlcnJvcicsIGUgKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3RJbml0ID0gISBzZWxmLiR2aWRlbztcbiAgICAgICAgICAgICAgICBpZiAoIGZpcnN0SW5pdCApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKTtcbiAgICAgICAgICAgICAgICAgICAgZGl2LnNldEF0dHJpYnV0ZSggJ2lkJywgc2VsZi5wbGF5ZXJJRCApO1xuICAgICAgICAgICAgICAgICAgICBoaWRkZW5EaXYuYXBwZW5kQ2hpbGQoIGRpdiApO1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCBoaWRkZW5EaXYgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2VsZi5wbGF5ZXIgPSBzZWxmLnBsYXllciB8fCBuZXcgZ2xvYmFsLllULlBsYXllciggc2VsZi5wbGF5ZXJJRCwgc2VsZi5wbGF5ZXJPcHRpb25zICk7XG4gICAgICAgICAgICAgICAgaWYgKCBmaXJzdEluaXQgKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuJHZpZGVvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIHNlbGYucGxheWVySUQgKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgYWNjZXNzaWJpbGl0eSBhdHRyaWJ1dGVzXG4gICAgICAgICAgICAgICAgICAgIGlmICggc2VsZi5vcHRpb25zLmFjY2Vzc2liaWxpdHlIaWRkZW4gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLiR2aWRlby5zZXRBdHRyaWJ1dGUoICd0YWJpbmRleCcsICctMScgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuJHZpZGVvLnNldEF0dHJpYnV0ZSggJ2FyaWEtaGlkZGVuJywgJ3RydWUnICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBnZXQgdmlkZW8gd2lkdGggYW5kIGhlaWdodFxuICAgICAgICAgICAgICAgICAgICBzZWxmLnZpZGVvV2lkdGggPSBwYXJzZUludCggc2VsZi4kdmlkZW8uZ2V0QXR0cmlidXRlKCAnd2lkdGgnICksIDEwICkgfHwgMTI4MDtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi52aWRlb0hlaWdodCA9IHBhcnNlSW50KCBzZWxmLiR2aWRlby5nZXRBdHRyaWJ1dGUoICdoZWlnaHQnICksIDEwICkgfHwgNzIwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVmltZW9cbiAgICAgICAgICAgIGlmICggJ3ZpbWVvJyA9PT0gc2VsZi50eXBlICkge1xuICAgICAgICAgICAgICAgIHNlbGYucGxheWVyT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gR0RQUiBDb21wbGlhbmNlLlxuICAgICAgICAgICAgICAgICAgICBkbnQ6IDEsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBzZWxmLnZpZGVvSUQsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9wYXVzZTogMCxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwYXJlbnQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiBzZWxmLm9wdGlvbnMuYXV0b3BsYXkgPyAxIDogMCxcbiAgICAgICAgICAgICAgICAgICAgbG9vcDogc2VsZi5vcHRpb25zLmxvb3AgPyAxIDogMCxcbiAgICAgICAgICAgICAgICAgICAgbXV0ZWQ6IHNlbGYub3B0aW9ucy5tdXRlID8gMSA6IDAsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGlmICggc2VsZi5vcHRpb25zLnZvbHVtZSApIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wbGF5ZXJPcHRpb25zLnZvbHVtZSA9IHNlbGYub3B0aW9ucy52b2x1bWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gaGlkZSBjb250cm9sc1xuICAgICAgICAgICAgICAgIGlmICggISBzZWxmLm9wdGlvbnMuc2hvd0NvbnRyb2xzICkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnBsYXllck9wdGlvbnMuYmFkZ2UgPSAwO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnBsYXllck9wdGlvbnMuYnlsaW5lID0gMDtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wbGF5ZXJPcHRpb25zLnBvcnRyYWl0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wbGF5ZXJPcHRpb25zLnRpdGxlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wbGF5ZXJPcHRpb25zLmJhY2tncm91bmQgPSAxO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICggISBzZWxmLiR2aWRlbyApIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBsYXllck9wdGlvbnNTdHJpbmcgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoIHNlbGYucGxheWVyT3B0aW9ucyApLmZvckVhY2goICgga2V5ICkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAnJyAhPT0gcGxheWVyT3B0aW9uc1N0cmluZyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJPcHRpb25zU3RyaW5nICs9ICcmJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllck9wdGlvbnNTdHJpbmcgKz0gYCR7IGtleSB9PSR7IGVuY29kZVVSSUNvbXBvbmVudCggc2VsZi5wbGF5ZXJPcHRpb25zWyBrZXkgXSApIH1gO1xuICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBjcmVhdGUgaWZyYW1lIG1hbnVhbGx5IGJlY2F1c2Ugd2hlbiB3ZSBjcmVhdGUgaXQgdXNpbmcgQVBJXG4gICAgICAgICAgICAgICAgICAgIC8vIGpzIGV2ZW50cyB3b24ndCB0cmlnZ2VycyBhZnRlciBpZnJhbWUgbW92ZWQgdG8gYW5vdGhlciBwbGFjZVxuICAgICAgICAgICAgICAgICAgICBzZWxmLiR2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdpZnJhbWUnICk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuJHZpZGVvLnNldEF0dHJpYnV0ZSggJ2lkJywgc2VsZi5wbGF5ZXJJRCApO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiR2aWRlby5zZXRBdHRyaWJ1dGUoICdzcmMnLCBgaHR0cHM6Ly9wbGF5ZXIudmltZW8uY29tL3ZpZGVvLyR7IHNlbGYudmlkZW9JRCB9PyR7IHBsYXllck9wdGlvbnNTdHJpbmcgfWAgKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kdmlkZW8uc2V0QXR0cmlidXRlKCAnZnJhbWVib3JkZXInLCAnMCcgKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kdmlkZW8uc2V0QXR0cmlidXRlKCAnbW96YWxsb3dmdWxsc2NyZWVuJywgJycgKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kdmlkZW8uc2V0QXR0cmlidXRlKCAnYWxsb3dmdWxsc2NyZWVuJywgJycgKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kdmlkZW8uc2V0QXR0cmlidXRlKCAndGl0bGUnLCAnVmltZW8gdmlkZW8gcGxheWVyJyApO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBhY2Nlc3NpYmlsaXR5IGF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzZWxmLm9wdGlvbnMuYWNjZXNzaWJpbGl0eUhpZGRlbiApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuJHZpZGVvLnNldEF0dHJpYnV0ZSggJ3RhYmluZGV4JywgJy0xJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi4kdmlkZW8uc2V0QXR0cmlidXRlKCAnYXJpYS1oaWRkZW4nLCAndHJ1ZScgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGhpZGRlbkRpdi5hcHBlbmRDaGlsZCggc2VsZi4kdmlkZW8gKTtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggaGlkZGVuRGl2ICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlbGYucGxheWVyID0gc2VsZi5wbGF5ZXIgfHwgbmV3IGdsb2JhbC5WaW1lby5QbGF5ZXIoIHNlbGYuJHZpZGVvLCBzZWxmLnBsYXllck9wdGlvbnMgKTtcblxuICAgICAgICAgICAgICAgIC8vIHNldCBjdXJyZW50IHRpbWUgZm9yIGF1dG9wbGF5XG4gICAgICAgICAgICAgICAgaWYgKCBzZWxmLm9wdGlvbnMuc3RhcnRUaW1lICYmIHNlbGYub3B0aW9ucy5hdXRvcGxheSApIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wbGF5ZXIuc2V0Q3VycmVudFRpbWUoIHNlbGYub3B0aW9ucy5zdGFydFRpbWUgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBnZXQgdmlkZW8gd2lkdGggYW5kIGhlaWdodFxuICAgICAgICAgICAgICAgIHNlbGYucGxheWVyLmdldFZpZGVvV2lkdGgoKS50aGVuKCAoIHdpZHRoICkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnZpZGVvV2lkdGggPSB3aWR0aCB8fCAxMjgwO1xuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBzZWxmLnBsYXllci5nZXRWaWRlb0hlaWdodCgpLnRoZW4oICggaGVpZ2h0ICkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnZpZGVvSGVpZ2h0ID0gaGVpZ2h0IHx8IDcyMDtcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAvLyBldmVudHNcbiAgICAgICAgICAgICAgICBsZXQgdm1TdGFydGVkO1xuICAgICAgICAgICAgICAgIHNlbGYucGxheWVyLm9uKCAndGltZXVwZGF0ZScsICggZSApID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhIHZtU3RhcnRlZCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZmlyZSggJ3N0YXJ0ZWQnLCBlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2bVN0YXJ0ZWQgPSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5maXJlKCAndGltZXVwZGF0ZScsIGUgKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBmb3IgZW5kIG9mIHZpZGVvIGFuZCBwbGF5IGFnYWluIG9yIHN0b3BcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzZWxmLm9wdGlvbnMuZW5kVGltZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc2VsZi5vcHRpb25zLmVuZFRpbWUgJiYgZS5zZWNvbmRzID49IHNlbGYub3B0aW9ucy5lbmRUaW1lICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc2VsZi5vcHRpb25zLmxvb3AgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGxheSggc2VsZi5vcHRpb25zLnN0YXJ0VGltZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGF1c2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgc2VsZi5wbGF5ZXIub24oICdwbGF5JywgKCBlICkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmZpcmUoICdwbGF5JywgZSApO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGZvciB0aGUgc3RhcnQgdGltZSBhbmQgc3RhcnQgd2l0aCBpdFxuICAgICAgICAgICAgICAgICAgICBpZiAoIHNlbGYub3B0aW9ucy5zdGFydFRpbWUgJiYgMCA9PT0gZS5zZWNvbmRzICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wbGF5KCBzZWxmLm9wdGlvbnMuc3RhcnRUaW1lICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgc2VsZi5wbGF5ZXIub24oICdwYXVzZScsICggZSApID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5maXJlKCAncGF1c2UnLCBlICk7XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIHNlbGYucGxheWVyLm9uKCAnZW5kZWQnLCAoIGUgKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZmlyZSggJ2VuZGVkJywgZSApO1xuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBzZWxmLnBsYXllci5vbiggJ2xvYWRlZCcsICggZSApID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5maXJlKCAncmVhZHknLCBlICk7XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIHNlbGYucGxheWVyLm9uKCAndm9sdW1lY2hhbmdlJywgKCBlICkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmZpcmUoICd2b2x1bWVjaGFuZ2UnLCBlICk7XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIHNlbGYucGxheWVyLm9uKCAnZXJyb3InLCAoIGUgKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZmlyZSggJ2Vycm9yJywgZSApO1xuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTG9jYWxcbiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZFNvdXJjZVRvTG9jYWwoIGVsZW1lbnQsIHNyYywgdHlwZSApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnc291cmNlJyApO1xuICAgICAgICAgICAgICAgIHNvdXJjZS5zcmMgPSBzcmM7XG4gICAgICAgICAgICAgICAgc291cmNlLnR5cGUgPSB0eXBlO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoIHNvdXJjZSApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCAnbG9jYWwnID09PSBzZWxmLnR5cGUgKSB7XG4gICAgICAgICAgICAgICAgaWYgKCAhIHNlbGYuJHZpZGVvICkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiR2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICd2aWRlbycgKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBzaG93IGNvbnRyb2xzXG4gICAgICAgICAgICAgICAgICAgIGlmICggc2VsZi5vcHRpb25zLnNob3dDb250cm9scyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuJHZpZGVvLmNvbnRyb2xzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIG11dGVcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzZWxmLm9wdGlvbnMubXV0ZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuJHZpZGVvLm11dGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggc2VsZi4kdmlkZW8udm9sdW1lICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi4kdmlkZW8udm9sdW1lID0gc2VsZi5vcHRpb25zLnZvbHVtZSAvIDEwMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGxvb3BcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzZWxmLm9wdGlvbnMubG9vcCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuJHZpZGVvLmxvb3AgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gYXV0b3BsYXkgZW5hYmxlIG9uIG1vYmlsZSBkZXZpY2VzXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuJHZpZGVvLnNldEF0dHJpYnV0ZSggJ3BsYXlzaW5saW5lJywgJycgKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kdmlkZW8uc2V0QXR0cmlidXRlKCAnd2Via2l0LXBsYXlzaW5saW5lJywgJycgKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgYWNjZXNzaWJpbGl0eSBhdHRyaWJ1dGVzXG4gICAgICAgICAgICAgICAgICAgIGlmICggc2VsZi5vcHRpb25zLmFjY2Vzc2liaWxpdHlIaWRkZW4gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLiR2aWRlby5zZXRBdHRyaWJ1dGUoICd0YWJpbmRleCcsICctMScgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuJHZpZGVvLnNldEF0dHJpYnV0ZSggJ2FyaWEtaGlkZGVuJywgJ3RydWUnICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBzZWxmLiR2aWRlby5zZXRBdHRyaWJ1dGUoICdpZCcsIHNlbGYucGxheWVySUQgKTtcbiAgICAgICAgICAgICAgICAgICAgaGlkZGVuRGl2LmFwcGVuZENoaWxkKCBzZWxmLiR2aWRlbyApO1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCBoaWRkZW5EaXYgKTtcblxuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyggc2VsZi52aWRlb0lEICkuZm9yRWFjaCggKCBrZXkgKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRTb3VyY2VUb0xvY2FsKCBzZWxmLiR2aWRlbywgc2VsZi52aWRlb0lEWyBrZXkgXSwgYHZpZGVvLyR7IGtleSB9YCApO1xuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2VsZi5wbGF5ZXIgPSBzZWxmLnBsYXllciB8fCBzZWxmLiR2aWRlbztcblxuICAgICAgICAgICAgICAgIGxldCBsb2NTdGFydGVkO1xuICAgICAgICAgICAgICAgIHNlbGYucGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoICdwbGF5aW5nJywgKCBlICkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoICEgbG9jU3RhcnRlZCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZmlyZSggJ3N0YXJ0ZWQnLCBlICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbG9jU3RhcnRlZCA9IDE7XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIHNlbGYucGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoICd0aW1ldXBkYXRlJywgZnVuY3Rpb24oIGUgKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZmlyZSggJ3RpbWV1cGRhdGUnLCBlICk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgZm9yIGVuZCBvZiB2aWRlbyBhbmQgcGxheSBhZ2FpbiBvciBzdG9wXG4gICAgICAgICAgICAgICAgICAgIGlmICggc2VsZi5vcHRpb25zLmVuZFRpbWUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHNlbGYub3B0aW9ucy5lbmRUaW1lICYmIHRoaXMuY3VycmVudFRpbWUgPj0gc2VsZi5vcHRpb25zLmVuZFRpbWUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBzZWxmLm9wdGlvbnMubG9vcCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wbGF5KCBzZWxmLm9wdGlvbnMuc3RhcnRUaW1lICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXVzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBzZWxmLnBsYXllci5hZGRFdmVudExpc3RlbmVyKCAncGxheScsICggZSApID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5maXJlKCAncGxheScsIGUgKTtcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgc2VsZi5wbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lciggJ3BhdXNlJywgKCBlICkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmZpcmUoICdwYXVzZScsIGUgKTtcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgc2VsZi5wbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lciggJ2VuZGVkJywgKCBlICkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmZpcmUoICdlbmRlZCcsIGUgKTtcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgc2VsZi5wbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lciggJ2xvYWRlZG1ldGFkYXRhJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGdldCB2aWRlbyB3aWR0aCBhbmQgaGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgIHNlbGYudmlkZW9XaWR0aCA9IHRoaXMudmlkZW9XaWR0aCB8fCAxMjgwO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnZpZGVvSGVpZ2h0ID0gdGhpcy52aWRlb0hlaWdodCB8fCA3MjA7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5maXJlKCAncmVhZHknICk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gYXV0b3BsYXlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzZWxmLm9wdGlvbnMuYXV0b3BsYXkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBsYXkoIHNlbGYub3B0aW9ucy5zdGFydFRpbWUgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBzZWxmLnBsYXllci5hZGRFdmVudExpc3RlbmVyKCAndm9sdW1lY2hhbmdlJywgKCBlICkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmdldFZvbHVtZSggKCB2b2x1bWUgKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9wdGlvbnMudm9sdW1lID0gdm9sdW1lO1xuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZmlyZSggJ3ZvbHVtZWNoYW5nZScsIGUgKTtcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgc2VsZi5wbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lciggJ2Vycm9yJywgKCBlICkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmZpcmUoICdlcnJvcicsIGUgKTtcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFjayggc2VsZi4kdmlkZW8gKTtcbiAgICAgICAgfSApO1xuICAgIH1cblxuICAgIGluaXQoKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHNlbGYucGxheWVySUQgPSBgVmlkZW9Xb3JrZXItJHsgc2VsZi5JRCB9YDtcbiAgICB9XG5cbiAgICBsb2FkQVBJKCkge1xuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICBpZiAoIFlvdXR1YmVBUElhZGRlZCAmJiBWaW1lb0FQSWFkZGVkICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHNyYyA9ICcnO1xuXG4gICAgICAgIC8vIGxvYWQgWW91dHViZSBBUElcbiAgICAgICAgaWYgKCAneW91dHViZScgPT09IHNlbGYudHlwZSAmJiAhIFlvdXR1YmVBUElhZGRlZCApIHtcbiAgICAgICAgICAgIFlvdXR1YmVBUElhZGRlZCA9IDE7XG4gICAgICAgICAgICBzcmMgPSAnaHR0cHM6Ly93d3cueW91dHViZS5jb20vaWZyYW1lX2FwaSc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBsb2FkIFZpbWVvIEFQSVxuICAgICAgICBpZiAoICd2aW1lbycgPT09IHNlbGYudHlwZSAmJiAhIFZpbWVvQVBJYWRkZWQgKSB7XG4gICAgICAgICAgICBWaW1lb0FQSWFkZGVkID0gMTtcblxuICAgICAgICAgICAgLy8gVXNlZnVsIHdoZW4gVmltZW8gQVBJIGFkZGVkIHVzaW5nIFJlcXVpcmVKUyBodHRwczovL2dpdGh1Yi5jb20vbmstby92aWRlby13b3JrZXIvcHVsbC83XG4gICAgICAgICAgICBpZiAoICd1bmRlZmluZWQnICE9PSB0eXBlb2YgZ2xvYmFsLlZpbWVvICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3JjID0gJ2h0dHBzOi8vcGxheWVyLnZpbWVvLmNvbS9hcGkvcGxheWVyLmpzJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggISBzcmMgKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhZGQgc2NyaXB0IGluIGhlYWQgc2VjdGlvblxuICAgICAgICBsZXQgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3NjcmlwdCcgKTtcbiAgICAgICAgbGV0IGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ2hlYWQnIClbIDAgXTtcbiAgICAgICAgdGFnLnNyYyA9IHNyYztcblxuICAgICAgICBoZWFkLmFwcGVuZENoaWxkKCB0YWcgKTtcblxuICAgICAgICBoZWFkID0gbnVsbDtcbiAgICAgICAgdGFnID0gbnVsbDtcbiAgICB9XG5cbiAgICBvbkFQSXJlYWR5KCBjYWxsYmFjayApIHtcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgLy8gWW91dHViZVxuICAgICAgICBpZiAoICd5b3V0dWJlJyA9PT0gc2VsZi50eXBlICkge1xuICAgICAgICAgICAgLy8gTGlzdGVuIGZvciBnbG9iYWwgWVQgcGxheWVyIGNhbGxiYWNrXG4gICAgICAgICAgICBpZiAoICggJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiBnbG9iYWwuWVQgfHwgMCA9PT0gZ2xvYmFsLllULmxvYWRlZCApICYmICEgbG9hZGluZ1lvdXR1YmVQbGF5ZXIgKSB7XG4gICAgICAgICAgICAgICAgLy8gUHJldmVudHMgUmVhZHkgZXZlbnQgZnJvbSBiZWluZyBjYWxsZWQgdHdpY2VcbiAgICAgICAgICAgICAgICBsb2FkaW5nWW91dHViZVBsYXllciA9IDE7XG5cbiAgICAgICAgICAgICAgICAvLyBDcmVhdGVzIGRlZmVycmVkIHNvLCBvdGhlciBwbGF5ZXJzIGtub3cgd2hlbiB0byB3YWl0LlxuICAgICAgICAgICAgICAgIHdpbmRvdy5vbllvdVR1YmVJZnJhbWVBUElSZWFkeSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cub25Zb3VUdWJlSWZyYW1lQVBJUmVhZHkgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBsb2FkaW5nWW91dHViZURlZmVyLnJlc29sdmUoICdkb25lJyApO1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCAnb2JqZWN0JyA9PT0gdHlwZW9mIGdsb2JhbC5ZVCAmJiAxID09PSBnbG9iYWwuWVQubG9hZGVkICkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvYWRpbmdZb3V0dWJlRGVmZXIuZG9uZSggKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFZpbWVvXG4gICAgICAgIGlmICggJ3ZpbWVvJyA9PT0gc2VsZi50eXBlICkge1xuICAgICAgICAgICAgaWYgKCAndW5kZWZpbmVkJyA9PT0gdHlwZW9mIGdsb2JhbC5WaW1lbyAmJiAhIGxvYWRpbmdWaW1lb1BsYXllciApIHtcbiAgICAgICAgICAgICAgICBsb2FkaW5nVmltZW9QbGF5ZXIgPSAxO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZpbWVvSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCggKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoICd1bmRlZmluZWQnICE9PSB0eXBlb2YgZ2xvYmFsLlZpbWVvICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCggdmltZW9JbnRlcnZhbCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZ1ZpbWVvRGVmZXIucmVzb2x2ZSggJ2RvbmUnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgMjAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoICd1bmRlZmluZWQnICE9PSB0eXBlb2YgZ2xvYmFsLlZpbWVvICkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvYWRpbmdWaW1lb0RlZmVyLmRvbmUoICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMb2NhbFxuICAgICAgICBpZiAoICdsb2NhbCcgPT09IHNlbGYudHlwZSApIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9\\n//# sourceURL=webpack-internal:///./node_modules/video-worker/src/video-worker.esm.js\\n\")}}]);","extractedComments":[]}