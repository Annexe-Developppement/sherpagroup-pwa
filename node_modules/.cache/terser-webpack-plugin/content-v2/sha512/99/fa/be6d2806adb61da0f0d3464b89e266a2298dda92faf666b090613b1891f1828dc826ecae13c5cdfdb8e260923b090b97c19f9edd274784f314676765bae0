{"map":"{\"version\":3,\"sources\":[\"131.67d32158898208df3502.js\"],\"names\":[\"window\",\"push\",\"./src/peregrine/lib/talons/AccountConfirmation/useAccountConfirmation.js\",\"module\",\"__webpack_exports__\",\"__webpack_require__\",\"r\",\"d\",\"useAccountConfirmation\",\"useSendConfirmationLink\",\"react__WEBPACK_IMPORTED_MODULE_0__\",\"_apollo_client__WEBPACK_IMPORTED_MODULE_1__\",\"_magento_peregrine_lib_context_user__WEBPACK_IMPORTED_MODULE_2__\",\"_magento_peregrine_lib_context_cart__WEBPACK_IMPORTED_MODULE_3__\",\"_magento_peregrine_lib_hooks_useAwaitQuery__WEBPACK_IMPORTED_MODULE_4__\",\"_s\",\"$RefreshSig$\",\"_s2\",\"props\",\"accountConfirmationMutation\",\"createCartMutation\",\"getCartDetailsQuery\",\"customerQuery\",\"accountConfirm\",\"data\",\"accountConfirmResponse\",\"Object\",\"inProgress\",\"setInProgress\",\"createCart\",\"getCartDetails\",\"removeCart\",\"getUserDetails\",\"setToken\",\"fetchCartId\",\"fetchUserDetails\",\"fetchCartDetails\",\"handleAccountConfirm\",\"async\",\"id\",\"key\",\"response\",\"variables\",\"accountConfirmation\",\"success\",\"token\",\"accountConfirmationLinkMutation\",\"confirmLink\",\"confirmLinkData\",\"SendAccountConfirmLink\",\"email\"],\"mappings\":\"CAACA,OAAqB,aAAIA,OAAqB,cAAK,IAAIC,KAAK,CAAC,CAAC,KAAK,CAE9DC;;;;wEAKA,SAAUC,EAAQC,EAAqBC,GAE7C,aACAA,EAAoBC,EAAEF,GACSC,EAAoBE,EAAEH,EAAqB,0BAA0B,WAAa,OAAOI,KACzFH,EAAoBE,EAAEH,EAAqB,2BAA2B,WAAa,OAAOK,KACpG,IAAIC,EAAqCL,cAAiC,iCAEtEM,EAA8CN,uBAA0C,0CACxFO,EAAmEP,4CAA+D,yDAClIQ,EAAmER,4CAA+D,yDAClIS,EAA0ET,mDAAsE,gEACrKU,EAAKC,eACLC,EAAMD,eAYV,MAAMR,EAAyBU,IAC7BH,IAEA,MAAMI,4BACJA,EAA2BC,mBAC3BA,EAAkBC,oBAClBA,EAAmBC,cACnBA,GACEJ,GACGK,GACLC,KAAMC,IACHC,OAAOf,EAAyD,YAAhEe,CAAmEP,IACjEQ,EAAYC,GAAiBF,OAAOhB,EAA6C,SAApDgB,EAAuD,IACpF,EAAEG,WACPA,EAAUC,eACVA,EAAcC,WACdA,IACGL,OAAOb,EAAiF,eAAxFa,IACE,EAAEM,eACPA,EAAcC,SACdA,IACGP,OAAOd,EAAiF,eAAxFc,IACEQ,GAAeR,OAAOf,EAAyD,YAAhEe,CAAmEN,GACnFe,EAAmBT,OAAOZ,EAAuF,cAA9FY,CAAiGJ,GACpHc,EAAmBV,OAAOZ,EAAuF,cAA9FY,CAAiGL,GA+B1H,MAAO,CACLM,WAAAA,EACAU,qBAhC2BX,OAAOhB,EAAgD,YAAvDgB,CAA0DY,OACrFC,GAAAA,EACAC,IAAAA,MAEAZ,GAAc,GACd,MAAMa,QAAiBlB,EAAe,CACpCmB,UAAW,CACTH,GAAAA,EACAC,IAAAA,KAIJ,GAAIC,GAAYA,EAASjB,KAAKmB,oBAAoBC,QAAS,CACzD,MAAMC,EAAQJ,GAAYA,EAASjB,KAAKmB,oBAAoBC,SAAWH,EAASjB,KAAKmB,oBAAoBE,YACnGZ,EAASY,SACTb,EAAe,CACnBG,iBAAAA,UAEIJ,UACAF,EAAW,CACfK,YAAAA,UAEIJ,EAAe,CACnBI,YAAAA,EACAE,iBAAAA,IAIJR,GAAc,IACb,CAACL,EAAgBU,EAAUD,EAAgBG,EAAkBJ,EAAYF,EAAYK,EAAaJ,EAAgBM,IAInHX,uBAAAA,IAIJV,EAAGP,EAAwB,gCAAgC,GAAO,WAChE,MAAO,CAACG,EAAyD,YAAGE,EAAiF,eAAGD,EAAiF,eAAGD,EAAyD,YAAGG,EAAuF,cAAGA,EAAuF,kBAG3d,MAAML,EAA0BS,IAC9BD,IAEA,MAAM6B,gCACJA,GACE5B,GACG6B,GACLvB,KAAMwB,IACHtB,OAAOf,EAAyD,YAAhEe,CAAmEoB,IACjEnB,EAAYC,GAAiBF,OAAOhB,EAA6C,SAApDgB,EAAuD,GAY3F,MAAO,CACLC,WAAAA,EACAsB,uBAb6BvB,OAAOhB,EAAgD,YAAvDgB,CAA0DY,OACvFY,MAAAA,MAEAtB,GAAc,SACRmB,EAAY,CAChBL,UAAW,CACTQ,MAAAA,KAGJtB,GAAc,IACb,CAACmB,EAAanB,IAIfoB,gBAAAA,IAIJ/B,EAAIR,EAAyB,gCAAgC,GAAO,WAClE,MAAO,CAACE,EAAyD\"}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{\"./src/peregrine/lib/talons/AccountConfirmation/useAccountConfirmation.js\":\n/*!********************************************************************************!*\\\n  !*** ./src/peregrine/lib/talons/AccountConfirmation/useAccountConfirmation.js ***!\n  \\********************************************************************************/\n/*! exports provided: useAccountConfirmation, useSendConfirmationLink */function(t,e,n){\"use strict\";n.r(e),n.d(e,\"useAccountConfirmation\",(function(){return d})),n.d(e,\"useSendConfirmationLink\",(function(){return C}));var a=n(/*! react */\"./node_modules/react/index.js\"),o=n(/*! @apollo/client */\"./node_modules/@apollo/client/index.js\"),i=n(/*! @magento/peregrine/lib/context/user */\"./node_modules/@magento/peregrine/lib/context/user.js\"),s=n(/*! @magento/peregrine/lib/context/cart */\"./node_modules/@magento/peregrine/lib/context/cart.js\"),r=n(/*! @magento/peregrine/lib/hooks/useAwaitQuery */\"./node_modules/@magento/peregrine/lib/hooks/useAwaitQuery.js\"),u=$RefreshSig$(),c=$RefreshSig$();const d=t=>{u();const{accountConfirmationMutation:e,createCartMutation:n,getCartDetailsQuery:c,customerQuery:d}=t,[C,{data:l}]=Object(o.useMutation)(e),[f,m]=Object(a.useState)(!1),[,{createCart:b,getCartDetails:w,removeCart:j}]=Object(s.useCartContext)(),[,{getUserDetails:g,setToken:k}]=Object(i.useUserContext)(),[p]=Object(o.useMutation)(n),y=Object(r.useAwaitQuery)(d),O=Object(r.useAwaitQuery)(c);return{inProgress:f,handleAccountConfirm:Object(a.useCallback)(async({id:t,key:e})=>{m(!0);const n=await C({variables:{id:t,key:e}});if(n&&n.data.accountConfirmation.success){const t=n&&n.data.accountConfirmation.success&&n.data.accountConfirmation.token;await k(t),await g({fetchUserDetails:y}),await j(),await b({fetchCartId:p}),await w({fetchCartId:p,fetchCartDetails:O})}m(!1)},[C,k,g,y,j,b,p,w,O]),accountConfirmResponse:l}};u(d,\"ix81vqdKSQFMqpDCGDV82sgZwew=\",!1,(function(){return[o.useMutation,s.useCartContext,i.useUserContext,o.useMutation,r.useAwaitQuery,r.useAwaitQuery]}));const C=t=>{c();const{accountConfirmationLinkMutation:e}=t,[n,{data:i}]=Object(o.useMutation)(e),[s,r]=Object(a.useState)(!1);return{inProgress:s,SendAccountConfirmLink:Object(a.useCallback)(async({email:t})=>{r(!0),await n({variables:{email:t}}),r(!1)},[n,r]),confirmLinkData:i}};c(C,\"/l+9fWxQThXTmoyiHLX66THDjOs=\",!1,(function(){return[o.useMutation]}))}}]);","extractedComments":[]}