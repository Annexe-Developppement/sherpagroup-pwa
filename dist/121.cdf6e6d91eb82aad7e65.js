(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{437:function(e,n,i){"use strict";i.r(n);var a=i(4),t=i.n(a),d=i(9),r=i.n(d),o=i(10),s=i.n(o),c=i(0),u=i.n(c),m=i(471),l=i.n(m),v=i(472),k=i.n(v),f=i(198),p=i(58),S=i(467),b=i(298),N=i(1032),g=i(342),h=i(481),F=i(479),w=i.n(F),C=i(480),E=i.n(C),D=i(370),y=i.n(D),O=u.a.createElement(b.a,{src:N.a,size:20});n.default=function(e){var n=e.id,i=Object(g.a)().formatMessage,a=Object(c.useState)(!1),d=s()(a,2),o=d[0],m=d[1],v=Object(c.useState)(!1),b=s()(v,2),N=b[0],F=b[1],C=Object(h.b)({query:w.a}),D=C.data,L=C.refetch,V=Object(h.c)({removeCompareMutation:E.a,CustomerQuery:y.a}),j=V.handleRemoveCompare,x=V.removeResponse,T=!1;void 0!==D&&D.items.forEach((function(e){e.product.id==n&&(T=!0)}));var _=Object(h.a)({createCompareMutation:l.a,addToCompareMutation:k.a}),I=_.handleCreateCompare,P=_.createCompareData,M=_.handleAddCompare,$=_.compareResponse,A=Object(f.a)(),R=s()(A,2)[1].addToast;Object(c.useEffect)((function(){void 0!==$&&o&&(R({type:"info",message:i({id:"compare.compareMessage",defaultMessage:"You have added product to compare list."}),timeout:2e3}),m(!1))}),[R,o,$,i]),Object(c.useEffect)((function(){void 0!==x&&N&&(R({type:"info",message:i({id:"compare.removeCompareMessage",defaultMessage:"You have removed product from compare list."}),timeout:2e3}),F(!1))}),[R,i,x,N]);var q=new(0,p.a.BrowserPersistence);P&&P.uid&&!q.getItem("compare_uid")&&q.setItem("compare_uid",P.uid);var z=function(){var e=r()(t.a.mark((function e(n){return t.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(q.getItem("compare_uid")?q.getItem("compare_uid"):"")){e.next=6;break}return e.next=4,M(n);case 4:e.next=8;break;case 6:return e.next=8,I(n);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,T?u.a.createElement("button",{className:S.a.add_to_compare+" "+S.a.added_to_compare,title:"Remove from compare",onClick:r()(t.a.mark((function e(){return t.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(n);case 2:return e.next=4,L();case 4:F(!0);case 5:case"end":return e.stop()}}),e)})))},O):u.a.createElement("button",{className:S.a.add_to_compare,title:"Add to compare",onClick:r()(t.a.mark((function e(){return t.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(n);case 2:m(!0);case 3:case"end":return e.stop()}}),e)})))},O))}},471:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"createCompareList"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"products"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createCompareList"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"products"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"products"}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"item_count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"attributes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"product"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sku"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"html"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:399}};i.loc.source={body:"mutation createCompareList($products: ID) {\n    createCompareList(input: { products: [$products] }) {\n        uid\n        item_count\n        attributes {\n            code\n            label\n        }\n        items {\n            uid\n            product {\n                sku\n                name\n                description {\n                    html\n                }\n            }\n        }\n    }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function t(e,n){for(var i=0;i<e.definitions.length;i++){var a=e.definitions[i];if(a.name&&a.name.value==n)return a}}i.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var a=n.type;"NamedType"===a.kind&&i.add(a.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),a[e.name.value]=n}})),e.exports=i,e.exports.createCompareList=function(e,n){var i={kind:e.kind,definitions:[t(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var d=a[n]||new Set,r=new Set,o=new Set;for(d.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=t(e,n);a&&i.definitions.push(a)})),i}(i,"createCompareList")},472:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"addProductsToCompareList"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"products"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addProductsToCompareList"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"uid"},value:{kind:"Variable",name:{kind:"Name",value:"uid"}}},{kind:"ObjectField",name:{kind:"Name",value:"products"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"products"}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"item_count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"attributes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"product"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sku"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"html"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:435}};i.loc.source={body:"mutation addProductsToCompareList($products: ID, $uid: ID!) {\n    addProductsToCompareList(input: { uid: $uid, products: [$products] }) {\n        uid\n        item_count\n        attributes {\n            code\n            label\n        }\n        items {\n            uid\n            product {\n                sku\n                name\n                description {\n                    html\n                }\n            }\n        }\n    }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function t(e,n){for(var i=0;i<e.definitions.length;i++){var a=e.definitions[i];if(a.name&&a.name.value==n)return a}}i.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var a=n.type;"NamedType"===a.kind&&i.add(a.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),a[e.name.value]=n}})),e.exports=i,e.exports.addProductsToCompareList=function(e,n){var i={kind:e.kind,definitions:[t(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var d=a[n]||new Set,r=new Set,o=new Set;for(d.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=t(e,n);a&&i.definitions.push(a)})),i}(i,"addProductsToCompareList")}}]);